<?xml version="1.0" encoding="UTF-8"?>

<rss version="2.0"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
<channel>

<title>Alsacreations.com - Apprendre</title>
<description>Les derni√®res ressources publi√©es sur Alsacreations.com</description>
<language>fr</language>

<link>https://www.alsacreations.com/</link>
<atom:link href="https://www.alsacreations.com/rss/apprendre.xml" rel="self" type="application/rss+xml" />

  
	<item>
  	<title>Article : Revue de la d√©finition du support des navigateurs</title>
  	<link>https://www.alsacreations.com/article/lire/1934-Revue-de-la-definition-du-support-des-navigateurs.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1934-Revue-de-la-definition-du-support-des-navigateurs.html</guid>
  	<description><![CDATA[<p>Il a toujours √©t√© complexe de d√©finir avec pr√©cision un <strong>niveau de support navigateur</strong> dans les projets web, d'autant plus avec la vari√©t√© des plateformes (mobile, desktop) et malgr√© la concentration du march√© autour d'un nombre r√©duit de moteurs.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731252176-browsers.png" alt="Navigateurs web" title="" data-img_id="3509"></p>

<p>D'un c√¥t√© car de multiples langages entrent en jeu pour l'int√©gration (interpr√©tation/reconnaissance des balises HTML et des propri√©t√©s CSS), d√©veloppements (syntaxe JavaScript et API utilisables, version de HTTP, protocoles et en-t√™tes). D'un autre c√¥t√© car avec les mises √† jour constantes de toutes parts, cette grille de lecture est changeante, entre le d√©but et la fin d'un projet, si tant est qu'il y ait une fin.</p>

<p>L'approche par d√©gradation gracieuse qui a √©t√© d√©finie comme une bonne pratique pour ne pas exclure un public non-technophile, bien que tr√®s appr√©ciable sur le papier, n'est plus toujours applicable tant la d√©pendance √† des frameworks tout-en-un impose d√©j√† de reconna√Ætre toute une panoplie de fonctionnalit√©s et ne plus permettre de se reposer sur une version d√©grad√©e, voire brute d'un site ou d'une application web.</p>

<p>Les plus gros acteurs du web qui ne manquent pourtant pas de moyens et d'un public tr√®s large, ont progressivement abandonn√© les alternatives statiques minimalistes qui pouvaient exister. Nous avons bien plus tendance √† vouloir exploiter les derniers outils √† la mode, quitte √† laisser des personnes sur le bord des autoroutes de l'information, l√† o√π par le pass√© il fallait bien plus faire attention au support des anciens navigateurs.</p>

<h2>Un peu de transpilation</h2>

<p>Des solutions existent pour automatiser et faciliter l'interpr√©tation de code r√©cent sur d'anciennes plateformes.</p>

<p>En <strong>CSS</strong>, si une propri√©t√© r√©cente n'est pas reconnue, la mise en page ou l'apparence sera d√©grad√©e mais cela ne devrait pas emp√™cher la consultation et l'usage (en th√©orie) ; on utilise aussi <a href="https://github.com/postcss/autoprefixer">autoprefixer</a> pour √©viter d'√©crire des pr√©fixes vendeurs, mais cela devrait dispara√Ætre √† terme.</p>

<p>En <strong>JavaScript</strong>, on a longtemps transpil√©, par exemple avec l'aide de <a href="https://babeljs.io/">Babel</a> du code ECMAScript tr√®s r√©cent vers des versions r√©tro-compatibles, utilisant des syntaxes plus communes, cela se passe en g√©n√©ral bien ; par contre si une API ou fonctionnalit√© native du navigateur est absente c'est plus probl√©matique et il faut passer par un <i lang="en">fallback</i>, un <i lang="en">shim</i>, un <i lang="en">polyfill</i>, c'est-√†-dire un bout de code plus ou moins cons√©quent qui va tenter de reproduire plus ou moins fid√®lement ce que le navigateur ne reconna√Æt pas tout seul.</p>

<p>En <strong>HTML</strong> √©tant donn√© la <em>relative</em> stabilit√© des balises et les solutions de repli possibles jusqu'√† l'interpr√©tation du contenu en texte brut, la question se pose moins... en th√©orie : deux √©l√©ments largement reconnus comme <code>&lt;details&gt;</code> et <code>&lt;summary&gt;</code> ont provoqu√© des tourments pour les lecteurs d'√©cran, Voiceover iOS ne reconnaissant pas le r√¥le de <em>bouton</em> de summary. D√©sormais au tour de <code>&lt;dialog&gt;</code> et <code>popover</code> : il y a de nouveaux √©l√©ments cens√©s simplifier et remplacer des impl√©mentations ARIA imparfaites mais les navigateurs et/ou lecteurs d'√©cran ne suivent pas ce rythme (et/ou leur sp√©cification d'ailleurs).</p>

<h3>Browserslist</h3>

<p>Dans le seul aspect technique, une biblioth√®que a aid√© jusqu'√† pr√©sent : <a href="https://browsersl.ist/">Browserslist</a> permet dans un fichier de configuration ou directement dans <code>package.json</code> de d√©finir par des mots simples quelle "quantit√©" du march√© des navigateurs on souhaite cibler. Par exemple <code>&gt; 0.5%, last 5 versions, not dead</code> indiquera aux autres outils de compilation (Babel, Autoprefixer, Postcss...) sur quelles instructions se reposer pour satisfaire cette exigence de r√©tro-compatibilit√©.</p>

<p>Le site va nous permettre d'obtenir un tableau tr√®s d√©taill√© des versions et une estimation de la population globale qui r√©pondra √† cette condition.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731252599-browserslist.png" alt="Capture d'√©cran de Browserslist" title="" data-img_id="3510"></p>

<h3>CanIUse</h3>

<p>Vous connaissez <a href="https://caniuse.com/">Can I use</a> et ses nombreux tableaux, que l'on peut affiner par zone g√©ographique, par usage et par date. Avant de lancer un nouveau d√©veloppement on pourra consulter l'une ou l'autre fonctionnalit√©, mais malheureusement pas toutes, cela devient tentaculaire.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731253496-caniuse-webp.png" alt="Can i use webp" title="" data-img_id="3511"></p>

<h2>Approche par version de navigateur (avant)</h2>

<blockquote>
  <p>Exemple de formule : "Support de Firefox 37, d'Internet Explorer 11, et Chrome 42".</p>
</blockquote>

<p>Durant de nombreuses ann√©es, les navigateurs ont connu des progr√®s moins fluides, moins granulaires et plus espac√©s dans le temps, car les mises √† jour automatiques n'√©taient pas la r√®gle : il √©tait humainement possible de suivre l'√©volution des versions et d'avoir en t√™te les nouveaut√©s apport√©es, par exemple entre Internet Explorer 5 et 6.</p>

<p>D√©sormais, avec des num√©rotations de versions qui se comptent en dizaines et un rythme de sorties qui se compte en semaines impos√© par les √©quipes de Chromium, puis Firefox, puis Safari (WebKit), il devient difficile de d√©finir avec pr√©cision un tableau de support pour un projet d'autant plus que les API envisag√©es deviennent de plus en plus complexes pour transformer le web en plateforme compl√®te de d√©veloppement. Si certaines entreprises choisissent la "stabilit√©" de Firefox ESR (Extended Support Release) pour bloquer les fonctionnalit√©s √† une certaine version, cela reste marginal.</p>

<ul>
<li>Chrome publie une roadmap dense sur <a href="https://chromestatus.com/roadmap">https://chromestatus.com/roadmap</a></li>
<li>WebKit n'entre plus dans les d√©tails <a href="https://webkit.org/status/">https://webkit.org/status/</a> et renvoie √† MDN (Mozilla Developer Network) + <em>Can I use</em> mais communique tout de m√™me sur sa position vis-√†-vis de l'int√©gration dans le moteur <a href="https://webkit.org/standards-positions/">https://webkit.org/standards-positions/</a> et plus sp√©cifiquement sur les propri√©t√©s CSS reconnues <a href="https://webkit.org/css-status/">https://webkit.org/css-status/</a></li>
<li>Mozilla fait de m√™me <a href="https://mozilla.github.io/standards-positions/">https://mozilla.github.io/standards-positions/</a> apr√®s avoir abandonn√© sa page de <em>platform status</em></li>
<li>Microsoft Edge a aussi jet√© l'√©ponge <a href="https://developer.microsoft.com/fr-fr/microsoft-edge/platform/status/">https://developer.microsoft.com/fr-fr/microsoft-edge/platform/status/</a> mais cela peut se comprendre car reposant d√©sormais sur Chromium</li>
</ul>

<p>Notons l'initiative de Simon Willison qui a cod√© un outil permettant d'obtenir un historique plus d√©taill√© du support d√©j√† affich√© par la documentation MDN avec <a href="https://tools.simonwillison.net/mdn-timelines">MDN timelines</a>.</p>

<h2>Approche par anciennet√© relative</h2>

<blockquote>
  <p>Formule possible : "Support optimal des navigateurs desktop jusqu'√† 2 ans et en mode d√©grad√© jusqu'√† 5 ans, support des navigateurs mobiles jusqu'√† 3 ans".</p>
</blockquote>

<p>Avec notre √©cosyst√®me mouvant, on peut s'orienter vers un support mesur√© √† l'anciennet√© des navigateurs. On ne mesure plus le nombre de versions √©coul√©es mais le temps. Cela a l'avantage d'√™tre souple et cela peut sembler "toujours √† jour" quoiqu'il arrive... mais concr√®tement on sera toujours dans une zone approximative au fur et √† mesure de la dur√©e de vie d'un projet : faut-il mesurer par rapport √† la date de d√©marrage des d√©veloppements, ou de mise en ligne d√©finitive ? Quid du paysage technique dans 6 mois, 1 an et plus.</p>

<h2>Approche par <em>baseline</em></h2>

<p>Avec toutes ces difficult√©s et l'impossibilit√© de suivre exhaustivement les versions et leur immense tableau de support, la plus r√©cente vision est le pragmatisme (et optimisme ?) : <a href="https://web.dev/baseline">Baseline</a> d√©finit deux statuts :</p>

<table>
<thead>
<tr>
  <th>Intitul√©</th>
  <th>Logo</th>
  <th>D√©finition</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Nouveaut√© disponible</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731252097-baseline-new.png" alt="Baseline new" title="" data-img_id="3507"></td>
  <td>la fonctionnalit√© est compatible avec tous les principaux navigateurs : elle est interop√©rable.</td>
</tr>
<tr>
  <td>Disponibilit√© g√©n√©rale</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731252107-baseline-widely.png" alt="Baseline widely" title="" data-img_id="3508"></td>
  <td>30 mois se sont √©coul√©s depuis la nouvelle date d'interop√©rabilit√©. Cette fonctionnalit√© peut √™tre utilis√©e par la plupart des sites</td>
</tr>
<tr>
  <td>Disponibilit√© limit√©e</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731347550-baseline-limited.png" alt="Baseline limited" title="" data-img_id="3515"></td>
  <td>C'est trop r√©cent, peu ou pas support√©.</td>
</tr>
</tbody>
</table>

<p>On retrouve un tableau aussi tr√®s fourni gr√¢ce √† <a href="https://webstatus.dev">Web Platform Status</a>, √† l'initiative de l'√©quipe de Chrome. Il faut les comprendre, les nouveaut√©s s'encha√Ænent plus vite qu'il n'est possible √† un humain de les suivre et √† <a href="https://killedbygoogle.com/">Google d'abandonner des produits</a>.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731253942-baseline-table.png" alt="Tableau baseline" title="" data-img_id="3514"></p>

<p>C'est probablement ce qui fait le plus sens √† l'heure actuelle, avec un rep√®re temporel par ann√©e (<a href="https://web.dev/blog/baseline2023">baseline 2023</a>, 2024, 2025...) et un niveau de confiance affich√© pour les d√©veloppeuses et d√©veloppeurs bien plus compr√©hensible pour la question "est-ce que je peux utiliser ce truc, ou est-ce que √ßa va casser ?".</p>

<p>On retrouve aussi <em>Baseline</em> sur <a href="https://developer.mozilla.org/en-US/blog/baseline-unified-view-stable-web-features/">MDN</a></p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731253591-mdn-baseline.png" alt="MDN Baseline" title="" data-img_id="3513"></p>

<p>...et sur <a href="https://caniuse.com/">CanIUse</a>.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731253538-caniuse-baseline.png" alt="Can I use baseline" title="" data-img_id="3512"></p>

<p>Cet alignement entre √©quipes de d√©veloppement de moteurs, documentations et toutes les personnes qui font du web en g√©n√©ral a le m√©rite d'√™tre plus abordable.</p>

<h3>Mais alors on fait quoi de Baseline ?</h3>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731252107-baseline-widely.png" alt="Baseline widely" title="" data-img_id="3508"></p>

<p>Avec une fonctionnalit√© annonc√©e en "Disponibilit√© g√©n√©rale" : on peut assez bien prendre une d√©cision, on sait qu'elle est int√©rop√©rable depuis un moment ayant permis √† la majorit√© des internautes d'effectuer les mises √† jour n√©cessaires... n'est-ce pas ? Mais rien ne le garantit, comme toujours un pourcentage non n√©gligeable de personnes seront contraintes pour des raisons de moyens ou d'outils, et rien ne garantit non plus que l'on soit irr√©prochable du c√¥t√© des outils d'accessibilit√©.</p>

<p>üëâ On peut d√©cider d'utiliser la fonctionnalit√© pour un projet qui d√©marre, ou qui se met √† jour d√®s √† pr√©sent, avec toutefois un point d'attention √† pr√©voir une solution de repli si son absence est bloquante pour un pourcentage significatif d'internautes.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731347550-baseline-limited.png" alt="Baseline limited" title="" data-img_id="3515"></p>

<p>Avec une fonctionnalit√© annonc√©e en "Disponibilit√© limit√©e" : c'est assez √©vident, un ou plusieurs moteurs de navigateurs n'en sont pas √©quip√©s (ou les versions de Chromium sont trop fra√Æches), une majorit√© d'internautes n'y auront pas acc√®s.</p>

<p>üëâ On √©vite d'y toucher.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731252097-baseline-new.png" alt="Baseline new" title="" data-img_id="3507"></p>

<p>Avec une fonctionnalit√© annonc√©e en "Nouveaut√© disponible" : c'est plus d√©licat. Depuis quand est-elle disponible, pour qui, et quel est le d√©lai qui court (pour les 30 mois), vient-il de d√©marrer ou est-on proches de passer en statut "Disponibilit√© g√©n√©rale" ? C'est pourquoi <a href="https://webstatus.dev/">https://webstatus.dev/</a> pr√©cise des dates (lorsqu'on coche les bonnes options) :</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1731348631-web-platform-status-dates.png" alt="Web Platform Status fonctionnalit√©s avec dates" title="" data-img_id="3516"></p>

<p>Par exemple <code>appearance</code> nouveau en 2022 est pass√© en "disponibilit√© g√©n√©rale" en septembre 2024. La media query <code>prefers-contrast</code> obtiendra le m√™me s√©same en d√©cembre 2024, tandis que pour <code>forced-colors</code> ce sera en mars 2025.</p>

<p>ü§∑ Au cas par cas ?</p>

<p>Prenons quelques exemples (√† la date de publication) :</p>

<table>
<thead>
<tr>
  <th>Fonctionnalit√©</th>
  <th>Statut</th>
  <th>Date d'annonce / disponibilit√© pr√©vue</th>
  <th>Part de la population en France/Europe</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Attribut HTML inert</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731252097-baseline-new.png" alt="Baseline new" title="" data-img_id="3507"></td>
  <td>avril 2023 / octobre 2025</td>
  <td>95%</td>
</tr>
<tr>
  <td>backdrop-filter</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731252097-baseline-new.png" alt="Baseline new" title="" data-img_id="3507"></td>
  <td>septembre 2024 / mars 2027</td>
  <td>98%</td>
</tr>
<tr>
  <td>requestVideoFrameCallback</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731252097-baseline-new.png" alt="Baseline new" title="" data-img_id="3507"></td>
  <td>octobre 2024 / avril 2027</td>
  <td>98%</td>
</tr>
<tr>
  <td>WebUSB</td>
  <td><img src="https://www.alsacreations.com/xmedia/doc/original/1731347550-baseline-limited.png" alt="Baseline limited" title="" data-img_id="3515"></td>
  <td>aucune pr√©cision*</td>
  <td>75%</td>
</tr>
</tbody>
</table>

<p>On notera donc des √©tranget√©s dans le pragmatisme qui devrait faire sens : <code>accent-color</code> est reconnu partout mais encore not√© "Limit√©" ; <code>requestVideoFrameCallback</code> ne devrait acc√©der √† "Disponibilit√© g√©n√©rale" qu'en 2027 mais est d√©j√† impl√©ment√© en r√©alit√© par tous les moteurs actuels ; le v√©n√©rable <code>zoom</code> n'a √©t√© list√© qu'√† partir de mai 2024, etc.</p>

<h3>Alors, "√ßa d√©pend" ?</h3>

<p>Oui. Des dates en question, de l'importance des technologies √† supporter et de leur caract√®re bloquant ou non-bloquant. Les √©tiquettes propos√©es par l'approche <em>baseline</em> sont int√©ressantes et pratiques : d'un coup d'oeil on peut se faire une premi√®re id√©e et √©changer dans des termes simples avec des coll√®gues ou des clients. Mais dans la r√©alit√©, on ne sera pas √©pargn√©s par les tableaux de supports, les projections temporelles et les pourcentages divers. C'est notre m√©tier, chacun saura prendre les bonnes d√©cisions ;)</p>
<p><b><a href="https://www.alsacreations.com/article/lire/1934-Revue-de-la-definition-du-support-des-navigateurs.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Web</category>
  	<dc:date>2024-11-15T08:40:07+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : Les import maps en JavaScript</title>
  	<link>https://www.alsacreations.com/article/lire/1933-Les-import-maps-en-JavaScript.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1933-Les-import-maps-en-JavaScript.html</guid>
  	<description><![CDATA[<p>Les <i lang="en">import maps</i> sont une fonctionnalit√© moderne de JavaScript qui permet de contr√¥ler comment le navigateur r√©sout les <strong>imports de modules</strong>.</p>

<p>Vous avez s√ªrement d√©j√† rencontr√© dans vos projets des modules JavaScript, aussi appel√©s ESM (EcmaScript Modules) qui induisent un d√©coupage des portions de code et de donn√©es. C'est tr√®s pratique, avec certains fichiers - en g√©n√©ral fournis par une biblioth√®que - qui exportent des fonctions, tableaux, objets, etc. pour les mettre √† la disposition d'autres fichiers - en g√©n√©ral les v√¥tres - qui les importent.</p>

<p>On sait aussi que depuis quelques ann√©es de tels scripts peuvent √™tre charg√©s dans le navigateur √† l'aide de la balise script √©quip√©e de l'attribut <code>type="module"</code>.</p>

<h2>Que sont les import maps ?</h2>

<p>Une d√©claration d'import map pourrait √™tre la suivante √† l'aide de la nouvelle valeur <code>type="importmap"</code>.</p>

<pre><code class="language-html">&lt;script type="importmap"&gt;
{
    "imports": {
        "logger": "/js/logger.js",
        "tools/": "/js/tools/",
        "lodash": "https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"
    }
}
&lt;/script&gt;
</code></pre>

<p>On peut constater qu'il s'agit d'un objet, contenant une cl√© <code>"imports"</code>, elle m√™me d√©finissant une correspondance entre des noms courts et des chemins longs.</p>

<p>On peut aussi faire appel √† un beau fichier JSON contenant cette "carte", ce qui semblera plus propre que de les d√©clarer <em>inline</em> dans le corps de la page.</p>

<pre><code class="language-html">&lt;script type="importmap" src="map.json"&gt;
</code></pre>

<h2>Avantages</h2>

<p>Cela a pour but de :</p>

<ul>
<li>Simplifier la gestion des d√©pendances dans le navigateur.</li>
<li>Permettre d'utiliser des noms simples plut√¥t que des chemins complets.</li>
<li>√âviter d'avoir √† sp√©cifier les versions dans chaque import.</li>
</ul>

<p>Ainsi on pourra √©crire ensuite</p>

<pre><code class="language-javascript">import _ from 'lodash';

// Import depuis un chemin local
import { log } from 'logger';

// Import via un pr√©fixe
import { maFonction } from 'tools/malib.js';
</code></pre>

<p>On am√©liore la lisibilit√© et on peut plus facilement changer les versions et les chemins r√©els vers les d√©pendances.</p>

<p>Il y a quelques petites limitations : les projets d'envergure avec des frameworks et des outils de compilation tels que Vite, viennent d√©j√† avec des solutions de r√©solution de modules. Certaines fonctionnalit√©s qui optimisent le d√©veloppement et le poids des ressources (hot reloading, tree shaking) ne sont pas disponibles. C'est pourquoi on s'en servira plut√¥t pour du prototypage rapide, des petites d√©monstrations techniques ou des projets qui ne passent pas par des frameworks √©volu√©s.</p>

<p>L'attribut <code>type="importmap"</code> est <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/script/type/importmap#compatibilit%C3%A9_des_navigateurs">support√© par tous les navigateurs actuels</a> et consid√©r√© comme faisant partie de la <em>baseline 2023</em>.</p>
<p><b><a href="https://www.alsacreations.com/article/lire/1933-Les-import-maps-en-JavaScript.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Javascript</category>
  	<dc:date>2024-10-29T09:15:21+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Astuce : Mermaid : diagrammes, sch√©mas et graphiques dans markdown</title>
  	<link>https://www.alsacreations.com/astuce/lire/1932-Mermaid--diagrammes-schemas-et-graphiques-dans-markdown.html</link>
  	<guid>https://www.alsacreations.com/astuce/lire/1932-Mermaid--diagrammes-schemas-et-graphiques-dans-markdown.html</guid>
  	<description><![CDATA[<p>Mermaid est un langage qui permet de cr√©er des diagrammes dynamiques directement dans des fichiers Markdown c'est √† dire en mode texte.</p>

<p>Il est tr√®s utile pour repr√©senter visuellement des concepts complexes sous forme de <strong>graphiques, sch√©mas, diagrammes</strong> (comme des diagrammes de flux, des organigrammes, des graphiques Gantt, etc.) dans un format simple et lisible.</p>

<blockquote>
  <p>Un beau sch√©ma vaut mille mots de markdown.</p>
</blockquote>

<p>Mermaid s'int√®gre directement avec des plateformes et outils de documentation comme GitHub, GitLab, Docusaurus, MkDocs, ou Jekyll. Ainsi on peut inclure des diagrammes l√©gers dans des fichiers README ou des wikis sans avoir besoin de les exporter en images.... images qui seront souvent non modifiables par les autres personnes participant √† un projet car elles n'auront pas les sources tandis qu'avec Mermaid la source de l'image sera <em>dans</em> le document.</p>

<p>Le r√©sultat √©tant g√©n√©r√© √† la vol√©e en SVG (vectoriel) il s'adaptera √† la r√©solution sans difficult√© ainsi qu'√† la pr√©f√©rence de th√®me, clair ou sombre (<em>dark mode</em>).</p>

<h2>Exemples</h2>

<p>La syntaxe de mermaid est assez basique, mais efficace.</p>

<pre><code class="language-mermaid">graph TD;
    A--&gt;B;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</code></pre>

<p>La premi√®re ligne d√©finit le type de diagramme et les suivantes la logique que l'on souhaite √©crire. Remarquez qu'il n'y a pas d'instruction de positionnement de bloc, on s'attache juste √† d√©crire les relations, et la biblioth√®que JavaScript se charge du reste en transformant ce texte en un beau sch√©ma.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/full/1729061899-mermaid-resultat.png" alt="Graphique en mermaid" title="" data-img_id="3497"></p>

<p>On peut m√™me g√©n√©rer des flux Git. ü§ì</p>

<pre><code class="language-mermaid">gitGraph
    commit
    commit
    branch develop
    checkout develop
    commit
    commit
    checkout main
    merge develop
    commit
    commit
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729063609-mermaid-git.png" alt="Mermaid git" title="" data-img_id="3503"></p>

<p>Voici un diagramme de s√©quence bien complexe √† dessiner, et pourtant simple √† √©crire en texte.</p>

<pre><code class="language-mermaid">sequenceDiagram
    Gitlab-&gt;&gt;Gitlab: re√ßoit un Push sur main
    Gitlab-&gt;&gt;Runner: Lance un runner
    Runner-&gt;&gt;Serveur: Connexion SSH
    Runner-&gt;&gt;Serveur: Envoie les instructions shell du job
    Serveur--&gt;&gt;Gitlab: Connexion SSH vers Gitlab
    Serveur--&gt;&gt;Gitlab: git pull
    Gitlab--&gt;&gt;Serveur: Fichiers
    Runner-&gt;&gt;Gitlab: Retourne les logs
    Note over Runner, Serveur: Fin
</code></pre>

<p>Voici le rendu sur GitHub avec en bonus quelques boutons pour zoomer, se d√©placer, copier, etc.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729063834-mermaid-sequence-github-light.png" alt="Mermaid s√©quence sur GitHub" title="" data-img_id="3505"></p>

<h2>Avantages</h2>

<ul>
<li>C'est du texte.</li>
<li>C'est modifiable.</li>
<li>C'est versionnable.</li>
<li>C'est adapt√© aux wikis.</li>
<li>C'est multi-plateforme.</li>
<li>C'est compris par GitHub et GitLab.</li>
</ul>

<h2>Inconv√©nients</h2>

<ul>
<li>Il faut a priori conna√Ætre sa syntaxe (encore une autre...) (mais... des outils existent)</li>
</ul>

<h2>Support par GitHub et GitLab</h2>

<p>Les deux plateformes les plus r√©pandues de versionnement de code source supportent nativement Mermaid, ce qui est un grand avantage pour documenter vos projets, vos fichiers <code>README.md</code> de mani√®re compr√©hensible et remplacer de longues explications de texte par des sch√©mas limpides.</p>

<p><a href="https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams">Documentation de GitHub</a></p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729062167-mermaid-github.jpg" alt="Mermaid expliqu√© sur GitHub" title="" data-img_id="3498"></p>

<p><a href="https://docs.gitlab.com/ee/user/markdown.html#mermaid‚Äã">Documentation de GitLab</a></p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729062180-mermaid-gitlab.png" alt="Mermaid expliqu√© sur GitHub" title="" data-img_id="3499"></p>

<h2>Documentation officielle</h2>

<p>La <a href="https://mermaid.js.org/syntax/sequenceDiagram.html">documentation de Mermaid</a> est tr√®s bien con√ßue et vous permet rapidement de cerner tout ce que permet la biblioth√®que</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729062197-mermaid-doc.png" alt="Documentation de mermaid" title="" data-img_id="3500"></p>

<h2>√âditeurs en ligne</h2>

<p>Pour faciliter les op√©rations, des √©diteurs en ligne tr√®s bien con√ßus vous permettent de partir de mod√®les et de vous adapter progressivement √† la syntaxe avec un aper√ßu du r√©sultat.</p>

<ul>
<li><a href="https://mermaid.live/edit">Mermaid Live Editor</a> - gratuit, tr√®s souple, affichage plein √©cran et quelques options de mise en forme.</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729062856-mermaid-live-editor.png" alt="Mermaid Live Editor" title="" data-img_id="3501"></p>

<p>Il permet aussi le partage par URL c'est-√†-dire d'encoder le contenu dans l'adresse et de la diffuser pour retrouver le sch√©ma d'origine, par exemple pour le r√©sultat ci-dessus :</p>

<pre><code class="language-text">https://mermaid.live/edit#pako:eNo1T8tOxDAM_BUr5-4P9IDUBwcQW0A9tnuwErON2CTFSYBV0w_iO_gxslvWkqXxaGZsL0I6RaIUbyf3JSfkMFrIVQ1d_A4H2O3ukpyIc8OJPChn7e9PBmThsX_uEtSboR6ql4erHpqNaYd5mvfnShlttyC8QO0DU7qJmmXZI2ts6wI88SdFhv71aV3_z7gGJibvXWSZ9_qAQX9E8gnuh6btDiAKYYgNapXfWC6-UYSJDI2izFAhv49itGvWYQyuP1spysCRCsEuHqfbEGeFgVqNR0azkesfwYJfFw
</code></pre>

<ul>
<li><a href="https://www.mermaidchart.com/play">Mermaidchart</a> - freemium</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1729062884-mermaid-editor.png" alt="Mermaid Editor" title="" data-img_id="3502"></p>

<ul>
<li><a href="https://mermaid-ascii.art/">Mermaid ASCII</a> - projet open-source</li>
</ul>

<p>G√©n√®re des rendus en ASCII art (ou dans un Terminal).</p>

<pre><code class="language-text">$ cat test.mermaid
graph LR
A --&gt; B &amp; C
B --&gt; C &amp; D
D --&gt; C

$ mermaid-ascii --file test.mermaid
+---+     +---+     +---+
|   |     |   |     |   |
| A |----&gt;| B |----&gt;| D |
|   |     |   |     |   |
+---+     +---+     +---+
  |         |         |
  |         |         |
  |         |         |
  |         |         |
  |         v         |
  |       +---+       |
  |       |   |       |
  -------&gt;| C |&lt;-------
          |   |
          +---+
</code></pre>

<h2>Pimp my mermaid</h2>

<p>Mermaid est un projet open source, ce qui signifie qu'il est possible de l'√©tendre ou de le modifier pour des besoins sp√©cifiques si n√©cessaire.</p>

<p>Enfin, on peut avoir acc√®s √† des <a href="https://mermaid.js.org/config/theming.html">th√®mes de couleur</a></p>

<ul>
<li>par d√©faut - pour tous les diagrammes.</li>
<li>neutre - id√©al pour les documents en noir et blanc qui seront imprim√©s.</li>
<li>sombre - convient bien aux √©l√©ments de couleur sombre ou au mode sombre.</li>
<li>for√™t - avec des nuances de vert.</li>
<li>base - le seul th√®me qui peut √™tre modifi√©</li>
</ul>

<p>Bref, c'est rudement pratique, on le prend en main facilement et vous serez fiers de pouvoir documenter vos projets, wiki, issues avec de beaux sch√©mas compr√©hensibles.</p>
<p><b><a href="https://www.alsacreations.com/astuce/lire/1932-Mermaid--diagrammes-schemas-et-graphiques-dans-markdown.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Formats, encodage, XML</category>
  	<dc:date>2024-10-18T10:00:00+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : URL, URI, URN, quelles diff√©rences ?</title>
  	<link>https://www.alsacreations.com/article/lire/1930-URL-URI-URN-quelles-differences.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1930-URL-URI-URN-quelles-differences.html</guid>
  	<description><![CDATA[<p>Tout le monde conna√Æt d√©sormamis le terme "URL" pour d√©signer une adresse sur le web. Bien que certains navigateurs tentent de la simplifier au maximum dans la barre de navigation (et peut √™tre un jour de l'invisibiliser), elle rev√™t une importance capitale pour savoir o√π on est, et o√π on va.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1727560272-uri-urn-url.png" alt="URI URN URL" title="" data-img_id="3488"></p>

<p>Premi√®re chose √† savoir : URL et URN sont des sous-types d'URI.</p>

<h2>URI</h2>

<p>L'URI (<em>Uniform Resource Identifier</em>) est le terme le plus g√©n√©ral qui englobe √† la fois URL et URN : c'est une cha√Æne de caract√®res qui identifie de mani√®re unique une ressource. Cela peut se faire par l'emplacement de la ressource, son nom, ou les deux.</p>

<p>Un chemin de fichier local pourrait donner une bonne id√©e d'URI :</p>

<pre><code class="language-text">file:///C:/Documents/Dossier/image.png
</code></pre>

<p>Dans cet exemple :</p>

<ul>
<li>Le sch√©ma est <code>file</code> (on comprend donc que la ressource est locale).</li>
<li>Le s√©parateur <code>://</code> (que l'on retrouve √©galement dans les URLs) distingue le sch√©ma de l'adresse, c'est une convention admise partout, mais ici nous sommes dans un cas particulier : en g√©n√©ral les <code>//</code> pr√©c√®dent un nom d'h√¥te, nom de domaine, adresse IP or ici nous sommes en local donc il n'y en a pas, c'est pourquoi on peut voir directement trois <em>slash</em> √† la suite <code>///</code>.</li>
<li>L'adresse (locale) vers la ressource est donc <code>/C:/Users/Utilisateur/Documents/monfichier.txt</code> c'est-√†-dire √† peu pr√®s un chemin que vous pouvez √©crire de mani√®re traditionnelle sur un syst√®me d'exploitation Windows.</li>
</ul>

<h2>URN</h2>

<p>L'URN (<em>Uniform Resource Name</em>) est un type d'URI, identifiant une ressource par son nom dans un <em>espace de noms</em> particulier. Ici on ne sp√©cifie pas comment acc√©der √† la ressource (pas de protocole par exemple) mais seulement son identit√©, qui en th√©orie devrait √™tre unique et persistante, ind√©pendemment d'un endroit de stockage (contrairement √† une URL).</p>

<p>Par exemple un num√©ro d'ISBN (<em>International Standard Book Number</em>) qui identifie de mani√®re unique un livre peut √™tre √©crite sous forme d'URN.</p>

<pre><code class="language-text">urn:isbn:978-2-212-67683-9
</code></pre>

<p>On peut √©galement √©crire un num√©ro de t√©l√©phone.</p>

<pre><code class="language-text">urn:tel:+33123456789
</code></pre>

<p>Ou encore un UUID (<em>Universally Unique IDentifier</em>) qui est tr√®s utilis√© en d√©veloppement, ou pour donner des identifiants √† des ressources mat√©rielles.</p>

<pre><code class="language-text">urn:uuid:123e4567-e89b-12d3-a456-426614174000
</code></pre>

<p>Dans ces exemples</p>

<ul>
<li>Les s√©parateurs sont des <code>:</code></li>
<li>On pr√©fixe par <code>urn</code></li>
<li>On ajoute le protocole/sch√©ma.</li>
<li>On termine par l'identifiant de la ressource.</li>
</ul>

<h2>URL</h2>

<p>L'URL quant √† elle sert √©videmment d'adresse pour chaque page web, fichier quelconque sur Internet et plus particuli√®rement sur le web m√™me si ce n'est pas le seul protocole qui l'exploite.</p>

<p>Par exemple on peut √©crire une URL pour une adresse FTP (<em>File Transfer Protocol</em>) - qui d'ailleurs √† une √©poque pouvait √™tre reconnue et exploit√©e par la plupart des navigateurs :</p>

<pre><code class="language-text">ftp://login:password@ftp.schnapsgpt.com:21/dossier/image.png
</code></pre>

<p>On reconna√Æt les m√™mes principes que pr√©c√©demment avec le sch√©ma (protocole), les s√©pararateurs divers <code>:</code>, <code>@</code>, <code>/</code> et l'ajout ici d'informations d'identifications pour acc√©der √† la ressource <code>login:password</code> ainsi que le port <code>21</code>.</p>

<p>Dans le cas d'une URL pour le web, nous retrouverons le protocole <code>http</code> ou <code>https</code> (s√©curis√© d'une certaine fa√ßon).</p>

<pre><code class="language-text">https://www.alsacreations.com/article/lire/1930-URL-URI-URN-quelles-differences.html
</code></pre>

<p>Ces adresses apportent des avantages :</p>

<ul>
<li>Elles refl√®tent souvent la structure hi√©rarchique d'un site web pour comprendre l'organisation du contenu (si on a bien fait le travail de structuration).</li>
<li>Elles permettent le partage par lien, universel entre des milliers d'applications, m√™me sur mobile.</li>
<li>Elles permettent d'identifier la source d'une information par le nom de domaine... sauf si des personnes fourbes r√©servent un nom avec des caract√®res internationaux/Unicode tr√®s similaires, soit une attaque homographe pour faire pointer vers un autre site non moins fourbe.</li>
</ul>

<p>En bonus, de belles URLs sont exploit√©es par les robots des moteurs de recherche (coucou Googlebot) pour mieux comprendre et indexer les pages web: bien pens√©es elles peuvent am√©liorer le r√©f√©rencement d'un site.</p>

<h3>D'o√π vient l'URL ?</h3>

<p>L'invention de l'URL est attribu√©e √† Tim Berners-Lee (encore lui !) l'inventeur de bien des composants essentiels du web : HTML, le premier navigateur, le premier serveur (pour lui r√©pondre), et le protocole HTTP. Rien que √ßa.</p>

<p>Cet adressage date donc des ann√©es 1990 lorsque Tim d√©veloppait ses projets au CERN √† Gen√®ve. Il souhaitait pouvoir fournir un adressage des documents et autres ressources sur le r√©seau informatique qu'il √©tait en train de cr√©er. Au fur et √† mesure, le concept a √©t√© am√©lior√© par l'IETF (<em>Internet Engineering Task Force</em>).</p>

<h2>En savoir bien plus</h2>

<p>√âcoutez l'√©pisode <a href="https://cpu.dascritch.net/post/2023/10/05/Ex0213-Diss%C3%A9quons-une-URL%2C-premi%C3%A8re-partie">Diss√©quons une URL, premi√®re partie</a> de l'excellent Carr√©, Petit, Utile : Le programme radio des gens du num√©rique.</p>

<p>L'URL est un standard d√©crit par la <a href="https://www.rfc-editor.org/rfc/rfc1738">RFC 1738</a>, pr√©cis√©e dans le cas des liens <em>mailto</em> par la <a href="https://www.rfc-editor.org/rfc/rfc2368">RFC 2368</a>... compl√©t√©e par la <a href="https://www.rfc-editor.org/rfc/rfc2396">RFC 2396</a> sur les URI, puis par la <a href="https://www.rfc-editor.org/rfc/rfc3986">RFC 3986</a> l'√©largissant encore plus aux URI, ainsi que la <a href="https://www.rfc-editor.org/rfc/rfc8089">RFC 8089</a> sur les noms locaux de fichiers, et ainsi de suite.</p>
<p><b><a href="https://www.alsacreations.com/article/lire/1930-URL-URI-URN-quelles-differences.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Web</category>
  	<dc:date>2024-10-09T10:16:20+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Tutoriel : IA : Interroger un LLM en JavaScript avec Ollama</title>
  	<link>https://www.alsacreations.com/tuto/lire/1931-IA--Interroger-un-LLM-en-JavaScript-avec-Ollama.html</link>
  	<guid>https://www.alsacreations.com/tuto/lire/1931-IA--Interroger-un-LLM-en-JavaScript-avec-Ollama.html</guid>
  	<description><![CDATA[<p>Nous n'avons pas fini d'entendre parler de les LLM (grands mod√®les de langages) et de l'Intelligence Artificielle. Outre les syt√®mes en ligne (souvent payants) il est possible d'interroger un mod√®le local (gratuitement) par l'interm√©diaire d'un peu de JavaScript.</p>

<p>Pour ceci nous utiliserons :</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1727733655-ollama-web.png" alt="Ollama" title="" data-img_id="3493"></p>

<ul>
<li><a href="https://ollama.com/">Ollama</a> qui permet de t√©l√©charger <a href="https://ollama.com/models">des mod√®les</a> au choix</li>
<li>Un des mod√®les propos√©s, par exemple <em>llama</em> de Meta</li>
<li>La <a href="https://www.npmjs.com/package/ollama">biblioth√®que JavaScript Ollama</a> (package npm)</li>
</ul>

<h2>Ollama</h2>

<p><a href="https://ollama.com/">Ollama</a> est une application disponible pour Linux, macOS, Windows qui sert d'interface de gestion de LLM. Voyons la comme une sorte de Docker qui ira piocher dans un catalogue d'images disponibles en ligne, faciles √† t√©l√©charger et √† ex√©cuter en une seule instruction ou presque en pr√©cisant bien le nom du mod√®le souhait√©.</p>

<p>Les commandes essentielles apr√®s avoir t√©l√©charg√© et install√© Ollama :</p>

<ul>
<li><code>ollama list</code> liste les mod√®les d√©j√† t√©l√©charg√©s</li>
<li><code>ollama pull &lt;mod√®le&gt;</code> t√©l√©charge un nouveau LLM</li>
<li><code>ollama run &lt;mod√®le&gt;</code> ex√©cute</li>
<li><code>ollama stop &lt;mod√®le&gt;</code> met fin √† l'ex√©cution</li>
<li><code>ollama rm &lt;mod√®le&gt;</code> supprime</li>
</ul>

<p>Pour l'occasion, nous utiliserons llama 3.2</p>

<pre><code class="language-sh">ollama pull llama3.2
</code></pre>

<p>Pour pr√©ciser une autre version du mod√®le avec nombre de param√®tres (comprenez complexit√© et poids) diff√©rent, on pourra par exemple indiquer <code>ollama pull llama3.2:1b</code> pour <em>1B</em> soit un milliard de param√®tres.</p>

<p>Jusque-l√† si tout va bien, nous pouvons d'ores et d√©j√† discuter en mode texte brut par un <code>ollama run llama3.2</code>.</p>

<h2>Package JavaScript Ollama</h2>

<p>Cette biblioth√®que nous permet d'aller interroger Ollama install√© localement en d√©finissant le mod√®le, le message √† lui envoyer et en traitant la r√©ponse. De mani√®re tr√®s basique on peut se servir de console.log mais ce n'est pas tr√®s int√©ressant car bloquant jusqu'√† obtenir la totalit√© de la r√©ponse ; la promptitude du mod√®le d√©pendra aussi de la puissance de votre machine et de votre m√©moire vive disponible.</p>

<p>√Ä l'aide d'un environnement Node.js (d√©j√† install√© n'est-ce pas ?), nous pouvons poursuivre.</p>

<ol>
<li><p>Cr√©er un dossier quelconque üìÅ pour notre projet.</p></li>
<li><p>Installer la d√©pendnace avec <code>npm install --save ollama</code> (ou avec <a href="/article/lire/1907-Les-gestionnaires-de-paquets-pour-Node--npm-yarn-pnpm.html">pnpm</a>)</p></li>
</ol>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1727729563-npm-install-ollama.png" alt="npm install ollama" title="" data-img_id="3490"></p>

<ol start="3">
<li>√âcrire un petit script <code>kiwi.mjs</code> pour importer <code>ollama</code> et appeler <code>chat()</code> afin de lancer la discussion</li>
</ol>

<pre><code class="language-js">import ollama from 'ollama'

const response = await ollama.chat({
  model: 'llama3.2',
  messages: [{ role: 'user', content: 'Quelle est la recette du cake au kiwi ?' }],
})
// ‚ö†Ô∏è Ceci peut prendre beaucoup de temps car on attend la r√©ponse compl√®te
console.log(response.message.content)
</code></pre>

<p>Il suffira de l'ex√©cuter en ligne de commande avec <code>node kiwi.mjs</code>.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1727729579-node-ollama.png" alt="Ex√©cution d'ollama dans le terminal" title="" data-img_id="3491"></p>

<p>Pour <em>streamer</em> la r√©ponse, c'est-√†-dire la restituer au fur et √† mesure de l'ajout de mots par le LLM, on peut se servir de l'alternative en activant l'option <em>stream</em>.</p>

<pre><code class="language-js">import ollama from 'ollama'

const message = { role: 'user', content: 'Quelle est la recette du cake au kiwi ?' }
const response = await ollama.chat({ model: 'llama3.2', messages: [message], stream: true })
for await (const part of response) {
  process.stdout.write(part.message.content)
}
</code></pre>

<p>Un bon nombre d'autres param√®tres et m√©thodes existent dans cette interface, il suffira de consulter la <a href="https://www.npmjs.com/package/ollama">documentation</a> pour les d√©couvrir.</p>

<h2>Et en application web ?</h2>

<p>C'est possible ! Une page interrogera le mod√®le via ollama :</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1727733164-oolama-js.png" alt="Architecture d'application web utilisant l'IA" title="" data-img_id="3492"></p>

<p>Pour transformer le tout en une petite application web utilisable dans le navigateur...</p>

<ol>
<li>Nous ajoutons <code>express</code></li>
</ol>

<pre><code class="language-sh">npm install --save express
</code></pre>

<p>Ce qui va permettre de construire un couple client/serveur minimaliste avec deux fichiers :</p>

<ul>
<li>server.mjs, qui sera √† l'√©coute des messages</li>
<li>public/index.html, qui contiendra un formulaire et affichera le r√©sultat</li>
</ul>

<p>Les explications sont fournies par des commentaires dans le code source suivant, √† vous de jouer en vous l'appropriant.</p>

<ol start="2">
<li>Fichier <code>server.mjs</code></li>
</ol>

<pre><code class="language-js">import express from 'express';
import ollama from 'ollama';

const app = express(); // Instance d'Express
const port = 3000; // Port √† l'√©coute

app.use(express.json());

// On sert le dossier public en statique, dans lequel on place notre page index.html
app.use(express.static('public'));

// On accepte les requ√™tes POST vers /chat
app.post('/chat', async (req, res) =&gt; {
  // Notre message sera envoy√© dans le corps de la requ√™te (body)
  const message = { role: 'user', content: req.body.content };

  // La r√©ponse provenant du LLM est une promesse
  const response = await ollama.chat({ model: 'llama3.2', messages: [message], stream: true });

  // La r√©ponse envoy√©e √† la page web dispose d'en-t√™tes HTTP
  // ... permettant de faire persister la connexion
  res.writeHead(200, {
    'Content-Type': 'text/event-stream',
    'Cache-Control': 'no-cache',
    'Connection': 'keep-alive'
  });

  // Pour toute portion de r√©ponse re√ßue, on la stream
  for await (const part of response) {
    res.write(`data: ${JSON.stringify(part.message)}\n\n`);
  }

  res.end();
});

// On √©coute sur le port configur√©
app.listen(port, () =&gt; {
  console.log(`Serveur en √©coute : http://localhost:${port}`);
});
</code></pre>

<ol start="3">
<li>Page <code>public/index.html</code> correspondante :</li>
</ol>

<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang="fr"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;KiwIA&lt;/title&gt;
    &lt;style&gt;
    /* √† personnaliser selon vos envies */
    body { font-family: system-ui; background: #222; color: #fff; padding: 2rem; }
    #chat, [type=submit] { padding: 1rem; border-radius: 0.5rem; border: 1px solid #ccc; margin: 1rem 0; background: inherit; color: inherit; }
    #chat { min-width: 20rem; font-size: inherit; }
    #reponse { text-align: left; line-height: 2; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Chat KiwIA ü•ù&lt;/h1&gt;

&lt;form&gt;
    &lt;input type="text" id="chat" placeholder="Votre message..."&gt;
    &lt;button type="submit"&gt;Envoyer&lt;/button&gt;
&lt;/form&gt;
&lt;div id="reponse"&gt;&lt;/div&gt;

&lt;script&gt;
    const form = document.querySelector('form');
    const input = document.querySelector('#chat');
    const resultat = document.querySelector('#reponse');

    // √Ä la validation du formulaire
    form.addEventListener('submit', async (e) =&gt; {
        e.preventDefault();

        // On r√©cup√®re le contenu du message
        const content = input.value.trim();
        if (!content) return; // Si c'est vide on arr√™te l√†

        // Petit message d'attente
        resultat.textContent = 'Un instant et je suis √† vous...';
        // On vide le champ d'entr√©e
        input.value = '';

        try {
            // Requ√™te asynchrone en POST vers /chat
            const response = await fetch('/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                // Corps de la requ√™te en JSON
                body: JSON.stringify({ content }),
            });

            resultat.textContent = '';

            // On instancie une interface ReadableStream
            const reader = response.body.getReader();
            const decoder = new TextDecoder();

            // Tant qu'on a du contenu...
            while (true) {
                const { done, value } = await reader.read(); // On lit
                if (done) break;

                const lines = decoder.decode(value).split('\n');

                // On it√®re sur la r√©ponse re√ßue pour alimenter le r√©sultat
                for (const line of lines) {
                    if (line.startsWith('data: ')) {
                        const data = JSON.parse(line.slice(6));
                        resultat.textContent += data.content;
                    }
                }
            }
        } catch (error) {
            console.error('Error:', error);
            resultat.textContent = 'Une erreur est survenue.';
        }
    });
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<ol start="4">
<li>On lance le tout gr√¢ce √† <code>node server.mjs</code> et on consulte l'adresse indiqu√©e dans le navigateur pour atteindre la page HTML qui affiche le formulaire.</li>
</ol>

<p style="text-align: center"><video src="https://www.alsacreations.com/xmedia/tuto/movies/ollama-kiwia.mp4" loop autoplay controls muted></p>

<p>On peut perfectionner le rendu en mettant en page le message renvoy√© sous forme de markdown (mais cela d√©pend du mod√®le interrog√©) plut√¥t que de l'afficher en texte brut.</p>

<h2>Perspectives</h2>

<p>On peut voir que construire une application web sollicitant un LLM est tout √† fait envisageable avec les technologies d'aujourd'hui et les standards d√©j√† en place (HTML/CSS, JavaScript, fetch, <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream">Streams API</a>, etc). √Ä partir de l√† tout est possible pour imaginer √©laborer des interfaces qui vont dialoguer en texte clair ou par d'autres moyens plus subtiles, et r√©agir en cons√©quence. Vous pouvez aussi <em>briefer</em> votre LLM en amont et lui donner des instructions ou un contexte de r√©ponse, voire en construire un nouveau (avec l'instruction <a href="https://github.com/ollama/ollama/blob/main/docs/modelfile.md">FROM de Ollama</a>).</p>

<p>Pour pousser l'horizon encore plus loin, faire tourner des LLM dans le navigateur lui-m√™me est possible gr√¢ce √† WebGPU (voir une d√©mo ici : <a href="https://huggingface.co/spaces/cfahlgren1/Qwen-2.5-WebLLM">Qwen-2.5 on WebGPU sur Huggingface</a>) avec une performance tout √† fait honorable.</p>

<p>Les concepteurs de navigateurs pr√©parent des interfaces ais√©es d'acc√®s en JavaScript pour interroger un mod√®le local, tels que Google avec <a href="https://developer.chrome.com/docs/ai/built-in?hl=fr">l'IA Gemini int√©gr√©e dans Chrome</a>. Nous n'avons pas fini d'en entendre parler.</p>
<p><b><a href="https://www.alsacreations.com/tuto/lire/1931-IA--Interroger-un-LLM-en-JavaScript-avec-Ollama.html">Retrouvez l'int√©gralit√© de ce tutoriel en ligne sur Alsacreations.com</a></b></p>]]></description>
  	<category>Javascript</category>
  	<dc:date>2024-10-02T09:30:35+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Tutoriel : Tout savoir sur les variables CSS (custom properties)</title>
  	<link>https://www.alsacreations.com/tuto/lire/1929-Tout-savoir-sur-les-variables-CSS-custom-properties.html</link>
  	<guid>https://www.alsacreations.com/tuto/lire/1929-Tout-savoir-sur-les-variables-CSS-custom-properties.html</guid>
  	<description><![CDATA[<p>Les <strong>variables CSS</strong> ont r√©volutionn√© la mani√®re de g√©rer les styles dans le d√©veloppement web.</p>

<p>Si vous en avez assez de r√©p√©ter les m√™mes valeurs CSS partout dans votre code, alors cet article est fait pour vous !</p>

<p>Vous allez d√©couvrir ici comment les utiliser efficacement, pourquoi elles sont si pratiques et comment elles se comparent aux solutions comme Sass et LESS.</p>

<p>Allons-y !</p>

<h2>Qu'est-ce qu'une variable CSS ?</h2>

<p>Une <strong>variable CSS</strong> (aussi appel√©e "propri√©t√© personnalis√©e") est un moyen de stocker des valeurs r√©utilisables dans votre feuille de style.</p>

<p>Imaginez-la comme une bo√Æte o√π vous pouvez ranger une couleur, une taille de police ou n'importe quelle autre valeur CSS, puis la r√©utiliser o√π vous le souhaitez.</p>

<h2>Comment d√©clarer et utiliser des variables CSS ?</h2>

<h3>D√©clarer une variable CSS</h3>

<p>Les <strong>variables CSS</strong> sont g√©n√©ralement d√©finies au sein du s√©lecteur <code>:root</code>.</p>

<p>Ce s√©lecteur repr√©sente le niveau le plus √©lev√© de votre document et les variables ainsi d√©finies seront accessibles partout dans votre fichier CSS.</p>

<pre><code class="language-css">:root { 
  --main-color: #3498db;
  --font-size: 16px;
}
</code></pre>

<p>Dans cet exemple, deux variables sont cr√©√©es : <code>--main-color</code> et <code>--font-size</code>.</p>

<p>Elles sont d√©finies respectivement avec une couleur et une taille de police.</p>

<h3>Utiliser une variable CSS</h3>

<p>Pour utiliser une variable, vous devez appeler la fonction <code>var()</code>.</p>

<p>Celle-ci prend le nom de la variable en argument et l'injecte dans les propri√©t√©s CSS que vous souhaitez modifier.</p>

<pre><code class="language-css">body {
  background-color: var(--main-color);
  font-size: var(--font-size);
}
</code></pre>

<p>Ici, <code>var(--main-color)</code> applique la couleur principale d√©finie √† l'arri√®re-plan du body, tandis que <code>var(--font-size)</code> ajuste la taille du texte.</p>

<h3>Variables CSS avec des valeurs de secours</h3>

<p>Vous pouvez √©galement fournir une valeur de secours (fallback) √† une variable CSS.</p>

<p>C'est utile au cas o√π la variable ne serait pas d√©finie ou si le navigateur ne la supportait pas.</p>

<pre><code class="language-css">body {
  color: var(--text-color, #333);
}
</code></pre>

<p>Dans cet exemple, si la variable <code>--text-color</code> n'est pas d√©finie, la couleur par d√©faut <code>#333</code> sera appliqu√©e.</p>

<h3>R√©utilisation dans diff√©rents √©l√©ments</h3>

<p>Les <strong>variables CSS</strong> peuvent √™tre r√©utilis√©es sur plusieurs √©l√©ments.</p>

<pre><code class="language-css">h1 {
  color: var(--main-color);
}

p {
  border-color: var(--main-color);
}
</code></pre>

<p>En utilisant la m√™me variable sur diff√©rents √©l√©ments (comme <code>h1</code> et <code>p</code>), vous assurez une coh√©rence visuelle tout en simplifiant les modifications futures.</p>

<p>Nous reviendrons justement sur les raisons d'utiliser les variables CSS dans la section suivante.</p>

<h3>Modifier une variable CSS pour des sections pr√©cises</h3>

<p>L'un des aspects les plus puissants des <strong>variables CSS</strong> est qu'elles peuvent √™tre red√©finies localement pour des sections sp√©cifiques de votre page.</p>

<p>Vous n'√™tes pas limit√© √† une seule valeur globale.</p>

<p>Par exemple, si vous souhaitez changer la couleur principale dans une certaine section de votre site, vous pouvez le faire en red√©finissant la variable uniquement pour cette partie.</p>

<pre><code class="language-css">.section-1 { 
  --main-color: #d32f2c;
}

.section-2 { 
  --main-color: #3fcef2; 
}
</code></pre>

<p>Ensuite, dans vos styles, vous utilisez toujours <code>var(--main-color)</code> comme d'habitude, mais la valeur s'adaptera en fonction de la section o√π elle est utilis√©e :</p>

<pre><code class="language-css">.section-1 h1 { 
  color: var(--main-color); /* Couleur rouge */
}

.section-2 h1 {
  color: var(--main-color); /* Couleur cyan */ 
}
</code></pre>

<p>Gr√¢ce √† cette flexibilit√©, vous pouvez facilement adapter le design de diff√©rentes sections de votre page sans devoir r√©√©crire tout votre code CSS.</p>

<h2>Pourquoi utiliser les variables CSS ?</h2>

<p>Maintenant que vous savez comment <strong>cr√©er et utiliser les variables CSS</strong>, vous en voyez tout le potentiel et la puissance.</p>

<p>Je tiens toutefois √† souligner pourquoi, selon moi, elles sont indispensables dans la cr√©ation de styles CSS.</p>

<h3>Centralisation des styles</h3>

<p>Plut√¥t que de r√©p√©ter les m√™mes valeurs partout dans votre code, les <strong>variables CSS</strong> vous permettent de centraliser des √©l√©ments r√©currents comme les couleurs, les polices ou les espacements.</p>

<p>Ainsi, si vous devez modifier une valeur, vous n'avez qu'√† la changer √† un seul endroit, et l'ensemble de votre site sera mis √† jour.</p>

<p>Un vrai gain de temps, surtout pour les projets de grande envergure.</p>

<h3>Faciliter la maintenance</h3>

<p>Les variables CSS am√©liorent consid√©rablement la lisibilit√© et la maintenance de votre code.</p>

<p>Par exemple, au lieu de chercher chaque occurrence d'une couleur pour la changer, vous modifiez simplement la valeur de la variable.</p>

<p>C'est √©galement tr√®s pratique si vous travaillez en √©quipe : chacun peut rapidement comprendre et ajuster les styles sans risquer d'oublier une valeur cach√©e quelque part dans le CSS.</p>

<h3>Th√©matisation simplifi√©e</h3>

<p>Si vous souhaitez proposer plusieurs th√®mes de couleur ou de design pour un site, les <strong>variables CSS</strong> sont parfaites pour cela.</p>

<p>Vous pouvez d√©clarer diff√©rentes valeurs pour vos variables en fonction du th√®me s√©lectionn√©, et tout bascule automatiquement sans effort suppl√©mentaire, ouvrant ainsi la porte √† des interfaces utilisateur facilement personnalisables.</p>

<p>J'aborderai ce sujet plus en profondeur un peu plus loin dans l'article.</p>

<h3>Compatibilit√© et flexibilit√©</h3>

<p>Les variables CSS sont compatibles avec la plupart des navigateurs modernes, ce qui signifie que vous pouvez les utiliser d√®s maintenant dans vos projets sans vous soucier des probl√®mes de compatibilit√©.</p>

<p>Les <strong>variables CSS</strong> sont un atout majeur pour tout d√©veloppeur souhaitant optimiser son flux de travail, r√©duire les erreurs et cr√©er des designs √©volutifs.</p>

<p>Elles apportent une r√©ponse simple et √©l√©gante √† la complexit√© croissante des feuilles de style dans les projets modernes.</p>

<h2>Variables CSS et pr√©processeurs (Sass, LESS) (Comparaison)</h2>

<p>Les <strong>variables CSS</strong> et les pr√©processeurs comme <strong>Sass</strong> et <strong>LESS</strong> permettent tous deux de g√©rer des valeurs r√©utilisables dans vos styles, mais ils pr√©sentent des diff√©rences majeures.</p>

<h3>Support natif vs compilation</h3>

<p>Les <strong>variables CSS</strong> sont directement comprises par les navigateurs modernes.</p>

<p>Pas besoin de compiler quoi que ce soit : vous les d√©clarez dans votre CSS et elles fonctionnent imm√©diatement.</p>

<p>En revanche, avec <strong>Sass</strong> et <strong>LESS</strong>, il faut compiler le code pour obtenir un fichier CSS utilisable.</p>

<h3>Flexibilit√© en temps r√©el</h3>

<p>Les <strong>variables CSS</strong> peuvent √©galement √™tre modifi√©es en temps r√©el, par exemple via JavaScript, ce qui les rend parfaites pour des th√®mes dynamiques ou des interactions utilisateur.</p>

<pre><code class="language-javascript">document.documentElement.style.setProperty('--primary-color', '#e74c3c');
</code></pre>

<p>En comparaison, avec Sass et LESS, les variables sont statiques : une fois le code compil√©, vous ne pouvez plus modifier ces valeurs sans recompiler les fichiers.</p>

<h3>Quand utiliser les variables CSS ou un pr√©processeur</h3>

<p>Je vous conseille d'utiliser uniquement un <strong>fichier CSS avec des variables CSS pour des pages statiques ou de petite envergure</strong>, car elles suffisent amplement dans ces cas-l√†.</p>

<p>Mais pour des <strong>projets plus vastes et structur√©s</strong>, l'utilisation d'un <strong>pr√©processeur reste souvent plus int√©ressante</strong>.</p>

<p>Heureusement, il est possible de <strong>combiner les deux approches</strong> en utilisant des <strong>variables CSS</strong> au sein m√™me de vos fichiers <strong>Sass</strong> ou <strong>LESS</strong>, ce qui permet de profiter du meilleur des deux mondes : <strong>la flexibilit√© des variables CSS et la puissance des pr√©processeurs</strong>.</p>

<h2>Gestion des th√®mes avec les variables CSS</h2>

<p>Que vous souhaitiez impl√©menter un <strong>mode clair</strong> et un <strong>mode sombre</strong>, ou bien proposer plusieurs variations de couleurs, les <strong>variables CSS</strong> vous permettent de g√©rer cela efficacement sans r√©√©crire l'int√©gralit√© de votre feuille de style.</p>

<h3>D√©claration des variables globales</h3>

<p>Tout commence par la d√©claration de vos variables globales dans le s√©lecteur <code>:root</code>.</p>

<pre><code class="language-css">:root {
  --primary-color: #3498db;
  --background-color: #ffffff;
  --text-color: #333333;
}
</code></pre>

<p>Ces variables peuvent ensuite √™tre utilis√©es dans vos styles r√©guliers.</p>

<pre><code class="language-css">body {
  background-color: var(--background-color);
  color: var(--text-color);
}

button {
  background-color: var(--primary-color);
}
</code></pre>

<h3>Changer de th√®me via la red√©finition des variables</h3>

<p>Pour appliquer un th√®me alternatif, comme un mode sombre, il suffit de red√©finir les valeurs des variables CSS dans une classe sp√©cifique, par exemple .dark-theme.</p>

<pre><code class="language-css">.dark-theme {
  --primary-color: #e74c3c;
  --background-color: #2c3e50;
  --text-color: #ecf0f1;
}
</code></pre>

<p>Ensuite, vous pouvez appliquer cette classe au niveau du <code>body</code> ou d'une autre balise englobante dans votre HTML, et tous les styles qui utilisent ces variables seront mis √† jour automatiquement, sans avoir √† dupliquer votre code CSS.</p>

<pre><code class="language-css">body.dark-theme {
  background-color: var(--background-color);
  color: var(--text-color);
}
</code></pre>

<h3>Gestion multi-th√®mes facile</h3>

<p>Vous pouvez cr√©er autant de th√®mes que n√©cessaire, en modifiant simplement les valeurs de ces <strong>variables CSS</strong> pour chaque classe de th√®me.</p>

<p>Par exemple, si vous souhaitez ajouter un th√®me clair, vous d√©finissez simplement une autre classe avec des valeurs diff√©rentes :</p>

<pre><code class="language-css">.light-theme {
  --primary-color: #3498db;
  --background-color: #ffffff;
  --text-color: #333333;
}
</code></pre>

<p>Cela vous permet de basculer entre plusieurs th√®mes tr√®s facilement, uniquement en changeant la classe appliqu√©e sur l'√©l√©ment racine.</p>

<p>Pour aller plus loin dans la gestion des th√®mes, vous pouvez consulter cet article sur <a href="https://www.alsacreations.com/article/lire/1927-Les-modes-d-apparence-Light-mode-et-Dark-mode.html">les modes d'apparence Light mode et Dark mode</a>.</p>

<h2>Bonnes pratiques pour l'utilisation des variables CSS</h2>

<p>L'utilisation des <strong>variables CSS</strong> est un excellent moyen de rendre votre code plus propre, maintenable et flexible.</p>

<p>Toutefois, pour en tirer le meilleur parti, il est essentiel de suivre quelques bonnes pratiques.</p>

<p>Voici quelques <strong>conseils pour utiliser les variables CSS</strong> de mani√®re optimale.</p>

<h3>D√©clarez vos variables dans <code>:root</code></h3>

<p>Comme mentionn√© pr√©c√©demment, pour maximiser la port√©e de vos variables, il est conseill√© de les d√©clarer dans le s√©lecteur <code>:root</code>.</p>

<p>Ainsi, elles seront accessibles dans tout le document et pourront √™tre r√©utilis√©es partout.</p>

<pre><code class="language-css">:root {
  --primary-color: #3498db;
  --font-size-base: 16px;
}
</code></pre>

<h3>Utilisez des noms de variables explicites</h3>

<p>Choisir des noms de variables clairs et explicites est essentiel pour rendre votre code facile √† comprendre et √† maintenir.</p>

<p>Par exemple, pr√©f√©rez <code>--primary-color</code> plut√¥t que <code>--color1</code>, ce qui permet √† quiconque lit votre code de comprendre imm√©diatement √† quoi correspond la variable.</p>

<pre><code class="language-css">:root {
  --primary-color: #3498db;
  --secondary-color: #2ecc71;
  --font-size-large: 24px;
}
</code></pre>

<p>Des noms explicites facilitent √©galement les ajustements futurs.</p>

<h3>Utilisez des variables pour les valeurs r√©p√©titives</h3>

<p>Les <strong>variables CSS sont particuli√®rement utiles pour les valeurs que vous utilisez fr√©quemment</strong>, comme les couleurs, les tailles de police, ou les espacements.</p>

<pre><code class="language-css">:root {
  --spacing-unit: 16px;
}

.container {
  padding: var(--spacing-unit);
}

.card {
  margin-bottom: var(--spacing-unit);
}
</code></pre>

<h3>Regroupez vos variables par type</h3>

<p>Pour une meilleure organisation, regroupez vos variables par type, comme les couleurs, les tailles de police ou les espacements. Cela vous permettra de structurer votre fichier CSS de mani√®re plus lisible et d'y revenir plus facilement pour faire des modifications.</p>

<pre><code class="language-css">:root {
  /* Couleurs */
  --primary-color: #3498db;
  --secondary-color: #2ecc71;

  /* Tailles de police */
  --font-size-base: 16px;
  --font-size-large: 24px;

  /* Espacements */
  --spacing-small: 8px;
  --spacing-medium: 16px;
  --spacing-large: 32px;
}
</code></pre>

<h3>Pr√©parez des valeurs de secours</h3>

<p>Il est toujours recommand√© de fournir une valeur de secours dans vos d√©clarations <code>var()</code>, surtout si vous travaillez avec des <strong>variables CSS qui pourraient ne pas √™tre d√©finies dans certains contextes</strong>.</p>

<pre><code class="language-css">button {
  background-color: var(--primary-color, #3498db);
}
</code></pre>

<p>Dans cet exemple, si <code>--primary-color</code> n'est pas d√©finie, la valeur <code>#3498db</code> sera utilis√©e √† la place.</p>

<h3>Limitez l'utilisation excessive de variables</h3>

<p>Bien que les <strong>variables CSS</strong> soient tr√®s utiles, il est <strong>important de ne pas en abuser</strong>.</p>

<p>√âvitez de cr√©er une variable pour chaque petite valeur.</p>

<p>Concentrez-vous sur les √©l√©ments qui sont susceptibles de changer ou qui sont utilis√©s fr√©quemment √† travers votre code.</p>

<p>Trop de variables peuvent rendre votre <strong>fichier CSS difficile √† g√©rer</strong>.</p>

<h2>Conclusion</h2>

<p>Les <strong>variables CSS</strong> ont v√©ritablement transform√© la mani√®re de g√©rer les styles dans le d√©veloppement web moderne.</p>

<p>Elles apportent une flexibilit√© et une simplicit√© in√©gal√©es, permettant de centraliser et de modifier des valeurs globales sans dupliquer le code.</p>

<p>Que ce soit pour la gestion des couleurs, des tailles de police, ou m√™me pour des th√®mes dynamiques, elles offrent un moyen puissant de rendre votre CSS plus maintenable.</p>
<p><b><a href="https://www.alsacreations.com/tuto/lire/1929-Tout-savoir-sur-les-variables-CSS-custom-properties.html">Retrouvez l'int√©gralit√© de ce tutoriel en ligne sur Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2024-09-27T13:37:51+01:00</dc:date>
  	<dc:creator>ceddevwp</dc:creator>
	</item>

  
	<item>
  	<title>Article : Les carrousels (slider) sont&#45;ils vraiment utiles ?</title>
  	<link>https://www.alsacreations.com/article/lire/1928-Les-carrousels-slider-sont-ils-vraiment-utiles.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1928-Les-carrousels-slider-sont-ils-vraiment-utiles.html</guid>
  	<description><![CDATA[<p>Ah les carrousels‚Ä¶ Fonctionnalit√© souvent demand√©e par les clients, car c‚Äôest dynamique, √ßa bouge, c‚Äôest fun etc. Mais en avez-vous r√©ellement besoin pour votre site ?</p>

<figure>
  <video controls src="https://www.alsacreations.com/xmedia/tuto/carrousel/carrousel-cookies.mp4">
  <figcaption>D√©filement d'un carrousel √† 3 slides avec des images de cookies.</figcaption>
</figure>

<h2>Un carrousel, c‚Äôest quoi ?</h2>

<p>De mani√®re g√©n√©rale, la plupart des carrousels contiennent plusieurs diapositives (avec des images, vid√©os ou autre) qui d√©filent lorsqu‚Äôon clique sur une fl√®che de navigation ou une pagination.</p>

<p>Cela permet aux utilisateurs et utilisatrices de maximiser la densit√© de l'information sans avoir √† faire d√©filer les pages. Pratique non ? Oui, mais‚Ä¶ Des √©tudes ont montr√© que la plupart des personnes ont tendance √† ignorer les carrousels. Nous allons voir pourquoi.</p>

<h2>Les carrousels sont tr√®s peu utilis√©s</h2>

<p>Selon les recherches d'<a href="https://erikrunyon.com/">Erik Runyon</a>, directeur technique des communications marketing √† l'Universit√© de Notre Dame, les carrousels affichent un taux de clic relativement faible. En ayant fait l‚Äô√©tude sur le site m√™me de l‚ÄôUniversit√© avec un carrousel statique (qui ne d√©file pas automatiquement), 84 % des clics ont √©t√© effectu√©s sur les articles en position 1, le reste √©tant r√©parti assez √©quitablement entre les quatre autres (~4 % chacun).</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1722506854-graphiquecarrousels.png" alt="graphique sur le pourcentage de cliques sur un carrousel √† 5 diapositives" title="" data-img_id="3482"></p>

<p>En revanche, sur les carrousels automatiques, le taux de clic est plus √©lev√© que sur les autres diapositives.</p>

<p>Une autre √©tude a √©t√© r√©alis√©e par <a href="https://oda.oslomet.no/oda-xmlui/handle/11250/2980794">Rashika Tasnim Keya</a> en janvier 2022, √©tudiante √† l‚ÄôUniversit√© de Design de ICT, proposant aux internautes deux m√™me sites e-commerce, mais qui affichent des produits diff√©remments ; le premier site sans carousel, et le deuxi√®me site avec carrousels pour faire d√©filer les nombreux produits.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1722517124-graphiqueanalysecarrousel.png" alt="Analyse graphique sur les carrousels" title="" data-img_id="3485"></p>

<p>Selon le graphique ci-dessus, une des questions pos√©es aux internautes √©tait de savoir s‚Äôils trouvaient facilement les produits sur le site internet. Le site sans carrousel √† remport√© le plus de votes sur la r√©ponse ‚ÄúFortement d‚Äôaccord‚Äù, alors que le site avec carrousels a remport√© la r√©ponse ‚ÄúMod√©r√©‚Äù.</p>

<p>L‚Äôanalyse a montr√© que la plupart des utilisateurs ont d√©clar√© que <strong>l'interface sans carrousel √©tait plus compr√©hensible que l'interface avec les carrousels</strong>. En effet, l‚Äôinterface √©tait plus claire, et leur recherche d'articles ou de produits a √©t√© plus pr√©cise et plus rapide que sur le site avec les carrousels.</p>

<p>On peut noter que l'exp√©rience utilisateur est significativement diff√©rente selon l‚Äôinterface avec ou sans carrousel, et que les personnes ont tendance √† r√©aliser leur objectif plus facilement avec des composants simples d'utilisation.</p>

<h2>Pourquoi √©viter les Carrousels ?</h2>

<ul>
<li>Ils sont souvent plus difficiles √† g√©rer et peuvent donner des r√©sultats inattendus sur les appareils et les navigateurs plus anciens.</li>
<li>En 2023, Google a √©galement indiqu√© clairement que l'accent devait √™tre mis sur la vitesse et l'am√©lioration de l'exp√©rience utilisateur gr√¢ce √† la facilit√© d'utilisation. Les carrousels ne s'inscrivent absolument pas dans ce plan.</li>
<li>Les carrousels ne sont pas simples √† utiliser. Selon le World Wide Web Consortium (W3C), le carrousel doit suivre ou mettre en ≈ìuvre certaines lignes directrices afin de le rendre accessible √† toutes et tous.</li>
<li>Pour les carrousels automatiques, chaque personne a besoin d'un temps diff√©rent pour lire l'ensemble du contenu du carrousel. Si c'est trop rapide, les personnes sont frustr√©es, et si c'est trop lent, elles le sont √©galement, en particulier pour les personnes qui ont des probl√®mes de motricit√© et qui ont du mal √† cliquer sur un √©l√©ment avant qu'il ne soit enlev√©.</li>
</ul>

<h2>Mais si vous insistez‚Ä¶</h2>

<p>Si nous prenons l‚Äôexemple d‚Äôun site e-commerce, l'objectif de l'internaute est de trouver des informations sur les produits, de comparer diff√©rentes gammes de produits et de prendre une d√©cision d'achat. <strong>Cela signifie que l'utilit√© du carrousel d√©pend du contexte de l'utilisateur</strong>. L'utilisateur est donc plus susceptible d‚Äôutiliser les carrousels.</p>

<p>Mais √©tant donn√© que les utilisateurs sont moins enclins √† cliquer sur les fl√®ches pour afficher la diapositive suivante, il peut √™tre plus efficace de changer automatiquement de diapositive apr√®s un certain temps ou de leur montrer des diapositives d'une page diff√©rente lorsqu'ils reviennent sur votre site. √Ä noter cependant qu‚Äôau niveau de l‚Äôaccessibilit√©, une diapositive automatique doit comporter obligatoirement un syst√®me de mise en pause et de relance du d√©filement.</p>

<p>Selon les r√®gles du cerveau de John Medina, la vision prime sur les autres sens. Toutefois, un grand nombre de diapositives ne constitue pas un bon carrousel, car une injection excessive d'images visuelles entra√Æne une charge cognitive. Par cons√©quent, cinq diapositives ou moins, adapt√©es √† la m√©moire √† court terme, am√©lioreront l'exp√©rience de l'utilisateur.
Il faut √©galement faire attention √† placer les fl√®ches de mani√®re intuitive. Les utilisateurs pr√©f√®rent naviguer d'une mani√®re qui leur est famili√®re en raison de leur exp√©rience pass√©e.</p>

<h2>Pour conclure</h2>

<p>En conclusion, bien que les carrousels puissent sembler attrayants et dynamiques, leur efficacit√© est souvent remise en question. Les √©tudes montrent que ces √©l√©ments interactifs captent rarement l'attention des utilisateurs et peuvent m√™me nuire √† l'exp√©rience utilisateur en compliquant la navigation et en augmentant la charge cognitive. De plus, les d√©fis techniques li√©s √† l'accessibilit√© et √† la compatibilit√© multiplateforme rendent leur mise en ≈ìuvre complexe.</p>

<p>Ainsi, il est essentiel de bien r√©fl√©chir √† leur utilit√© r√©elle dans le contexte sp√©cifique de votre site. Si vous d√©cidez tout de m√™me d'opter pour un carrousel, il est crucial de l'utiliser de mani√®re r√©fl√©chie, en prenant en compte les meilleures pratiques pour garantir une exp√©rience utilisateur fluide et accessible.</p>

<h3>Liens et ressouces utiles pour int√©grer des carrousels accessibles :</h3>

<ul>
<li><a href="https://www.accede-web.com/notices/interface-riche/carrousels/">Carrousels - AcceDe Web</a></li>
<li><a href="https://www.magentaa11y.com/checklist-web/carousel/">How to test a carousel / slideshow</a></li>
<li><a href="https://van11y.net/accessible-carrousel/">Accessible carrousel using ARIA</a></li>
</ul>
<p><b><a href="https://www.alsacreations.com/article/lire/1928-Les-carrousels-slider-sont-ils-vraiment-utiles.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Design</category>
  	<dc:date>2024-08-19T12:00:56+01:00</dc:date>
  	<dc:creator>Lisa</dc:creator>
	</item>

  
	<item>
  	<title>Article : Les modes d&apos;apparence Light mode et Dark mode</title>
  	<link>https://www.alsacreations.com/article/lire/1927-Les-modes-d-apparence-Light-mode-et-Dark-mode.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1927-Les-modes-d-apparence-Light-mode-et-Dark-mode.html</guid>
  	<description><![CDATA[<p>Le <strong>mode sombre</strong> (<i lang="en">dark mode</i>) consiste √† adopter des fonds de couleur sombre sur les interfaces utilisateur. <a href="https://fr.wikipedia.org/wiki/Mode_sombre">Selon Wikipedia</a>, ce mode serait utile pour r√©duire la fatigue visuelle et la consommation en √©nergie par rapport aux autres modes d'affichage.</p>

<p>Un tr√®s grand nombre de personnes en sont adeptes sur leur smartphone, mais √©galement sur leur ordinateur ou tablette. Proposer aux utilisateurs la possibilit√© d'activer cette fonctionnalit√© est donc conseill√©e.</p>

<p>Le site de Wikipedia lui-m√™me vient enfin d'annoncer <a href="https://diff.wikimedia.org/2024/07/17/dark-modes-bright-future-how-dark-mode-will-transform-wikipedias-accessibility/">le support du Dark mode</a> pour ses pages de contenus, apr√®s de nombreuses ann√©es d'attente de ses lecteurs et lectrices.</p>

<h2>Pr√©f√©rences utilisateur</h2>

<p>Il est possible d'adapter les th√®mes de couleur de son environnement sur l'ensemble de son syst√®me d'exploitation, par exemple pour Windows et MacOS :</p>

<ul>
<li>Windows : Param√®tres > Personnalisation > Couleurs > mode Windows par d√©faut.</li>
<li>MacOS : R√©glages Syst√®me > Apparence > Mode d'apparence.</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1721395534-mode-apparence.png" alt="modes d'apparence sur MacOS" title="" data-img_id="3473"></p>

<p>Il est √©galement possible de n'appliquer ce choix qu'au niveau du navigateur web, par exemple :</p>

<ul>
<li>Dans Firefox : "R√©glages > G√©n√©ral > Apparence des sites web"</li>
<li>Dans Chrome : "chrome://flags" et chercher "dark mode"</li>
</ul>

<p>Enfin, en tant que d√©veloppeur, les <i lang="en">Devtools</i> (inspecteur d'√©l√©ment) de Google Chrome permettent d'√©muler le mode sombre / clair via la combinaison de touche "ctrl+shift+p" et chercher "rendering".</p>

<p>Les <i lang="en">Devtools</i> de Firefox permettent aussi de tester via onglet Inspecteur, dans les boutons-ic√¥nes en haut des styles (cf. capture ci-dessous).</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1721399162-image-1.png" alt="devtools de Firefox" title="" data-img_id="3478"></p>

<h2>Couleurs syst√®me</h2>

<p>Les couleurs syst√®mes repr√©sentent une palette de couleurs web propos√©es par d√©faut pour les diff√©rentes √©l√©ments d'interface : couleur de texte, couleur de fond, couleur de lien, couleur de bordure d'un bouton, etc.</p>

<p>Ces couleurs sont accessibles (si employ√©es correctement), conformes aux modes de contraste √©lev√© et <strong>pr√™tes √† s'adapter automatiquement au mode d'apparence (light et dark mode).</strong></p>

<p>Il est m√™me parfaitement possible de les utiliser sous forme de mot-cl√©s en CSS comme les autres couleurs nomm√©es :</p>

<pre><code class="language-css">html {
  color: CanvasText;
  background-color: Canvas;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1721395649-system-colors.png" alt="Couleurs syst√®me usuelles" title="" data-img_id="3474"></p>

<p>
<a class="demo" href="https://codepen.io/raphaelgoetter/pen/LYMQbGN">D√©mo : couleurs syst√®me</a>
</p>

<h2><code>color-scheme</code></h2>

<p>Cette propri√©t√© indique au navigateur quel mode d'affichage est souhait√© pour un √©l√©ment donn√© (light ou dark).</p>

<p>Dans l'exemple ci-dessous, on indique que l'√©l√©ment <code>.formulaire</code> doit obligatoirement s'afficher en mode sombre. <strong>Le navigateur ajuste en cons√©quence les couleurs syst√®me</strong>, mais aussi les contr√¥les de formulaires et les scrollbars √©ventuelles sur cet √©l√©ment.</p>

<pre><code class="language-css">.formulaire {
  color-scheme: dark;
}
</code></pre>

<h3>Valeurs de <code>color-scheme</code></h3>

<ul>
<li><code>color-scheme: normal;</code> : Le navigateur n'adapte pas les couleurs (valeur par d√©faut).</li>
<li><code>color-scheme: light;</code> : Le navigateur doit afficher l'√©l√©ment en mode light.</li>
<li><code>color-scheme: dark;</code> : Le navigateur doit afficher l'√©l√©ment en mode dark.</li>
<li><code>color-scheme: light dark;</code> : Le  navigateur doit afficher l'√©l√©ment selon les pr√©f√©rences utilisateur.</li>
</ul>

<h3>Exemple concret</h3>

<pre><code class="language-html">&lt;h1&gt;Tiens, mais quelle est ma couleur ?&lt;/h1&gt;
</code></pre>

<pre><code class="language-css">:root {
  color-scheme: light dark;
}
</code></pre>

<p>Dans cet exemple, j'indique que l'ensemble du document (<code>:root</code>) doit se conformer aux pr√©f√©rences utilisateur. Sans indiquer de couleurs particuli√®res, ce sont les couleurs syst√®me qui s'appliquent et sont autoris√©es √† s'adapter √† ces pr√©f√©rences : en mode clair, le document a un fond clair et le titre <code>&lt;h1&gt;</code> est de couleur sombre; et inversement en mode sombre.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1721395807-color-scheme.png" alt="la propri√©t√© color-scheme" title="" data-img_id="3475"></p>

<p>Compatibilit√© de <code>color-scheme</code> : <a href="https://caniuse.com/mdn-css_properties_color-scheme">https://caniuse.com/mdn-css_properties_color-scheme</a></p>

<p>Conclusion : appliquer <code>color-scheme: light dark;</code> est un bon d√©but pour toute page qui souhaite s'adapter au mode d'apparence, mais cette fonctionnalit√© n'agit que sur les couleurs syst√®me (et de l'interface du navigateur) donc c'est plut√¥t limit√© en terme de design.</p>

<h2><code>@media (prefers-color-scheme: ‚Ä¶)</code></h2>

<p>La requ√™te <code>prefers-color-scheme</code> est un crit√®re des sp√©cifications Media Query permettant de <strong>d√©tecter le Mode d'apparence de l'utilisateur (celui d√©fini via ses pr√©f√©rences syst√®me et/ou son navigateur)</strong>.</p>

<p>Cette fonctionnalit√© permet d'aller un cran plus loin que <code>color-scheme</code> en appliquant des palettes de couleurs totalement personnalis√©es et adapt√©es au choix (au syst√®me, plus pr√©cis√©ment) de nos visiteurs.</p>

<p>Nous d√©tectons si l'OS ou le navigateur est configur√© en mode sombre de cette mani√®re :</p>

<pre><code class="language-css">@media (prefers-color-scheme: dark) {
  /* ici des styles pr√©vus pour Dark Mode */
}
</code></pre>

<p>Concr√®tement, cela pourrait se traduire ainsi pour nos pages web :</p>

<pre><code class="language-css">:root {
  --color-primary: pink;
  --color-primary--darkmode: hotpink;

  @media (prefers-color-scheme: light) {
    --color-base: var(--color-primary);
  }
  @media (prefers-color-scheme: dark) {
    --color-base: var(--color-primary--darkmode);
  }
}
</code></pre>

<p>Dans l'extrait ci-dessus :</p>

<ul>
<li>Notre palette de couleurs est compos√©e de <code>--color-primary</code> et <code>--color-primary--darkmode</code></li>
<li>Si le mode d'apparence est clair alors <code>--color-base</code> vaut <code>--color-primary</code></li>
<li>Si le mode d'apparence est sombre alors <code>--color-base</code> vaut <code>--color-primary--darkmode</code></li>
</ul>

<p>Nos diff√©rents composants b√©n√©ficieront par cons√©quent d'une couleur <code>--color-base</code> dont la valeur s'adaptera automatiquement √† la configuration du syst√®me, par exemple :</p>

<pre><code class="language-css">.card {
  color: var(--color-base);
}
</code></pre>

<p>La vid√©o ci-dessous illustre la mise en oeuvre de la media query <code>prefers-color-scheme</code>:</p>

<figure>
<video src="https://www.alsacreations.com/xmedia/tuto/dark/dark.mp4" style="width:100%" controls loop autoplay />
<figcaption>Mise en oeuvre de la media query <code>prefers-color-scheme</code></figcaption>
</figure>

<p>Compatibilit√© de <code>@media (prefers-color-scheme: ‚Ä¶)</code> : <a href="https://caniuse.com/prefers-color-scheme">https://caniuse.com/prefers-color-scheme</a></p>

<h2><code>light-dark()</code></h2>

<p>Cette valeur-fonction accepte deux param√®tres de couleurs et renvoie l'une ou l'autre <strong>selon les pr√©f√©rences utilisateur (OS ou navigateur).</strong></p>

<pre><code class="language-css">.card {
  color: light-dark(pink, hotpink);
}
</code></pre>

<p>Autre exemple :</p>

<pre><code class="language-css">:root {
  color-scheme: light dark;
  --primary-color: light-dark(#fff, hotpink);
  --primary-background: light-dark(hotpink, #fff);
}
body {
  color: var(--primary-color);
  background-color: var(--primary-background);
}
</code></pre>

<p>Compatibilit√© de <code>light-dark()</code> : <a href="https://caniuse.com/mdn-css_types_color_light-dark">https://caniuse.com/mdn-css_types_color_light-dark</a></p>

<h2><i lang="en">Switch</i></h2>

<p>Un <i lang="en">Switch</i> est un composant de type "interrupteur". Il va au-del√† de ce que proposent les sp√©cifications CSS √©voqu√©es jusqu'alors, puisqu'il permet √† l'internaute de choisir le th√®me de couleur qu'il pr√©f√®re lorsqu'il visite votre site en particulier, ind√©pendamment de ses pr√©f√©rences utilisateur dans son syst√®me d'exploitation.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1721657256-switch.gif" alt="un bouton switch en action" title="" data-img_id="3480"></p>

<p>Un design totalement inclusif devrait proposer ce genre de fonctionnalit√©s pour tenter d'atteindre la meilleure exp√©rience possible pour tous les usagers de votre site.</p>

<p>Les contraintes et le processus ne sont pas si simples :</p>

<ul>
<li>Le th√®me doit s'adapter par d√©faut aux pr√©f√©rences utilisateur (OS ou navigateur).</li>
<li>L'utilisateur devrait aussi pouvoir choisir de changer de th√®me pour votre site, malgr√© ses pr√©f√©rences utilisateur.</li>
<li>Ce choix sp√©cifique pour ce site doit √™tre m√©moris√© pour toutes les pages et pour une prochaine visite.</li>
</ul>

<p>Voici un exemple de Switch accessible sur Codepen : <a href="https://codepen.io/alsacreations/pen/ExBPExE">https://codepen.io/alsacreations/pen/ExBPExE</a></p>

<p>Le d√©roul√© des √©v√©nements lors du clic/touch sur le bouton est celui-ci :</p>

<ol>
<li>On v√©rifie si le choix de th√®me √©tait d√©j√† m√©moris√© en localStorage.</li>
<li>Sinon on v√©rifie les pr√©f√©rences utilisateur du syst√®me.</li>
<li>Puis on cr√©e ou modifie l'attribut <code>data-theme-preference</code> sur <code>&lt;html&gt;</code> (valeur <code>"light"</code> ou <code>"dark"</code>).</li>
<li>Et on m√©morise le choix en localStorage.</li>
<li>Enfin, on passe l'attribut <code>aria-pressed</code> du bouton √† <code>"pressed"</code>.</li>
</ol>

<p>Le test pour conna√Ætre le choix de l'utilisateur porte sur l'attribut <code>data-theme-preference</code>, on s'en servira ainsi c√¥t√© CSS :</p>

<pre><code class="language-css">.card {
  color: pink;
}
[data-theme-preference="dark"] .card {
  color: hotpink;
}
</code></pre>

<p>Ou en syntaxe imbriqu√©e :</p>

<pre><code class="language-css">.card {
  color: pink;

  [data-theme-preference="dark"] &amp; {
    color: hotpink;
  }
}
</code></pre>

<h2>Conclusion</h2>

<p>Offrir une exp√©rience d'environnement sombre et clair est de plus en plus courant et recommand√©, rien que pour le confort de tous les usagers.</p>

<p>Cependant, techniquement, rien n'est vraiment magique car les contraintes sont nombreuses et les solutions sont toutes partielles.</p>

<p>Au final, le meilleur compromis semble √™tre un <i lang="en">Switch</i> , assemblage de sp√©cifications CSS et de JavaScript pour l'accessibilit√© et la m√©morisation des choix utilisateur.</p>
<p><b><a href="https://www.alsacreations.com/article/lire/1927-Les-modes-d-apparence-Light-mode-et-Dark-mode.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2024-07-22T13:37:00+01:00</dc:date>
  	<dc:creator>Raphael</dc:creator>
	</item>

  
	<item>
  	<title>Actualit√© : Pixels et Bretzels la 100e</title>
  	<link>https://www.alsacreations.com/actu/lire/1926-pixels-bretzels-100e.html</link>
  	<guid>https://www.alsacreations.com/actu/lire/1926-pixels-bretzels-100e.html</guid>
  	<description><![CDATA[<p>Les ann√©es passent, Pixels &amp; Bretzels ü•® se renouvelle (qui d'entre vous utilise encore le nom ¬´ WdStr ¬ª ?), mais garde le m√™me cap : continuer de vous proposer r√©guli√®rement des conf√©rences et rencontres, que ce soit dans votre c≈ìur de m√©tier ou pour vous faire prendre conscience de nouvelles probl√©matiques.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1709723836-pixels-bretzels-100-banner.png" alt="Pixels bretzels 100e √©dition" title="" data-img_id="3471"></p>

<p>Pour f√™ter cette 100e √©dition, Pixels &amp; Bretzels pose ses octets chez Alsacr√©ations. Il y aura des quiz et des lots √† vous faire gagner ! ‚ú®</p>

<p>M√™me si cela fait longtemps que vous n'√™tes pas venu¬∑e √† l'un de nos √©v√©nements, rejoignez-nous.</p>

<h2>Comment s'inscrire ?</h2>

<p>Via le site HelloAsso avec le lien suivant : <a href="https://www.helloasso.com/associations/pixels-bretzels/evenements/apero-100-le-100e">trop fort je m'inscris √† Pixels &amp; Bretzels 100e √©dition</a></p>

<p>3 bonnes raisons de nous rejoindre :</p>

<ul>
<li>Venez profiter d'une ambiance festive</li>
<li>Sortez la t√™te de vos projets et retrouvez la communaut√©</li>
<li>Tentez de gagner un lot !</li>
</ul>

<h2>Lieu et horaire</h2>

<p>Le mardi 19 mars 2024 √† 19h chez</p>

<p>Alsacr√©ations
10 place du Temple Neuf
67000 Strasbourg</p>

<p>Nous avons h√¢te de vous y retrouver ‚úåÔ∏è</p>

<h2>Les sponsors</h2>

<p>L'√©v√®nement est g√©n√©reusement soutenu par de super sponsors :</p>

<p><img src="https://cdn.helloasso.com/img/photos/sponsors-banner-bigger-32117b3d0a4049c49bfb4ed93f350310.png" alt="sponsors Pixels et Bretzels"></p>
<p><b><a href="https://www.alsacreations.com/actu/lire/1926-pixels-bretzels-100e.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Alsacr√©ations</category>
  	<dc:date>2024-03-06T12:16:32+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : Dialog, Modal, Popover : la synth√®se</title>
  	<link>https://www.alsacreations.com/article/lire/1922-dialog-modal-popover-la-synthese.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1922-dialog-modal-popover-la-synthese.html</guid>
  	<description><![CDATA[<p>L'arriv√©e de l'attribut et de l'API HTML <span lang="en"><a href="https://developer.mozilla.org/fr/docs/Web/API/Popover_API">popover</a></span> facilite la gestion de tous les √©l√©ments qui doivent s'afficher au-dessus du contenu d'une page Web (fen√™tre modale, <span lang="en">tooltip</span>, menu d√©roulant, etc.).</p>

<p>Cette nouvelle fonctionnalit√© vient s'ajouter √† certaines d√©j√† existantes, au point o√π l'on ne sait plus forc√©ment o√π donner de la t√™te entre les √©l√©ments dits "Dialog", "Modal", <span lang="en">"Popover"</span> ou autres <span lang="en">"Overlay"</span>.</p>

<p>Tentons de rassembler toutes les caract√©ristiques globales et techniques de l'ensemble de ces notions afin d'y voir plus clair.</p>

<p class="info">
Cet article a pour objectif de poser les bases et de d√©finir les diff√©rents termes en jeu. Dans un deuxi√®me temps un  article d√©taill√© sera consacr√© √† <code>&lt;dialog&gt;</code> et un autre √† <code>popover</code>.
</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704102798-modal.jpg" alt="" title="" data-img_id="3446"></p>

<h2>Tableau r√©capitulatif</h2>

<p>Pour bien se rendre compte du nombre de fonctionnalit√©s qui int√©ragissent, voici d'embl√©e un tableau r√©capitulatif des √©l√©ments que nous allons couvrir&hellip;</p>

<table>
<thead>
<tr>
  <th></th>
  <th><code>popover</code></th>
  <th><code>&lt;dialog&gt;</code> <br>(modal)</th>
  <th><code>&lt;dialog&gt;</code> <br>(non modal)</th>
  <th><code>&lt;div role=dialog&gt;</code></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Overlay</td>
  <td>oui</td>
  <td>oui</td>
  <td>oui</td>
  <td>oui</td>
</tr>
<tr>
  <td>Modal</td>
  <td>non</td>
  <td>oui</td>
  <td>non</td>
  <td>non</td>
</tr>
<tr>
  <td>Inert</td>
  <td>non</td>
  <td>oui</td>
  <td>non</td>
  <td>non</td>
</tr>
<tr>
  <td>Top layer</td>
  <td>oui</td>
  <td>oui</td>
  <td>non</td>
  <td>non</td>
</tr>
<tr>
  <td>Focus trap</td>
  <td>non</td>
  <td>oui</td>
  <td>oui</td>
  <td>non</td>
</tr>
<tr>
  <td>Dismissible</td>
  <td><code>echap</code> ou manuel</td>
  <td><code>echap</code></td>
  <td><code>echap</code></td>
  <td>non</td>
</tr>
<tr>
  <td>Commentaires</td>
  <td>Exclusif : ouvrir un popover ferme le pr√©c√©dent</td>
  <td>Masqu√© par d√©faut, visible avec l'attribut <code>open</code></td>
  <td>Masqu√© par d√©faut, visible avec l'attribut <code>open</code></td>
  <td></td>
</tr>
</tbody>
</table>

<p>Les diff√©rentes notions de ce tableau sont d√©taill√©es tout au long de cet article de synth√®se&nbsp;: <code>popover</code>, <code>&lt;dialog&gt;</code>, <span lang="en">overlay</span>, <span lang="en">modal</span>, <span lang="en">inert</span>, <span lang="en">top layer</span>, <span lang="en">focus trap</span>, <span lang="en">dismissible</span>.</p>

<h2>Overlay</h2>

<p>Le terme <span lang="en" title="surcouche">"overlay"</span> ne repr√©sente pas v√©ritablement un composant mais une caract√©ristique. Un √©l√©ment "overlay" est simplement <strong>un √©l√©ment qui se place au-dessus d'autres √©l√©ments dans la page.</strong></p>

<p>Tous les √©l√©ments au sein de cette liste sont des overlays&nbsp;:</p>

<ul>
<li>une "fen√™tre modale",</li>
<li>un menu d√©roulant,</li>
<li>une <span lang="en" title="bulle d'aide">Tooltip</span>,</li>
<li>une bo√Æte de dialogue,</li>
<li>un <span lang="en" title="s√©lecteur de date">Datepicker</span>,</li>
<li>un <span lang="en">Dropdown</span>,</li>
<li>un <span lang="en">Toaster</span>,</li>
<li>une notification,</li>
<li>un <span lang="en">bandeau cookie</span>,</li>
<li>etc.</li>
</ul>

<p>Dans cette m√™me famille nous croiserons les termes de <i lang="en">"pop-up"</i> (nouvelle fen√™tre au-dessus de la fen√™tre actuelle du navigateur) et <i lang="en">"pop-in"</i> (√©l√©ment au-dessus des autres √©l√©ments de la page, synonyme de "overlay", donc).</p>

<h2>Modal et non-Modal</h2>

<p>Selon les sp√©cifications HTML, le terme <span lang="en">"modal"</span> ne d√©signe pas un composant en tant que tel, mais un ensemble de caract√©ristiques&nbsp;: un √©l√©ment en <span lang="en">overlay</span> peut √™tre <span lang="en">"modal"</span> ou <span lang="en">"non-modal"</span>.</p>

<p><strong>Un √©l√©ment Modal est le seul √† √™tre interactif dans un document,</strong> il requiert toute l'attention de l'usager, tout le reste de la page doit √™tre rendu inerte (<code>inert</code>) car aucune autre action ne doit √™tre possible mis √† part r√©agir √† cet √©l√©ment (fermer, accepter, refuser, abandonner, etc.).</p>

<p>Par exemple, un bandeau de recueil de donn√©es personnelles doit √™tre consenti par l'utilisateur (obligation l√©gale RGPD) sans quoi il ne devrait pas pouvoir acc√©der au site. C'est donc un √©l√©ment de type Modal. Un autre exemple pourrait √™tre celui d'une une modale "login/password" si l'acc√®s au site n√©cessite une authentification.</p>

<p><strong>Un √©l√©ment non-Modal, √† l'inverse, laisse la possibilit√© √† l'utilisateur de continuer √† interagir avec la page.</strong> C'est g√©n√©ralement le cas des √©l√©ments tooltip, menu d√©roulant, dropdown, datepicker, notification, alerte, bandeau cookie.</p>

<h3><code>inert</code></h3>

<p>Un contenu inerte est un contenu avec lequel les utilisatrices et utilisateurs ne peuvent pas interagir. Il n'existe que visuellement, mais ne peut √™tre atteint, cliqu√©, d√©fil√© ni consult√© au moyen de technologies d'assistance.</p>

<p>Diff√©rentes techniques permettent de rendre une partie de page inerte&nbsp;:</p>

<ul>
<li>L'attribut HTML <code>inert</code>,</li>
<li>L'ancienne technique via la combinaison de <code>aria-hidden=true</code> et de <code>tabindex="-1"</code>,</li>
<li>Un polyfill JavaScript : <a href="https://github.com/WICG/inert">https://github.com/WICG/inert</a>,</li>
<li>L'√©l√©ment <code>&lt;dialog&gt;</code> (voir cette section pour les d√©tails).</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704879891-inert.png" alt="compatibilit√© de l'attribut inert" title="" data-img_id="3453"></p>

<h2>Top layer</h2>

<p>Top layer est une couche d'empilement au dessus de l'ensemble du document (existe depuis juin 2023). Cette couche n'est pas concern√©e par <code>z-index</code> ni par <code>overflow: hidden</code>. Les √©l√©ments s'empilent dans l'ordre d'apparition dans le Top layer.</p>

<p>Certains √©l√©ments sont plac√©s automatiquement par d√©faut dans le top layer :</p>

<ul>
<li>les √©l√©ments en fullscreen API</li>
<li>les √©l√©ments <code>&lt;dialog&gt;</code> (sauf exceptions)</li>
<li>les √©l√©ments avec l'attribut <code>popover</code> (sauf exceptions)</li>
</ul>

<h3><code>::backdrop</code></h3>

<p>Ce pseudo-√©lement s'applique uniquement aux objets plac√©s dans le top layer. Il permet d'apporter des styles visuels "sous" un overlay en obscurcissant la page par exemple.</p>

<pre><code class="language-css">/* Cette ombre n'est affich√©e que si l'√©l√©ment */
/* est dans le Top layer */
dialog::backdrop {
  background: rgba(0,0,0,0.3);
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704879979-backdrop.png" alt="compatibilit√© du s√©lecteur ::backdrop" title="" data-img_id="3454"></p>

<h2>Focus trap</h2>

<p>Certains √©l√©ment n√©cessitent que la navigation au clavier (touches <code>Tab</code> ou <code>Shift + Tab</code>) <strong>ne quitte pas le p√©rim√®tre du composant&nbsp;:</strong> en atteignant le dernier √©l√©ment <em>focusable</em>, on retourne en boucle au premier √©l√©ment <em>focusable</em> au sein du composant.</p>

<p>C'est le comportement attendu et souhait√© en accessibilit√© lorsque le composant est "modal" et que tout le reste du document est inerte.</p>

<p>Le focus trap doit toutefois √™tre temporaire et dispara√Ætre quand le composant est quitt√© ou rejet√© (dismissed).</p>

<h2>Dismissible (jetable)</h2>

<p>Certains overlay n√©cessitent de <strong>pouvoir √™tre ferm√©s de mani√®re automatique</strong> (via touche <code>echap</code> ou au focus √† l'ext√©rieur du composant) et/ou de fa√ßon manuelle (en validant un bouton de soumission par exemple). Ce comportement se nomme "Dismissible".</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704103490-menu.jpg" alt="Le menu d√©roulant sur Alsacr√©ations" title="" data-img_id="3447"></p>

<h2>Dialog</h2>

<p>Un Dialog est un composant de type overlay destin√© √† apporter une information √† un usager et recueillir une interaction de sa part. Les sp√©cifications proposent une API <code>HTMLDialogElement</code> ainsi qu'un √©l√©ment natif <code>&lt;dialog&gt;</code> qui peut √™tre "Modal" ou "non-Modal".</p>

<p>Le d√©clenchement se fait via l'API JavaScript :</p>

<ul>
<li><code>show()</code>: Ouvre le dialog en non-Modal</li>
<li><code>showModal()</code>: Ouvre le dialog en Modal</li>
<li><code>close()</code>: Ferme le dialog et renvoie en option une valeur</li>
</ul>

<p>Voici un exemple concret :</p>

<pre><code class="language-html">&lt;dialog id="modale"&gt;
  &lt;p&gt;Une modale de type Modal&lt;/p&gt;
&lt;/dialog&gt;
</code></pre>

<pre><code class="language-js">const modal = document.querySelector("#modale");
modal.showModal();
</code></pre>

<p>Les particularit√©s de l'√©l√©ment <code>&lt;dialog&gt;</code> sont&nbsp;:</p>

<ul>
<li><code>role=dialog</code> par d√©faut</li>
<li>Masqu√© par d√©faut, visible avec l'attribut <code>open</code></li>
<li>N√©cessite un nom accessible (<code>aria-label</code> ou <code>aria-labelledby</code>)</li>
<li>Focus trap : activ√© par d√©faut</li>
<li>Jetable (dismiss) via touche <code>echap</code></li>
</ul>

<p>Selon son √©tat (Modal ou non-Modal), d'autres caract√©ristiques s'ajoutent √† la liste pr√©c√©dente.</p>

<ul>
<li><p>Si le <code>&lt;dialog&gt;</code> est "Modal" :</p>

<ul>
<li>Il est plac√© dans le Top layer,</li>
<li><code>::backdrop</code> est applicable,</li>
<li>Tout le reste du document est rendu automatiquement <code>inert</code>.</li>
</ul></li>
<li><p>Si le <code>&lt;dialog&gt;</code> est "non-Modal" :</p>

<ul>
<li>Il n'est pas plac√© dans le Top layer (donc les r√®gles de stacking context et de <code>z-index</code> s'appliquent),</li>
<li><code>::backdrop</code> ne s'applique pas,</li>
<li>Tout le reste du document est interactif.</li>
</ul></li>
</ul>

<p>Les sp√©cifications d'accessibilit√© <abbr lang="en" title="Accessible Rich Internet Applications">ARIA</abbr> proposent un attribut <code>role="dialog"</code> pouvant √™tre appliqu√© sur n'importe quel √©l√©ment HTML autre que <code>&lt;dialog&gt;</code>, mais sachez que cela implique par d√©faut&nbsp;:</p>

<ul>
<li>Que l'√©lement est "non-Modal" (peut le devenir avec <code>aria-modal="true"</code>),</li>
<li>Qu'il n'est pas dans le Top layer,</li>
<li>Qu'il ne rend pas le reste de page inerte,</li>
<li>Qu'il ne cr√©e pas de Focus trap,</li>
<li>Qu'il n'est pas Jetable (dismiss) via touche <code>echap</code>.</li>
</ul>

<p>En outre, sans API JavaScript <code>showModal()</code>, l'√©l√©ment <code>&lt;dialog&gt;</code> est non-Modal :</p>

<pre><code class="language-html">&lt;dialog id="dialog" open&gt;
  &lt;p&gt;je suis non-modal&lt;/p&gt;
&lt;/dialog&gt;
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704880051-dialog.png" alt="compatibilit√© de l'√©l√©ment dialog" title="" data-img_id="3455"></p>

<h3><code>:modal</code></h3>

<p>La pseudo-classe <code>:modal</code> s'applique √† tous les √©l√©ments √† l'√©tat Modal (par exemple un <code>&lt;dialog&gt;</code> ouvert avec l'API <code>showModal()</code>).</p>

<pre><code class="language-css">#modale:modal {
  background: hotpink;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704880227-modal.png" alt="compatibilit√© du s√©lecteur :modal" title="" data-img_id="3457"></p>

<h2>popover</h2>

<p>Un <span lang="en">popover</span> est un <span lang="en">overlay</span> compos√© d'un attribut <code>popover</code> associ√© √† un d√©clencheur :</p>

<pre><code class="language-html">&lt;button popovertarget="tooltip"&gt;Ouvrir la tooltip&lt;/button&gt;
&lt;div popover id="tooltip"&gt;Choucroute et Saucisses de Strasbourg&amp;nbsp;!&lt;/div&gt;
</code></pre>

<p>Les particularit√©s d'un √©l√©ment pourvu d'un attribut <code>popover</code> sont&nbsp;:</p>

<ul>
<li>L'√©l√©ment est "non-Modal",</li>
<li>Il est plac√© dans le Top layer,</li>
<li><code>::backdrop</code> est applicable,</li>
<li>Aucun <code>role</code> sp√©cifique ne lui est affect√©. Le choix d√©pend du type de composant (<code>role="alert"</code> par exemple),</li>
<li>Jetable (dismiss) via touche <code>echap</code> par d√©faut,</li>
<li>Exclusif : il peut y en avoir plusieurs dans la page mais un seul dans l'√©tat d√©ploy√© √† la fois.</li>
</ul>

<p>Le comportement <em>dismissible</em> (jetable) d√©pend de la valeur associ√©e √† l'attribut <code>popover</code>&nbsp;:</p>

<ul>
<li><span lang="en">light dismiss</span> (<code>&lt;div popover=auto&gt;</code>, valeur par d√©faut si omise) : c'est le comportement id√©al pour tooltip, menu d√©roulant, dropdown, datepicker,</li>
<li><span lang="en">manual dismiss</span> (<code>&lt;div popover=manual&gt;</code>) : parfait pour des notifications ou des alertes.</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704880099-popover.png" alt="compatibilit√© de l'attribut popover" title="" data-img_id="3456"></p>

<h3><code>:popover-open</code></h3>

<p>La pseudo-classe CSS <code>:popover-open</code> repr√©sente un √©l√©ment popover (c'est-√†-dire un √©l√©ment avec un attribut <code>popover</code>) qui est dans l'√©tat ouvert.</p>

<pre><code class="language-css">:popover-open {
  /*...*/
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1704880347-popover-open.png" alt="compatibilit√© du s√©lecteur :popover-open" title="" data-img_id="3458"></p>

<h3>OK alors quand est-ce qu'on utilise quoi ?</h3>

<p>Le nombre de possibilit√©s offertes par les sp√©cifications ne facilite pas le choix lorsqu'il s'agit d'int√©grer un composant qui doit se placer au-dessus d'un contenu.</p>

<p>Entre les modales, les menus d√©roulants, les bo√Ætes de dialogues et autres bandeaux d'alerte, il n'est gu√®re ais√© de piocher parmi <code>&lt;dialog&gt;</code>, <code>popover</code> ou une simple <code>&lt;div&gt;</code> en position abolute dop√©e avec JavaScript.</p>

<p>Les r√©ponses aux deux questions suivantes sont d√©terminantes dans votre choix final :</p>

<ul>
<li><strong>L'utilisateur a-t-il le droit d'ignorer ce composant ?</strong><br> (si non, alors il s'agit sans aucun doute d'un √©l√©ment "Modal" car tout le reste de la page doit devenir <code>inert</code>)</li>
<li><strong>Le visuel attendu est-il une "modale" avec backdrop obscurci ?</strong><br> (si oui, l√† aussi nous aurons recours √† un √©l√©ment de type "Modal")</li>
</ul>

<p>J'esp√®re avoir √©clairci la plupart des points d'ombres (m√™me s'il en demeure sans doute) de ce vaste sujet des diff√©rents overlays. Pour finir, voici quelques articles de r√©f√©rence absolument indispensables pour en savoir plus.</p>

<h2>Ressources</h2>

<ul>
<li><a href="https://hidde.blog/dialog-modal-popover-differences/">https://hidde.blog/dialog-modal-popover-differences/</a></li>
<li><a href="https://blog.logrocket.com/comparing-popover-api-dialog-element/">https://blog.logrocket.com/comparing-popover-api-dialog-element/</a></li>
<li><a href="https://open-ui.org/components/popover.research.explainer/">https://open-ui.org/components/popover.research.explainer/</a></li>
<li><a href="https://adrianroselli.com/2023/05/brief-note-on-popovers-with-dialogs.html">https://adrianroselli.com/2023/05/brief-note-on-popovers-with-dialogs.html</a></li>
</ul>
<p><b><a href="https://www.alsacreations.com/article/lire/1922-dialog-modal-popover-la-synthese.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2024-02-09T09:00:28+01:00</dc:date>
  	<dc:creator>Raphael</dc:creator>
	</item>

  
	<item>
  	<title>Astuce : Optimiser le poids des images SVG</title>
  	<link>https://www.alsacreations.com/astuce/lire/1925-Optimiser-le-poids-des-images-SVG.html</link>
  	<guid>https://www.alsacreations.com/astuce/lire/1925-Optimiser-le-poids-des-images-SVG.html</guid>
  	<description><![CDATA[<p>Les images SVG sont d√©sormais omnipr√©sentes sur le web : illustrations, sch√©mas, d√©coration, ic√¥nes, ce format vectoriel se pr√™te bien √† toutes sortes de formes simples car il est l√©ger et √©tirable √† l'infini produisant un beau r√©sultat sur les √©crans √† forte densit√© de pixel (hdpi, retina...).</p>

<p>Si l'on peut en produire "√† la main" √† l'aide d'un √©diteur de code, car il s'agit avant tout de XML, les images SVG sont souvent g√©n√©r√©es par des programmes de dessin/webdesign tels que Figma, Illustrator, Inkscape et divers. Ces programmes ne vont pas n√©cessairement r√©duire au maximum le poids de l'image, m√™me si cela tend √† s'am√©liorer. Ils n'h√©siteront pas √† ajouter des m√©tadonn√©es inutiles ou des instructions de code superflues, provenant de la fa√ßon dont a √©t√© √©labor√©e l'image (calques, pr√©cision des formes et des trac√©s).</p>

<p>Ainsi Figma proposera une petite fonctionnalit√© d'export bien pratique et rapide pour copier une forme ou un groupe en tant que code SVG. Celui-ci pourra √™tre inclus de mani√®re <em>inline</em> au code HTML.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1706464258-figma-svg-copy.png" alt="Figma : copier en tant que SVG" title="" data-img_id="3467"></p>

<p>La performance √©tant cruciale, et scrut√©e par les outils d'analyse, les robots d'indexation, il est courant de devoir faire attention non seulement au poids des images bitmap (jpeg, png, webp, avif) mais aussi √† SVG, avec d'autres techniques compte tenu de sa sp√©cificit√© vectorielle.</p>

<h2>Optimisons</h2>

<p>S'il y a quelques ann√©es, il fallait se pencher manuellement sur l'optimisation du code SVG, d√©sormais bon nombre d'outils remplissent 99% des objectifs. La plupart √©tant list√©s par <a href="https://css-tricks.com/tools-for-optimizing-svg/">CSS Tricks : Tools for Optimizing SVG</a>.</p>

<p>ü§ñ Pour un traitement automatis√©, on pourra pr√©voir dans un <i lang="en">workflow</i> de pojet web d'int√©grer <a href="https://github.com/svg/svgo">svgo</a> durant un processus de compilation ou simplement en ligne de commande. En voici un exemple via Nodejs mais cette biblioth√®que se retrouve dans d'autres situations (extension Sketch, Visual Studio Code, SublimeText, Atom... plugin postCSS, Gulp, Webpack, etc.).</p>

<pre><code class="language-sh">pnpm add -g svgo
# Des images s√©lectionn√©es
svgo image1.svg image2.svg -o image1.min.svg image2.min.svg
# Tout un dossier (r√©cursif)
svgo -f images/svg/icons/src -o images/svg/icons/dist
</code></pre>

<p>üé® Pour un export depuis Figma, on passe par une extension de la communaut√© <a href="https://www.figma.com/community/plugin/782713260363070260">Advanced SVG Export</a> qui embarque l'algorithme de SVGO et dont les param√®tres sont configurables.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1706537039-figma-svgo.png" alt="Extension export SVG pour Figma" title="" data-img_id="3470"></p>

<p>üëâ Pour un traitement image par image quelle que soit la source, utilisons le fameux <a href="https://svgomg.net/">SVGOMG</a>, version humainement graphique de SVGO, qui acceptera soit un fichier soit un copier-coller direct (encore plus pratique), puis affichera l'aper√ßu et la possibilit√© de r√©-exporter ou re-copier le code source am√©lior√©.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1706464938-svgomg-en-action.png" alt="SVGOMG en action" title="" data-img_id="3468"></p>

<p>Si la plupart des options par d√©faut conviennent, d√©taillons celles qui rejoignent les principales techniques √† retenir lorsqu'on intervient manuellement sur du SVG :</p>

<ul>
<li><strong>Baisser la pr√©cision</strong> : les coordonn√©es sont stock√©es dans un espace √† 2 dimensions, vectoriel, et souvent avec une pr√©cision excessive. Inutile de manipuler et stocker des chiffres √† 5 d√©cimales si finalement √† l'√©cran il s'agit de les arrondir au demi-pixel. Cette option produit de bons r√©sultats sur des formes tr√®s complexes lorsque des chemins "longs" comprennent beaucoup de coordonn√©es et que l'on peut simplifier les courbes.</li>
</ul>

<p>Exemple de chemin avec trop de pr√©cision :</p>

<pre><code class="language-xml">&lt;path d="M24 18.55C26.2 17.45 27.5 16.15 28 14.55C28.6 12.65 27.8 10.55 25.8 8.34996C24.1 6.34996 22.3 5.64996 20.5 6.14996C19 6.54996 17.6 7.84996 16.3 9.84996C15.2 11.55 14.3 13.65 13.7 15.75C13.1 17.85 13 19.35 13.3 20.25C14.2 20.55 15.6 20.55 17.8 20.25C20.1 20.15 22.2 19.55 24 18.55ZM12 9.44996C13.1 7.24996 13.4 5.44996 12.8 3.94996C12.1 2.04996 10.3 0.849963 7.40002 0.249963C4.90002 -0.350037 3.00002 0.149963 1.90002 1.64996C1.00002 2.84996 0.500025 4.64996 0.700025 7.14996C0.800025 9.24996 1.30002 11.35 2.20002 13.55C3.00002 15.55 3.70003 16.85 4.50003 17.45C5.40003 17.25 6.60003 16.25 8.10003 14.75C9.90003 12.95 11.1 11.25 12 9.44996ZM25.6 33.75C28 34.15 29.8 33.85 31.1 32.85C32.6 31.65 33.2 29.55 32.9 26.55C32.7 23.95 31.6 22.45 29.9 21.75C28.4 21.25 26.6 21.45 24.3 22.35C22.4 23.15 20.5 24.25 18.8 25.65C17.1 27.05 16.1 28.15 15.9 29.15C16.5 29.85 17.6 30.75 19.5 31.75C21.6 32.85 23.6 33.55 25.6 33.75Z" fill="#ACC737"/&gt;
</code></pre>

<p>Le voici optimis√© avec moins de pr√©cision sur les coordonn√©es, et un r√©sultat visuel semblable :</p>

<pre><code class="language-xml">&lt;path d="M24 18.6c2.2-1.2 3.5-2.5 4-4 .6-2-.2-4-2.2-6.3-1.7-2-3.5-2.7-5.3-2.2-1.5.4-2.9 1.7-4.2 3.7-1.1 1.8-2 3.8-2.6 6-.6 2-.7 3.6-.4 4.4.9.4 2.3.4 4.5 0a14 14 0 0 0 6.2-1.6ZM12 9.4c1.1-2.2 1.4-4 .8-5.5C12.1 2 10.3 1 7.4.2 4.9-.4 3 .2 1.9 1.6 1 2.8.5 4.6.7 7.1c.1 2.1.6 4.3 1.5 6.5.8 2 1.5 3.3 2.3 3.8.9-.1 2.1-1.1 3.6-2.6A20 20 0 0 0 12 9.3Zm13.6 24.4c2.4.4 4.2 0 5.5-1 1.5-1.1 2.1-3.2 1.8-6.2-.2-2.7-1.3-4.2-3-4.9-1.5-.4-3.3-.3-5.6.7-1.9.8-3.8 1.9-5.5 3.3-1.7 1.4-2.7 2.4-2.9 3.4.6.8 1.7 1.6 3.6 2.6 2.1 1.2 4.1 1.8 6.1 2Z" fill="#ACC737"/&gt;
</code></pre>

<ul>
<li><strong>Supprimer les informations inutiles</strong> : commentaires <code>&lt;!-- --&gt;</code> dans le code source, m√©tadonn√©es de l'√©diteur d'image qui aime y laisser sa trace, et m√™me √©l√©ments cach√©s (<code>hidden</code>) : tout ce qui ne se "voit" de toute fa√ßon pas en production, et ignor√© par le navigateur.</li>
<li><strong>Supprimer les informations XML</strong> : √† l'origine SVG a √©t√© construit sur XML qui induit des contraintes : un doctype, des <em>namespaces</em> le cas √©ch√©ant... si ces √©l√©ments sont absents les navigateurs s'en accomodent. Par exemple l'attribut <code>xmlns</code> n'est pas n√©cessaire si le code SVG est <i lang="en">inline</i> dans le code HTML.</li>
<li><strong>Fusionner les informations, minifier les couleurs</strong> : notamment de style, les classes et valeurs ne sont pas toujours g√©n√©r√©es intelligemment, il s'agit alors de mutualiser les styles communs plut√¥t que de se reposer uniquement sur des attributs <code>style=""</code> (ex : 2 carr√©s verts auront les m√™mes propri√©t√©s) pour gagner de la place. En revanche l'option <i lang="en">merge paths</i> peut emp√™cher de conserver tous les trac√©s individuels pour agir sur chacun : cela d√©pendra beaucoup des r√®gles externes CSS et du code JavaScript qui pourrait interagir avec le SVG attendu. Si vous √©crivez des propri√©t√©s de style qui doivent s'appliquer sur un √©l√©ment en particulier, nomm√© par une classe, et que cette classe est retir√©e, cela n'aura plus d'effet.</li>
<li><strong>Supprimer les √©l√©ments ou attributs SVG en exc√®s</strong> : en plus du code inutile lorsqu'il s'agit d'√©l√©ments ou attributs vides, on constate souvent une imbrication de groupes (balise <code>&lt;g&gt;</code>) qui ne sont pas n√©cessaires au-del√† de l'√©dition, il faut juste faire attention √† pr√©server l'ordre de superposition des formes.</li>
<li><strong>Appliquer les transformations</strong> : les coordonn√©es initiales d'une forme peuvent √™tre compl√©t√©es, modifi√©es et transform√©es √† la vol√©e par des propri√©t√©s d'√©chelle, de d√©placement, de rotation, autant les appliquer directement dans le fichier sur ces m√™mes coordonn√©es.</li>
<li><strong>Remplacer des balises par d'autres</strong> : toute forme simple (cercle, carr√©, rectangle) existe en tant que balise SVG mais peut aussi √™tre d√©crite par un chemin g√©n√©rique <code>&lt;path&gt;</code> avec des coordonn√©es minimales.</li>
<li><strong>Minifier</strong> le code et/ou le remettre en forme (<i lang="en">Prettify</i>) : supprimer les espaces inutiles, joindre les lignes, ou les r√©indenter correctement, c'est toujours un compromis entre lisibilit√© humaine et gain de quelques octets c√¥t√© r√©seau.</li>
</ul>

<p>Si vous examinez toutes les options list√©es par SVGOMG, vous imaginerez ais√©ment tout ce qui peut √™tre entrepris pour all√©ger une image SVG. Pour constater les effets avant/apr√®s sur le code source, consultez l'onglet <i lang="en">Markup</i> et activez/d√©sactivez l'option <i lang="en">Show original</i>.</p>

<p>Une op√©ration toutefois devra n√©cessiter une v√©rification et intervention manuelle : si votre SVG contient des images bitmap (non vectorielles), ce qui est tout √† fait possible pour des effets non reproductibles en vectoriel (cela se remarquera √† son poids global lourd et √† la pr√©sence de code en base64) alors il faudra √©tudier la possibilit√© de les remplacer par de vraies formes simplifi√©es.</p>

<h2>TL;DR ?</h2>

<p>Utilisez <a href="https://svgomg.net/">SVGOMG</a>.</p>
<p><b><a href="https://www.alsacreations.com/astuce/lire/1925-Optimiser-le-poids-des-images-SVG.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Formats, encodage, XML</category>
  	<dc:date>2024-02-01T09:00:00+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : CSS :has() le s√©lecteur de parent, mais bien plus encore‚ÄØ!</title>
  	<link>https://www.alsacreations.com/article/lire/1924-css-has-selecteur-parent.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1924-css-has-selecteur-parent.html</guid>
  	<description><![CDATA[<p class="info">
La pseudo-classe <code>:has()</code> r√©alise le fantasme historique de pouvoir enfin <strong>"cibler le parent" en CSS</strong>&hellip; mais elle fait bien plus que √ßa&#8239;!
</p>

<p><code>:has()</code> est une pseudo-classe CSS issue des sp√©cifications <a href="https://drafts.csswg.org/selectors/#relational">"Selectors level 4"</a> o√π elle est d√©crite comme "s√©lecteur relationnel".</p>

<p>Le s√©lecteur <code>:has()</code> cible un √©l√©ment en relation avec la liste d'arguments qu'il contient au sein de ses parenth√®ses. Cela permet de cibler un parent ou anc√™tre, mais √©galement un fr√®re pr√©c√©dent dans le DOM.</p>

<p>Commen√ßons justement par une √©num√©ration d'exemples de ce qu'est capable de r√©aliser <code>:has()</code>&hellip;</p>

<h2>Quelques exemples simples</h2>

<p>Je cible l'√©l√©ment <code>&lt;a&gt;</code> √† condition qu'il contienne un descendant <code>&lt;img&gt;</code>&#8239;:</p>

<pre><code class="language-css">a:has(img) {
}
</code></pre>

<p>Je cible l'√©l√©ment <code>&lt;a&gt;</code> √† condition qu'il contienne un enfant direct <code>&lt;img&gt;</code>&#8239;:</p>

<pre><code class="language-css">a:has(&gt; img) {
}
</code></pre>

<p>Je cible n'importe quel √©l√©ment du DOM √† condition qu'il contienne un descendant <code>&lt;img&gt;</code>&#8239;:</p>

<pre><code class="language-css">:has(img) {
}
</code></pre>

<p>Je cible l'√©l√©ment <code>&lt;button&gt;</code> √† condition qu'il contienne un descendant de classe <code>.icon</code> ou de classe <code>.text</code>&#8239;:</p>

<pre><code class="language-css">button:has(.icon, .text) {
}
</code></pre>

<p>Je masque l'√©l√©ment <code>&lt;svg&gt;</code> s'il contient un descendant <code>&lt;symbol&gt;</code> ou <code>&lt;defs&gt;</code>&#8239;:</p>

<pre><code class="language-css">svg:has(symbol, defs) {
  display: none;
}
</code></pre>

<p>Je cible l'√©l√©ment de classe <code>.container</code> √† condition qu'il contienne un enfant direct unique <code>&lt;img&gt;</code>&#8239;:</p>

<pre><code class="language-css">.container:has(&gt; img:only-child) {
}
</code></pre>

<p>Je cible l'√©l√©ment de classe <code>.form-group</code> √† condition qu'il contienne un √©l√©ment <code>&lt;input&gt;</code> √† l'√©tat coch√©&#8239;:</p>

<pre><code class="language-css">.form-group:has(input:checked) {
}
</code></pre>

<p>Je cible l'√©l√©ment  <code>&lt;form&gt;</code> √† condition qu'il contienne un √©l√©ment √† l'√©tat <code>:focus</code> (quasi identique <a href="https://codepen.io/una/pen/OJoRxmv">au s√©lecteur <code>:focus-within</code></a>)&#8239;:</p>

<pre><code class="language-css">form:has(:focus) {
}
</code></pre>

<p>Je cible l'√©l√©ment <code>&lt;h1&gt;</code> √† condition que son fr√®re suivant soit un <code>&lt;p&gt;</code>&#8239;:</p>

<pre><code class="language-css">h1:has(+ p) {
}
</code></pre>

<p>Je cible l'√©l√©ment <code>&lt;label&gt;</code> √† condition que son fr√®re suivant soit un <code>&lt;input&gt;</code>&#8239;:</p>

<pre><code class="language-css">label:has(+ input) {
}
</code></pre>

<h2>Compatibilit√©</h2>

<p>La compatibilit√© de <code>:has()</code> a √©t√© plac√©e au niveau de <a href="https://developer.mozilla.org/en-US/blog/baseline-evolution-on-mdn/" lang="en">Baseline 2023</a>, c'est √† dire que l'ensemble des navigateurs supportent cette fonctionnalit√© depuis (d√©cembre) 2023.</p>

<p><img src="https://caniuse.bitsofco.de/image/css-has.webp" alt="support navigateurs du s√©lecteur :has(). Source: caniuse.com"></p>

<p>Il est parfaitement possible de tester si un navigateur supporte <code>:has()</code> √† l'aide de la r√®gle <code>@supports()</code>&#8239;:</p>

<pre><code class="language-css">@supports (selector(:has(*))) {
  /* ici les styles si :has() est support√© */
}

@supports not (selector(:has(*))) {
  /* ici les styles si :has() n'est pas support√© */
}
</code></pre>

<h2>Sp√©cificit√©</h2>

<p>Bien qu'appartenant aux pseudo-classes, <code>:has()</code> ne compte pas dans le calcul de la <a href="https://developer.mozilla.org/fr/docs/Web/CSS/Specificity">sp√©cificit√©</a> des s√©lecteurs CSS, en revanche son contenu est pris en compte&#8239;:</p>

<pre><code class="language-css">div:has(img) {
  /* sp√©cificit√© (0,0,2) */
  /* :has ne compte pas */
  /* on compte les 2 √©l√©ments div et img */
}

div:has(img, #hero) {
  /* sp√©cificit√© (1,0,1) */
  /* :has ne compte pas */
  /* on compte le poids le plus fort dans la liste (ici l'id #hero) */
}
</code></pre>

<h2>Combinaisons</h2>

<p><code>:has()</code> peut √™tre combin√© avec d'autres s√©lecteurs tels que <code>:not()</code>, <code>:where()</code> ou <code>:is()</code>. Cependant il n'est pas autoris√© d'imbriquer <code>:has()</code> au sein d'un autre <code>:has()</code> (en m√™me temps qui voudrait faire √ßa&#8239;?).</p>

<p>Voici quelques exemples&#8239;:</p>

<ul>
<li><code>p:has(:not(span))</code> : <code>p</code> qui contient tout descendant <em>sauf</em> un <code>span</code></li>
<li><code>p:not(:has(span))</code> : <code>p</code> qui <em>ne contient pas</em> de descendant <code>span</code></li>
<li><code>p:where(:has(span))</code> : <code>p</code> qui contient un descendant <code>span</code>. Fonctionnellement identique √† <code>p:has(span)</code> mais avec une sp√©cificit√© moindre (0,0,1)</li>
<li><code>:where(p:has(span))</code> : <code>p</code> qui contient un descendant <code>span</code>. Fonctionnellement identique √† <code>p:has(span)</code> mais avec une sp√©cificit√© nulle (0,0,0)</li>
</ul>

<h2>Quelques cas d'usage utiles</h2>

<p><code>:has()</code> est un s√©lecteur tout √† fait r√©volutionnaire qui ouvre la voie vers de multiples nouvelles possibilit√©s en CSS.</p>

<p>Il est difficile de rassembler tous les cas d'usage utiles que cette pseudo-classe permet aujourd'hui de r√©soudre. Voici cependant une petite s√©lection parmi mes pr√©f√©r√©s&hellip;</p>

<h3>Appliquer un effet sur la page si une modale est ouverte</h3>

<p>Je souhaite cibler <code>body</code> et lui appliquer un effet de flou via <code>backdrop-filter</code>, uniquement s'il contient un √©l√©ment ayant √† la fois la classe <code>.modal</code> et <code>.is-opened</code>&#8239;:</p>

<pre><code class="language-css">body:has(.modal.is-opened) {
  backdrop-filter: blur(8px);
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1705488890-has-1.jpg" alt="" title="" data-img_id="3459"></p>

<p><a class="demo" href="https://codepen.io/raphaelgoetter/pen/VwdZmGx">D√©mo sur Codepen</a></p>

<p class="warning">
Pour ce cas d'usage pr√©cis, il peut √™tre pertinent d'envisage d'utiliser <code>&lt;dialog&gt;</code> qui apporte nativement ces fonctionnalit√©s d'obscurcissement ou de flou de page.
</p>

<h3>Ajouter des goutti√®res conditionnellement</h3>

<p>Je souhaite une goutti√®re pour espacer les √©l√©ments de ma "Card", mais uniquement si celle-ci poss√®de une image&#8239;:</p>

<pre><code class="language-css">.card {
  display: grid;
  grid-template-columns: auto 1fr;
}
.card:has(&gt;img) {
  gap: 20px;
}
</code></pre>

<p>Encore plus fort : une goutti√®re doit s'appliquer uniquement si le groupe de cards a exactement deux enfants&#8239;:</p>

<pre><code class="language-css">.card-group:has(&gt; :nth-child(2):last-child) {
  gap: 20px;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1705489298-has-2.jpg" alt="" title="" data-img_id="3460"></p>

<p><a class="demo" href="https://codepen.io/raphaelgoetter/pen/vYdVQPX">D√©mo sur Codepen</a></p>

<h3>D√©corer le parent d'une case √† cocher au clic</h3>

<p>Je veux une couleur de fond sur le parent du label et de la checkbox quand celle-ci est coch√©e&#8239;:</p>

<pre><code class="language-css">.form-group:has(input:checked) {
  background: #ddd;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1705489364-has-3.png" alt="" title="" data-img_id="3461"></p>

<p><a class="demo" href="https://codepen.io/raphaelgoetter/pen/MWXwpaJ">D√©mo sur Codepen</a></p>

<h3>Adapter les styles au nombre d'enfants</h3>

<p>Je souhaite adapter les styles et la taille des enfants selon leur nombre au sein de leur parent&#8239;:</p>

<pre><code class="language-css">.parent {

  &amp;:has(&gt; :nth-child(10)) { }
  &amp;:has(&gt; :nth-child(20)) { }
  &amp;:has(&gt; :nth-child(30)) { }

}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1705489421-has-4.png" alt="" title="" data-img_id="3462"></p>

<p><a class="demo" href="https://codepen.io/chriscoyier/pen/vYbPaxo">D√©mo sur Codepen</a></p>

<h3>Modifier les variables de la page au clic sur une checkbox</h3>

<p>√Ä partir d'une case √† cocher situ√©e n'importe o√π dans le DOM, je veux inverser les couleurs des variables de la page au moment o√π cette checkbox est coch√©e&#8239;:</p>

<pre><code class="language-html">&lt;body&gt;
  ...
  n'importe o√π dans le DOM
  ...
  &lt;div&gt;
    &lt;input type="checkbox" id="check" class="toggle"&gt;
    &lt;label for="check"&gt;toggle light/dark&lt;/label&gt;
  &lt;/div&gt;
&lt;/body&gt;
</code></pre>

<pre><code class="language-css">body {
  --bg-color: #eee;
  --text-color: #222;
  background-color: var(--bg-color);
  color: var(--text-color);
}
body:has(.toggle:checked) {
  --bg-color: #222;
  --text-color: #eee;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1705489467-has-5.png" alt="" title="" data-img_id="3463"></p>

<p><a class="demo" href="https://codepen.io/raphaelgoetter/pen/GRzPXrd">D√©mo sur Codepen</a></p>

<h3>B√©n√©ficier de Container Queries sans conna√Ætre le parent</h3>

<pre><code class="language-css">/* Je cr√©e un Container Query sur le parent de .component (quel qu'il soit) */
:has(&gt; .component) {
  container-type: inline-size;
}
/* J'adapte les styles de .component selon la taille du parent */
.component {
  @container (width &gt; 500px) {
    color: hotpink;
  }
}
</code></pre>

<p><a class="demo" href="https://codepen.io/raphaelgoetter/pen/GRGQJLe">D√©mo sur Codepen</a></p>

<h2>Conclusion</h2>

<p>La port√©e et la puissance du s√©lecteur <code>:has()</code> d√©passent de loin toutes les autres fa√ßons historiques de cibler les √©l√©ments en CSS.</p>

<blockquote>
  <p>Gr√¢ce √† :has() il est possible de cibler n'importe quel √©l√©ment du DOM √† partir de n'importe quel autre √©l√©ment du DOM.</p>
</blockquote>

<p>On pourrait se poser des questions l√©gitimes sur les performances d'un s√©lecteur permettant de parcourir tout le DOM dans tous les sens.</p>

<p>Dans son <a href="https://webkit.org/blog/13096/css-has-pseudo-class/">article consacr√© √† ce s√©lecteur</a>, Jen Simmons explique que les travaux sur <code>:has()</code> ont conduit √† des sp√©cifications d√©di√©es aux performances et que les navigateurs ont √©t√© retravaill√©s pour s'adapter √† ces sp√©cifications.</p>

<p>Les r√©sultats sont excellents (traduction d'un extrait de son article)&#8239;:</p>

<blockquote>
  <p>Il est enfin possible d'impl√©menter un tel s√©lecteur avec des performances fantastiques, m√™me en pr√©sence de grands arbres DOM et d'un grand nombre de s√©lecteurs <code>:has()</code>.</p>
</blockquote>

<h2>Ressources</h2>

<ul>
<li>Documentation MDN&#8239;: <a href="https://developer.mozilla.org/fr/docs/Web/CSS/:has">https://developer.mozilla.org/fr/docs/Web/CSS/:has</a></li>
<li>Article de Jen Simmons (avec un paragraphe sur les performances)&#8239;: <a href="https://webkit.org/blog/13096/css-has-pseudo-class/">https://webkit.org/blog/13096/css-has-pseudo-class/</a></li>
<li>Smashing Magazine : <a href="https://www.smashingmagazine.com/2023/01/level-up-css-skills-has-selector/">Level Up Your CSS Skills With The :has() Selector</a></li>
<li>LogRocket : <a href="https://blog.logrocket.com/advanced-guide-css-has-selector/">The advanced guide to the CSS :has() selector</a></li>
<li>LambdaTest : <a href="https://www.lambdatest.com/blog/css-has-selector/">Complete Guide to CSS :has() Selector</a></li>
<li>Source de l'illustration principale : <a href="https://pixabay.com/fr/illustrations/ai-g%C3%A9n%C3%A9r%C3%A9-darth-vader-star-wars-7877747/">Pixabay : Ai g√©n√©r√©, Darth vader, Star wars. Utilisation gratuite.</a></li>
</ul>
<p><b><a href="https://www.alsacreations.com/article/lire/1924-css-has-selecteur-parent.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2024-01-18T13:37:25+01:00</dc:date>
  	<dc:creator>Raphael</dc:creator>
	</item>

  
	<item>
  	<title>Astuce : Mettre en surbrillance ligne et colonne au survol d&apos;une table</title>
  	<link>https://www.alsacreations.com/astuce/lire/1923-Mettre-en-surbrillance-ligne-et-colonne-au-survol-d-une-table.html</link>
  	<guid>https://www.alsacreations.com/astuce/lire/1923-Mettre-en-surbrillance-ligne-et-colonne-au-survol-d-une-table.html</guid>
  	<description><![CDATA[<p>Aujourd'hui, il nous est possible de faire √©norm√©ment de choses avanc√©s en CSS. Cependant quelque chose qui semble ¬± simple n'est pas toujours aussi simple que ce que l'on esp√®re, voir pas du tout. Le projet sur lequel je travaille affiche √©norm√©ment de table de donn√©es (<code>&lt;table&gt;</code>). Pour certaines d'entre elles, j'aimerais pouvoir mettre en surbrillance la ligne <strong>et</strong> la colonne de la cellule que je survole‚Ä¶</p>

<p><img alt="Un bouton burger sous forme de 3 rectangles" src="https://www.alsacreations.com/xmedia/doc/original/1704408972-table-highlight-cross-axis.png" width="400"></p>

<p>Il est √©vident qu'il existe de moches solutions avec Javascript (<a href="https://codepen.io/luttenegger/pen/vYgWmxz">hum hum</a>), mais il est aussi tr√®s simple de le faire avec CSS (<a href="https://codepen.io/Yordi/pen/dyQOMXE">codepen</a>).</p>

<h2>Comment cibler une ligne de la table ?</h2>

<p>Tr√®s simplement, en utilisant la pseudo-classe <strong>hover</strong> sur la ligne (<code>&lt;tr&gt;</code> <em>table-row</em>), on peut changer son <code>background-color</code>.</p>

<pre><code class="language-css">tr:hover {
  background: antiquewhite;
}
</code></pre>

<h2>Comment cibler une colonne de la table ?</h2>

<p>Un peu plus compliqu√© pour cette partie‚Ä¶</p>

<p>En Javascript, il est plut√¥t facile de r√©cup√©rer l'index de la colonne pour ensuite utiliser CSS et une pseudo-classe <code>:nth-child()</code>. Pour toutes les lignes, s√©lectionner la colonne num√©ro 4, et lui afficher un background diff√©rent.</p>

<p>En CSS, on ne peut pas conna√Ætre son index (√† l'exception de <em>first</em> et <em>last</em>), remonter la structure et ensuite r√©appliquer plus loin.
Par contre, en combinant de simple propri√©t√©s comme <code>position</code>, <code>overflow</code> et un pseudo-√©l√©ment <code>::before</code>, on pourrait cr√©er <strong>l'illusion</strong> en s'√©tendant verticalement un peu plus loin que la cellule.</p>

<pre><code class="language-css">td {
  position: relative;

  &amp;:hover::before {
    content: "";
    position: absolute;
    inset: -100vh 0; /* https://developer.mozilla.org/fr/docs/Web/CSS/inset */
    background: antiquewhite;
    z-index: -1; /* On positione le pseudo-√©l√©ment en arri√®re plan */
  }
}
</code></pre>

<p>Avec <code>inset: -100vh 0</code> (√©quivalent √† <code>top: -100vh; right: 0; bottom: -100vh; left: 0;</code>), on va prendre la largeur de la cellule et s'√©tendre en hauteur.</p>

<p>Maintenant, nous avons bien une surbrillance qui se fait sur les deux axes. Il y a cependant notre colonne qui s'√©tend un peu trop. En ajoutant un simple <code>overflow: hidden</code> sur notre table, on contiendra tout √ßa.</p>

<p><a class="demo" href="https://codepen.io/Yordi/pen/dyQOMXE">Voir le r√©sultat</a></p>
<p><b><a href="https://www.alsacreations.com/astuce/lire/1923-Mettre-en-surbrillance-ligne-et-colonne-au-survol-d-une-table.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2024-01-05T23:18:26+01:00</dc:date>
  	<dc:creator>Yordi</dc:creator>
	</item>

  
	<item>
  	<title>Tutoriel : Animer un bouton burger simple avec SVG et CSS</title>
  	<link>https://www.alsacreations.com/tuto/lire/1921-Animer-un-bouton-burger-simple-avec-SVG-et-CSS.html</link>
  	<guid>https://www.alsacreations.com/tuto/lire/1921-Animer-un-bouton-burger-simple-avec-SVG-et-CSS.html</guid>
  	<description><![CDATA[<p>Le format  <abbr title="Scalable Vector Graphics" lang="en">SVG</abbr> peut para√Ætre parfois un peu intimidant, et l'associer √† des transitions ou des animations CSS semble encore plus audacieux pour bon nombre de personnes.</p>

<p>Cependant, dans certains cas, l'alchimie entre SVG et CSS est aussi b√©n√©fique qu'extr√™mement simple √† mettre en oeuvre. Dans ce tutoriel, nous allons suivre √©tape par √©tape comment animer un bouton burger simple avec SVG et CSS.</p>

<div style="text-align: center">
  <video controls autoplay width="250">
    <source src="https://www.alsacreations.com/xmedia/tuto/burger/09.mp4" type="video/mp4" >
  </video>
</div>

<h3>Quels outils ?</h3>

<p>La liste des outils n√©cessaires pour atteindre nos objectifs est particuli√®rement r√©duite puisqu'un <strong>simple <a href="https://code.visualstudio.com/">√©diteur de code</a> fait le job</strong> (n'importe lequel fait l'affaire, Visual Studio Code √©tant mon choix personnel).</p>

<p>Pour aller plus loin, et en guise de bonus, on peut √©galement piocher&nbsp;:</p>

<ul>
<li>Un √©diteur <a href="https://github.com/SVG-Edit/svgedit">SVG en ligne</a> (parce que √ßa peut toujours servir)</li>
<li>Des recommendations concernant <a href="https://github.com/alsacreations/guidelines/blob/master/Guidelines-Accessibilite.md#images-svg-et-accessibilit%C3%A9">l'accessibilit√© des SVG</a> (au hasard les Guidelines Alsacr√©ations)</li>
<li>Un √©diteur de <a href="https://cubic-bezier.com/">courbes de Bezier</a> (pour des animations originales)</li>
</ul>

<h3>SVG c'est quoi ?</h3>

<p>En trois mots, voici comment r√©sumer SVG :</p>

<ul>
<li>SVG est un format graphique vectoriel (compos√© de trac√©s et de courbes)</li>
<li>Il est d√©velopp√© et maintenu depuis 1999 par le W3C (standard officiel, open source)</li>
<li>Il est con√ßu en XML (compatible HTML) (on peut le cr√©er et le lire avec un simple √©diteur de texte)</li>
</ul>

<h3>1. Produire le burger bouton en SVG</h3>

<p>Si l'on y regarde de plus pr√®s, une "ic√¥ne Burger" c'est b√™tement trois rectangles horizontaux espac√©s et avec des coins arrondis.</p>

<p><img alt="Un bouton burger sous forme de 3 rectangles" src="https://www.alsacreations.com/xmedia/tuto/burger/01.png" width="200"></p>

<p>Notre √©diteur de code  pr√©f√©r√© est amplement suffisant pour s'aquitter de la t√¢che de dessiner des rectangles&nbsp;: on va tout d'abord dessiner un √©l√©ment SVG vide avec une fen√™tre de "100 x 100". C'est une dimension purement indicative car tout est proportionnel et adaptable en SVG.</p>

<pre><code class="language-xml">&lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
&lt;/svg&gt;
</code></pre>

<pre><code class="language-css">.burger-icon {
  width: 200px; height: 200px; /* taille du SVG */
  border: 2px dotted #ddd; /* bordure = simple rep√®re */
}
</code></pre>

<p><img alt="Notre canevas vide" src="https://www.alsacreations.com/xmedia/tuto/burger/02.png" width="200"></p>

<p>Le trac√© de notre premier rectangle est un jeu d'enfant aussi&nbsp;: l'√©l√©ment SVG <code>rect</code> est fait pour √ßa, attribuons-lui des coordonn√©es (<code>x=0</code> et <code>y=0</code>) ainsi qu'une largeur de "100" et une hauteur de "20".</p>

<pre><code class="language-xml">&lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
  &lt;rect x="0" y="0" width="100" height="20" /&gt;
&lt;/svg&gt;
</code></pre>

<p><img alt="Notre premier rectangle" src="https://www.alsacreations.com/xmedia/tuto/burger/03.png" width="200"></p>

<p>Vous aurez compris qu'√† partir d'un premier rectangle, il n'est pas difficile de produire les deux suivants. <em>Et voil√† !</em></p>

<pre><code class="language-xml">&lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
  &lt;rect x="0" y="0" width="100" height="20" /&gt;
  &lt;rect x="0" y="40" width="100" height="20" /&gt;
  &lt;rect x="0" y="80" width="100" height="20" /&gt;
&lt;/svg&gt;
</code></pre>

<p><img alt="Nos 3 rectangles" src="https://www.alsacreations.com/xmedia/tuto/burger/04.png" width="200"></p>

<p>Pour ce qui est des coins arrondis, l√† aussi SVG a tout pr√©vu sous la forme de l'attribut <code>rx</code>, √† qui une valeur de "5" semble tout √† fait parfaite.</p>

<pre><code class="language-xml">&lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
  &lt;rect x="0" y="0" width="100" height="20" rx="5" /&gt;
  &lt;rect x="0" y="40" width="100" height="20" rx="5" /&gt;
  &lt;rect x="0" y="80" width="100" height="20" rx="5" /&gt;
&lt;/svg&gt;
</code></pre>

<p><img alt="Nos 3 rectangles arrondis" src="https://www.alsacreations.com/xmedia/tuto/burger/05.png" width="200"></p>

<p>Le r√©sultat est bluffant et on se rend compte de la puissance insoup√ßonn√©e d'un √©diteur de code. Plus s√©rieusement, ce n'√©tait vraiment pas compliqu√©, non&nbsp;?</p>

<p>Par contre, ce qui est vraiment dommage c'est de r√©p√©ter les m√™mes choses plusieurs fois&hellip;</p>

<p>Mais justement, il se trouve que&hellip; la plupart des attributs SVG existent √©galement sous forme de propri√©t√©s CSS&nbsp;! Voici par cons√©quent comment nous allons pouvoir am√©liorer notre code actuel&nbsp;:</p>

<pre><code class="language-xml">&lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
  &lt;rect class="rect-1" /&gt;
  &lt;rect class="rect-2" /&gt;
  &lt;rect class="rect-3" /&gt;
&lt;/svg&gt;
</code></pre>

<pre><code class="language-css">rect {
  x: 0;
  rx: 5px;
  width: 100px;
  height: 20px;
}
.rect-1 {
  y: 0;
}
.rect-2 {
  y: 40px;
}
.rect-3 {
  y: 80px;
}
</code></pre>

<p>Autre avantage loin d'√™tre anodin, ces propri√©t√©s CSS-SVG ont la bonne id√©e d'√™tre animables : on peut par exemple effectuer une <code>transition</code> sur la propri√©t√©&hellip; <code>y</code>&nbsp;!</p>

<pre><code class="language-css">rect {
  ...
  transition: y 1s;
}
.rect-1:hover {
  y: 15px;
}
</code></pre>

<div style="text-align: center">
  <video controls autoplay width="250">
    <source src="https://www.alsacreations.com/xmedia/tuto/burger/06.mp4" type="video/mp4" >
  </video>
</div>

<h3>2. Pr√©parer le SVG et le rendre accessible</h3>

<p>Nous allons √† pr√©sent nous atteler √† transformer notre ic√¥ne SVG en un v√©ritable "bouton Burger", fonctionnel et accessible.</p>

<p>Pour ce faire, on commence par placer le SVG dans un <code>&lt;button&gt;</code> qui sera l'√©l√©ment interactif au clic / touch et qui d√©clenchera l'animation.</p>

<pre><code class="language-xml">&lt;button class="burger-button"&gt;
  &lt;svg class="burger-icon" viewBox="0 0 100 100"&gt;
    &lt;rect class="rect-1" /&gt;
    &lt;rect class="rect-2" /&gt;
    &lt;rect class="rect-3" /&gt;
  &lt;/svg&gt;
&lt;/button&gt;
</code></pre>

<p>Notre ic√¥ne SVG est consid√©r√©e comme purement d√©corative, car c'est le bouton qui portera l'information. Nous veillons √† lui appliquer les attributs suivants&nbsp;:</p>

<ul>
<li>Un attribut <code>aria-hidden="true"</code></li>
<li>Un attribut <code>focusable="false"</code> pour √©viter de naviguer au sein du SVG.</li>
<li>Aucun √©l√©ment <code>&lt;title&gt;</code> ni <code>&lt;desc&gt;</code> ni d'attribut <code>title</code>, <code>aria-label</code>, <code>aria-labelledby</code>, ni <code>role="img"</code></li>
</ul>

<pre><code class="language-xml">...
  &lt;svg class="burger-icon" aria-hidden="true" focusable="false" viewBox="0 0 100 100"&gt;
  &lt;/svg&gt;
...
</code></pre>

<p>Le bouton, quant √† lui, n√©cessite les √©l√©ments suivants&nbsp;:</p>

<ul>
<li>Un nom accessible (via <code>aria-label</code> ou un texte masqu√© √† la ".sr-only")</li>
<li>En option, et selon les cas de figure, un attribut <code>aria-controls</code> pour lier √† la cible et un attribut <code>aria-expanded</code> pour signaler l'√©tat du bouton. Dans notre cas, ce n'est pas n√©cessaire.</li>
</ul>

<pre><code class="language-xml">&lt;button class="burger-button" aria-label="Menu" data-expanded="false"&gt;
 ...
&lt;/button&gt;
</code></pre>

<p>Voici le script JavaScript destin√© √† g√©rer l'interaction et la mise √† jour des attributs <code>data-</code>, et d√©clencher l'animation de l'ic√¥ne&nbsp;:</p>

<pre><code class="language-js">(function () {
  function toggleNav() {
    // Define targets
    const button = document.querySelector('.burger-button');
    const target = document.querySelector('#navigation');

    button.addEventListener('click', () =&gt; {
      const currentState = target.getAttribute("data-state");

      if (!currentState || currentState === "closed") {
        target.setAttribute("data-state", "opened");
        button.setAttribute("data-expanded", "true");
      } else {
        target.setAttribute("data-state", "closed");
        button.setAttribute("data-expanded", "false");
      }

    });
  } // end toggleNav()

  toggleNav();
}());
</code></pre>

<h4><code>aria-expanded</code> ou non ?</h4>

<p>L'utilisation de <code>aria-expanded</code> sur un bouton n'est pas syst√©matique, dans le cas d'un menu tout d√©pend de comment celui-ci va s'ouvrir&nbsp;:</p>

<ul>
<li>S'il s'agit d'une modale par exemple (donc si tout le reste doit devenir <code>inert</code>), alors le bouton reste un bouton simple, pas d'<code>aria-expanded</code>.</li>
<li>S'il s'agit d'un menu d√©roulant, alors oui il faudra un attribut <code>aria-expanded.</code>.</li>
</ul>

<h3>3. Les √©tapes de l'animation</h3>

<p><img alt="Les 3 √©tapes pr√©vues pour l'animation" src="https://www.alsacreations.com/xmedia/tuto/burger/group01.png"></p>

<p class="info">
Pour √™tre tr√®s pr√©cis, nous n'allons pas employer une "animation" pour nos effets, mais une combinaison de trois "transitions", qui se r√©v√®leront amplement suffisantes pour notre besoin.
</p>

<p>Voici le sc√©nario √©tape par √©tape qui doit se r√©aliser&nbsp;:</p>

<ol>
<li>L'action de clic ou de touch sur l'√©l√©ment <code>button</code> doit d√©clencher une s√©rie de trois transitions;</li>
<li>La transition 1 consiste en un d√©placement vertical de <code>.rect-1</code> et <code>.rect-3</code> qui se rejoignent au centre du SVG;</li>
<li>La transition 2 consiste √† faire dispara√Ætre <code>.rect-2</code> qui tra√Æne dans nos pattes. En terme de timing, cette transition doit se d√©rouler en m√™me temps que la transition 1;</li>
<li>La transition 3 se compose d'une rotation de 45 degr√©s de <code>.rect-1</code> et <code>.rect-3</code> et doit de d√©clencher juste apr√®s les transitions pr√©c√©dentes).</li>
</ol>

<h4>Transition 1 et 2 : "translate" et "opacity"</h4>

<p>La propri√©t√© <code>transition</code>est appliqu√©e sur l'√©l√©ment √† l'√©tat initial (hors √©v√©nement) afin d'assurer une transition au retour lorsque l'√©v√©nement est quitt√©.</p>

<pre><code class="language-css">/* transition sur la propri√©t√© y et opacity, dur√©e 0.3s */
rect {
  transition: 
    y 0.3s,
    opacity 0.3s;
}

/* coordonn√©es y initiales */
.rect-1 {
  y: 0;
}
.rect-2 {
  y: 40px;
}
.rect-3 {
  y: 80px;
}
</code></pre>

<p>Au clic, le bouton passe en <code>data-expanded "true"</code> et on d√©place verticalement deux rectangles au centre et on masque le 3e rectangle central.</p>

<pre><code class="language-css">[data-expanded="true"] .rect-1 {
  y: 40px;
}
[data-expanded="true"] .rect-2 {
  opacity: 0;
}
[data-expanded="true"] .rect-3 {
  y: 40px;
}
</code></pre>

<h4>Transition 3 : "rotate"</h4>

<p>Aux deux transitions pr√©c√©dentes, on ajoute une transition sur la propri√©t√© <code>rotate</code> sans oublier de la faire d√©buter apr√®s un l√©ger d√©lai.</p>

<pre><code class="language-css">/* on attend un delai de 0.3s avant de commencer rotate */
rect {
  transition: 
    y 0.3s,
    opacity 0.3s,
    rotate 0.3s 0.3s;
}
</code></pre>

<p>Au clic, les trois transitions se d√©clenchent.</p>

<pre><code class="language-css">[data-expanded="true"] .rect-1 {
  y: 40px;
  rotate: 45deg;
}
[data-expanded="true"] .rect-2 {
  opacity: 0;
}
[data-expanded="true"] .rect-3 {
  y: 40px;
  rotate: -45deg;
}
</code></pre>

<div style="text-align: center">
  <video controls autoplay width="250">
    <source src="https://www.alsacreations.com/xmedia/tuto/burger/07.mp4" type="video/mp4" >
  </video>
</div>

<p>‚ö†Ô∏è J'imagine que cela ne vous a pas √©chapp√© : tout se passe tr√®s bien √† l'aller, mais malheureusement pas au retour. L'explication provient du fait que la transition se d√©roule dans le sens inverse au retour et que la rotation se d√©clenche trop t√¥t. Il va nous falloir une transition diff√©rente √† l'aller et au retour et g√©rer des d√©lais diff√©rents entre la transition et la rotation.</p>

<pre><code class="language-css">/* transition au retour (quand on perd le clic) */
/* on attend un delai de 0.3s avant de commencer y */
rect {
  transition: 
    y 0.3s 0.3s,
    opacity 0.3s,
    rotate 0.3s;
}
</code></pre>

<pre><code class="language-css">/* transition √† l'aller (quand on clique) */
/* on attend un delai de 0.3s avant de commencer rotate */
[data-expanded="true"] rect {
  transition: 
    y 0.3s,
    opacity 0.3s,
    rotate 0.3s 0.3s;
}
</code></pre>

<div style="text-align: center">
  <video controls autoplay width="250">
    <source src="https://www.alsacreations.com/xmedia/tuto/burger/08.mp4" type="video/mp4" >
  </video>
</div>

<p>Gr√¢ce √† cette adaptation subtile, notre effet fonctionne parfaitement √† l'aller et au retour lors de l'interaction.</p>

<p>Pour finir en beaut√©, le truc en plus consiste en une petite acc√©l√©ration sous forme de <code>cubic-bezier</code> pour un effet de "rebond".</p>

<pre><code class="language-css">[data-expanded="true"] rect {
  transition: 
    y 0.3s,
    opacity 0.3s,
    rotate 0.3s 0.3s cubic-bezier(.55,-0.65,0,2.32);
}
</code></pre>

<div style="text-align: center">
  <video controls autoplay width="250">
    <source src="https://www.alsacreations.com/xmedia/tuto/burger/09.mp4" type="video/mp4" >
  </video>
</div>

<h2>CSS final</h2>

<p>Voici les styles CSS complets de ce tutoriel.</p>

<p>Notez qu'ils prennent en compte les pr√©f√©rences utilisateur gr√¢ce au media query <code>prefers-reduced-motion</code>&nbsp;: si la personne a choisi dans ses r√©glages syst√®me de r√©duire les animations, celles-ci ne seront tout simplement pas d√©clench√©es.</p>

<p>Pour voir le r√©sultat et aller plus loin, une petite collection CodePen de boutons burger anim√©s a √©t√© rassembl√©e √† cette adresse&nbsp;: <a href="https://codepen.io/collection/VYqwJK">https://codepen.io/collection/VYqwJK</a></p>

<pre><code class="language-css">.rect-1 {
  y: 0;
}
.rect-2 {
  y: 40px;
}
.rect-3 {
  y: 80px;
}

[data-expanded="true"] .rect-1 {
  y: 40px;
  rotate: 45deg;
}
[data-expanded="true"] .rect-2 {
  opacity: 0;
}
[data-expanded="true"] .rect-3 {
  y: 40px;
  rotate: -45deg;
}

/* transitions si accept√©es */
@media (prefers-reduced-motion: no-preference) {
  rect {
    transition: 
      y 0.3s 0.3s,
      opacity 0.3s,
      rotate 0.3s;
  }
  [data-expanded="true"] rect {
    transition: 
      y 0.3s,
      opacity 0.3s,
      rotate 0.3s 0.3s cubic-bezier(.55,-0.65,0,2.32);
  }
}
</code></pre>
<p><b><a href="https://www.alsacreations.com/tuto/lire/1921-Animer-un-bouton-burger-simple-avec-SVG-et-CSS.html">Retrouvez l'int√©gralit√© de ce tutoriel en ligne sur Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2023-12-19T13:37:07+01:00</dc:date>
  	<dc:creator>Raphael</dc:creator>
	</item>

  
	<item>
  	<title>Actualit√© : Les easter eggs sur le web</title>
  	<link>https://www.alsacreations.com/actu/lire/1917-Les-easter-eggs-sur-le-web.html</link>
  	<guid>https://www.alsacreations.com/actu/lire/1917-Les-easter-eggs-sur-le-web.html</guid>
  	<description><![CDATA[<p><em>Article r√©dig√© suite √† un stage d'observation dans l'√©quipe d'Alsacr√©ations</em></p>

<p>Lorsque l'on consulte un site web, nous pouvons tous voir le code source (avec <kbd>ctrl</kbd> + <kbd>U</kbd> ¬ª ou en faisant un clic droit puis <em>inspecter</em>).</p>

<p>Quelques sites en profitent pour dissimuler des <i lang="en">easter eggs</i> le plus souvent sous la forme d'<a href="https://fr.wikipedia.org/wiki/Art_ASCII">art ASCII</a> ou de messages √† demi-cach√©s, que ce soit en HTML, JavaScript, ou CSS. Ces messages sont soit des petits clins d'oeil √† destination d'autres personnes curieuses ou pratiquant le d√©veloppement web, soit intentionnels pour mentionner des liens vers des pages de recrutement, des avertissements ou des ressources vari√©es.</p>

<p>Voyons quelques exemples de diff√©rentes natures, en mettant de c√¥t√© ceux qu'affichent les moteurs de recherche tels que Google avec des mots cl√©s sp√©cifiques (ex: cherchez "anagramme" ou "Askew").</p>

<h2>HTML</h2>

<p><a href="mozilla.org">Mozilla</a> a plac√© dans son code un "godzilla" crachant du feu sur le logo, assorti d'un message :</p>

<blockquote>
  <p>Bonjour, enchant√© !
  Int√©ress√© d‚Äôavoir un impact direct sur des centaines de millions d‚Äôutilisateurs ? Rejoins Mozilla, et viens faire partie de la communaut√© qui aide √† construire un meilleur avenir pour le web.
  Visitez ‚Ä¶ pour en apprendre plus sur les emplois disponibles.
  Visitez ‚Ä¶ pour plus de fa√ßons de s'impliquer et aider √† supporter Mozilla</p>
</blockquote>

<pre><code class="language-text">             _.-~-.
           7''  Q..\
        _7         (_
      _7  _/    _q.  /
    _7 . ___  /VVvv-'_                                            .
   7/ / /~- \_\\      '-._     .-'                      /       //
  ./ ( /-~-/||'=.__  '::. '-~'' {             ___   /  //     ./{
 V   V-~-~| ||   __''_   ':::.   ''~-~.___.-'' _/  // / {_   /  {  /
  VV/-~-~-|/ \ .'__'. '.    '::                     _ _ _        ''.
  / /~~~~||VVV/ /  \ )  \        _ __ ___   ___ ___(_) | | __ _   .::'
 / (~-~-~\\.-' /    \'   \::::. | '_ ` _ \ / _ \_  / | | |/ _` | :::'
/..\    /..\__/      '     '::: | | | | | | (_) / /| | | | (_| | ::'
vVVv    vVVv                 ': |_| |_| |_|\___/___|_|_|_|\__,_| ''

Hi there, nice to meet you!
Interested in having a direct impact on hundreds of millions of users? Join
Mozilla, and become part of a global community that‚Äôs helping to build a
brighter future for the Web.

Visit https://www.mozilla.org/careers to learn about our current job openings.
Visit https://www.mozilla.org/contribute for more ways to get involved and
help support Mozilla.
</code></pre>

<p>Sur la page d'accueil de <a href="https://www.amazon.fr">Amazon</a>, vous trouverez tout en bas de la page de code, un canard qui dit <em>Meow</em>. Sympa non ?</p>

<pre><code class="language-text">       .__(.)&lt; (MEOW)
        \___)   
 ~~~~~~~~~~~~~~~~~~
</code></pre>

<p>Sur <a href="https://theoatmeal.com/">theoatmeal</a> se cache un gigantesque pt√©rodactyle, √† vous de le trouver.</p>

<p>Vous pourrez √©galement trouver le logo de l‚Äô<a href="https://umich.edu/">Universit√© du Michigan</a> dans leur code source :</p>

<pre><code class="language-text">&lt;!--
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMM             MMMMMMMMMMMMMMMMM             MMMMMMMMM
MMMMMMMM              MMMMMMMMMMMMMMM              MMMMMMMMM
MMMMMMMM                MMMMMMMMMMM                MMMMMMMMM
MMMMMMMM                 MMMMMMMMM                 MMMMMMMMM
MMMMMMMM                  MMMMMMM                  MMMMMMMMM
MMMMMMMMMMMM               MMMMM                MMMMMMMMMMMM
MMMMMMMMMMMM                MMM                 MMMMMMMMMMMM
MMMMMMMMMMMM                 V                  MMMMMMMMMMMM
MMMMMMMMMMMM                                    MMMMMMMMMMMM
MMMMMMMMMMMM         ^               ^          MMMMMMMMMMMM
MMMMMMMMMMMM         MM             MM          MMMMMMMMMMMM
MMMMMMMMMMMM         MMMM         MMMM          MMMMMMMMMMMM
MMMMMMMMMMMM         MMMMM       MMMMM          MMMMMMMMMMMM
MMMMMMMMMMMM         MMMMMM     MMMMMM          MMMMMMMMMMMM
MMMMMMMM                MMMM   MMMM                MMMMMMMMM
MMMMMMMM                MMMMMVMMMMM                MMMMMMMMM
MMMMMMMM                MMMMMMMMMMM                MMMMMMMMM
MMMMMMMM                MMMMMMMMMMM                MMMMMMMMM
MMMMMMMM                MMMMMMMMMMM                MMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM
--&gt;
</code></pre>

<p>Quelques marques comme KitKat ou Coca-Cola avaient aussi opt√© pour cet art cach√©, mais les ont supprim√©s depuis des refontes r√©centes.</p>

<p>Si vous souhaitez vous aussi ajouter un <i lang="en">easter egg</i> tel quel dans votre code, il y a une mani√®re tr√®s simple de le faire : utiliser les commentaires HTML entre <code>&lt;!--</code> et finissant par <code>--&gt;</code>. Tout ce qui est plac√© entre n'est pas interpr√©t√© par le navigateur. Vous trouverez aussi de nombreux sites vous permettant de g√©n√©rer de l'art avec les caract√®res.</p>

<h2>Code Konami</h2>

<p>Le <a href="https://fr.wikipedia.org/wiki/Code_Konami">Code Konami</a> quant √† lui correspond √† une combinaison de touches successives, venant initialement d'un code de triche de jeu vid√©o : ¬´ Haut Haut Bas Bas Gauche Droite Gauche Droite B A ¬ª. Vous pouvez essayer cette commande sur :</p>

<ul>
<li>Le site de <a href="https://www.ldlc.com/">Ldlc</a> : La page va se retourner</li>
<li>La page du billet de 10 dollars de la <a href="https://www.banqueducanada.ca/billets/series-de-billets-de-banque/billets-commemoratifs/billet150/">Banque du Canada</a> : l'hymne national survient avec une pluie de billets</li>
<li>La page 404 de <a href="https://discord.com/a">Discord</a> : Un jeu snake va se lancer</li>
</ul>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1698488376-discord-snake.png" alt="Discord Snake" title="" data-img_id="3435"></p>

<p>Un petit script <a href="https://github.com/georgemandis/konami-js">konami-js</a> vous premet de l'ajouter facilement.</p>

<h2>robots.txt, humans.txt</h2>

<p>Les fichiers <code>robots.txt</code> sont connus pour √™tre plac√©s √† la racine d'un site pour interdire le r√©f√©rencement de certaines portions aux robots d'indexation. Ces derniers peuvent contenir des commentaires, donc de l'ascii art. Notez par exemple celui de <a href="https://alsacreations.com/robots.txt">alsacreations.com</a> ;)</p>

<p>Plus r√©cemment pens√©s, les fichiers <a href="https://humanstxt.org/FR">humans.txt</a> d√©crivent les personnes "humaines" ayant contribu√© √† un projet et sont un espace totalement libre pour y dissimuler (aussi) des <i lang="en">easter eggs</i>. Par exemple :</p>

<ul>
<li>Celui de <a href="https://www.google.com/humans.txt">Google</a> basique mais efficace</li>
<li>Celui de <a href="https://html5boilerplate.com/humans.txt">html5boilerplate.com</a></li>
<li>Celui de <a href="https://discord.com/humans.txt">Discord</a> tr√®s artistique</li>
</ul>

<pre><code class="language-text">     ..-:\oo-.    .:oo/:-.
    -oooooooooooooooooooooo.                            __                                                          ___
   -oooooooooooooooooooooooo.           OOOOOOOOO:-.   `MM`     _.._        _.._        _.._     ____  _       _.   OOO.
  -oooooooooooooooooooooooooo.          OOOOOOOOOOOo:        -/ooo-ooo.  -/OOOOOO/.  :/OOOOOO:.  OOOO.oOo: .:oOOOO-.OOO.
 `ooooooo/--/oooooo:--/ooooooo          OOOO    `OOOO `OooI `ooo:.    ` /oOO/```-:..oOOO-``\OOO: OOOO/` ``.oOOO/```\OOO.
 :oooooo-    :oooo-    :oooooo-         OOOO    .OOOo `OOOI  `-OOOOOOo.`OOOO.      -OOO:   .OOOo OOOO.    -OOOO`   /OOO.
 ooooooo:-  -/oooo:-  -/oooooo/         OOOOooooOooo- `OOOI  ._   `]OO/ :OOOOoooOO.`OOOOOooOOOO- OOOO.    `/OOOOooOOOOO.
 ooooooooo//oooooooo//ooooooooo         OOOOOOOOO:-`  `OOOI  `:OOoOO:-`  `-:OOOO:-`  `-:OOOO:-`  OOOO.     `-:OOO:-`OOO.
 ooooooo/ooooooooooooo//oooooo/
 `.:ooooo/``.------.`.\oooo/:.
     `.-:`            .:-.`

  https://discord.com/company
</code></pre>

<h2>Console</h2>

<p>La console JavaScript du navigateur peut r√©v√©ler des messages, une fois ouverte (par F12 ou Ctrl+Shift+I). C'est un outil typique √† destination des d√©veloppeuses et d√©veloppeurs, on y retrouve non seulement des erreurs ;) mais aussi parfois des messages de bienvenue ou encore d'avertissement comme Discord qui est assez explicite :</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1698488248-console-discord.png" alt="console sur discord.com" title="" data-img_id="3434"></p>

<h2>√Ä vous !</h2>

<p>Prenez quelques instants pour ajouter √† vos projets et sites ces petits messages cach√©s. Et pr√©cisez en commentaires si vous connaissez d'autres sites avec de telles astuces !</p>
<p><b><a href="https://www.alsacreations.com/actu/lire/1917-Les-easter-eggs-sur-le-web.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>HTML</category>
  	<dc:date>2023-12-04T13:18:36+01:00</dc:date>
  	<dc:creator>Elise_Hamm</dc:creator>
	</item>

  
	<item>
  	<title>Astuce : Choisir entre balance et pretty pour text&#45;wrap</title>
  	<link>https://www.alsacreations.com/astuce/lire/1920-Choisir-entre-balance-et-pretty-pour-text-wrap.html</link>
  	<guid>https://www.alsacreations.com/astuce/lire/1920-Choisir-entre-balance-et-pretty-pour-text-wrap.html</guid>
  	<description><![CDATA[<p>La propri√©t√© CSS <code>text-wrap</code> issue de <a href="https://www.w3.org/TR/css-text-4/#text-wrap">CSS Text Module Level 4</a> permet de contr√¥ler la fa√ßon dont le texte est envelopp√© et r√©parti dans un conteneur.</p>

<p>Elle poss√®de deux nouvelles valeurs : <code>pretty</code> et <code>balance</code>, en plus des valeurs plus traditionnelles et historiques <code>wrap</code> (qui est le d√©faut : un retour √† la ligne) et <code>nowrap</code> (pas de retour √† la ligne, √ßa d√©borde).</p>

<p>Il s'agit de remplacer des astuces pr√©c√©demment mises en oeuvre par l'interm√©diaire de JavaScript qui appliquaient des modifications de style, esth√©tiques, calcul√©es en fonction de l'espace disponible et du l'espace occup√© par le texte.</p>

<p>Pour la compatibilit√©, r√©f√©rez-vous bien entendu √† Can I Use <a href="https://caniuse.com/mdn-css_properties_text-wrap">https://caniuse.com/mdn-css_properties_text-wrap</a> sachant qu'√† ce jour Chrome/Chromium le supporte depuis la version 114, <a href="https://webkit.org/blog/14769/release-notes-for-safari-technology-preview-183/">Safari vient de l'ajouter</a> et il manque encore la valeur pretty √† Firefox.</p>

<h2>text-wrap: balance</h2>

<p>La valeur <code>balance</code> est utilis√©e pour √©quilibrer le nombre de lignes de texte dans un conteneur lorsqu'il y a un retour √† la ligne. Cela peut √™tre tr√®s utile pour les titres et les sous-titres afin de ne pas parvenir lorsque le texte est centr√© (mais pas seulement) √† se retrouver avec un ou deux mots sur la derni√®re ligne tandis que la premi√®re occupe toute la largeur du bloc de texte.</p>

<pre><code class="language-html">&lt;h1&gt;
  Ceci est un texte un peu long mais tant pis
&lt;/h1&gt;
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1700755167-title-nobalance.png" alt="Titre sans text-wrap balance" title="" data-img_id="3438"></p>

<p>Avec <code>text-wrap: balance</code> un certain √©quilibre est pr√©serv√© entre les lignes.</p>

<pre><code class="language-html">&lt;h1 class="balance"&gt;
  Ceci est un texte un peu long mais tant pis
&lt;/h1&gt;
</code></pre>

<pre><code class="language-css">.balance {
  text-wrap: balance;
}
</code></pre>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1700755180-title-balance.png" alt="Titre avec text-wrap: balance" title="" data-img_id="3439"></p>

<p>Il est d√©conseill√© de l‚Äôutiliser pour les grands paragraphes car cela peut entra√Æner une perte de performance, le navigateur ayant besoin d'effectuer plus de calculs que d'habitude.</p>

<h2>text-wrap: pretty</h2>

<p>La valeur <code>pretty</code>, quant √† elle, est utilis√©e pour √©viter les orphelins et surtout √† la fin de longs blocs de texte, c‚Äôest-√†-dire les mots seuls sur une ligne, ou les signes de ponctuation tels que "?" et "!".</p>

<p><em>(Ci-dessous un exemple de texte affich√© sur plusieurs colonnes, et o√π <code>text-wrap: pretty</code> n'est <strong>pas</strong> appliqu√©)</em></p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1700755508-p-pretty.png" alt="Paragraphe sans text-wrap pretty " title="" data-img_id="3441"></p>

<p>On ne verra pas son effet dans le cas pr√©c√©dent sur des titres qui ne comportent pas assez de mots. Cette valeur est donc plus adapt√©e aux paragraphes de texte.</p>

<p><em>(Ci-dessous un exemple o√π <code>text-wrap: pretty</code> est appliqu√©)</em></p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1700755500-p-no-pretty.png" alt="Paragraphe avec text-wrap pretty" title="" data-img_id="3440"></p>

<p>Avec le code suivant</p>

<pre><code class="language-html">&lt;div class="pretty"&gt;
  &lt;p&gt;Lorem Elsass ipsum Chulia¬†Roberstau ornare sit libero, pellentesque turpis, schnaps Pellentesque Salut¬†bisamme Wurschtsalad libero, dignissim amet mamsell condimentum tellus knepfle lacus Racing. Miss¬†Dahlias Yo¬†d√ª. hopla picon¬†bi√®re Mauris flammekueche kuglopf placerat Sp√§tzle non Morbi Oberschaeffolsheim sed eleifend rhoncus adipiscing merci¬†vielmols salu jetz¬†gehts¬†los auctor, Kabinetpapier sed Huguette tristique Christkindelsm√§rik bredele vulputate tellus rossbolla r√∂sti hopla¬†! 
&lt;/p&gt;
</code></pre>

<pre><code class="language-css">.pretty {
  columns: 2;
  max-width: 700px
  text-wrap: pretty;
}
</code></pre>
<p><b><a href="https://www.alsacreations.com/astuce/lire/1920-Choisir-entre-balance-et-pretty-pour-text-wrap.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2023-11-24T09:30:47+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Astuce : WordPress : associer les taxonomies cat√©gories et √©tiquettes aux Pages</title>
  	<link>https://www.alsacreations.com/astuce/lire/1919-WordPress--associer-les-taxonomies-categories-et-etiquettes-aux-Pages.html</link>
  	<guid>https://www.alsacreations.com/astuce/lire/1919-WordPress--associer-les-taxonomies-categories-et-etiquettes-aux-Pages.html</guid>
  	<description><![CDATA[<p>Le CMS WordPress propose nativement dans sa gestion de contenu des <strong>Articles</strong> (contenus class√©s temporellement par date de publication) et des <strong>Pages</strong>.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/wordpress-logo.png" alt="Wordpress Logo" title="" data-img_id="789"></p>

<p>Ces deux entit√©s sont relativement semblables, mais par d√©faut les Pages manquent de fonctionnalit√©s pourtant propos√©es avec les Articles :</p>

<ul>
<li>les <strong>Cat√©gories</strong></li>
<li>les <strong>√âtiquettes</strong> (ou <em>tags</em>)</li>
</ul>

<p>Ces deux m√©thodes de classement sont des <em>taxonomies</em> : les cat√©gories sont hi√©rarchiques tandis que les √©tiquettes sont facultatives et ne sont pas hi√©rarchiques.</p>

<p>Durant le d√©veloppement de votre projet, vous souhaiterez peut √™tre aussi associer ces cat√©gories et √©tiquettes aux Pages pour profiter de leur classification et de toutes les fonctions natives bien pratiques en d√©coulant, comme par exemple lister toutes les pages d'une cat√©gorie, ou toutes les pages reli√©es √† une √©tiquette.</p>

<h2>La solution</h2>

<p>L'extrait de code propos√© peut √™tre ins√©r√© dans le fichier <code>functions.php</code> du th√®me.</p>

<p>WordPress pr√©voit d√©j√† une m√©thode <a href="https://developer.wordpress.org/reference/functions/register_taxonomy_for_object_type/">register_taxonomy_for_object_type</a> pour ajouter une taxonomie existante (cela tombe bien, c'est le cas ici, les cat√©gories et √©tiquettes existent d√©j√†) √† un type d'objet (√† savoir les Pages). Le premier param√®tre sera la taxonomie, <code>category</code> pour les cat√©gories natives et <code>post_tag</code> pour les √©tiquettes natives. Le deuxi√®me param√®tre l'objet concern√© : <code>page</code>, on devine assez ais√©ment pourquoi.</p>

<p>Nous lan√ßons cette action d√®s l'initialisation <code>init</code> du CMS et ajoutons une action compl√©mentaire sur l'√©v√©nement <code>pre_get_posts</code> (sauf dans l'interface d'administration) qui se d√©clenche lorsqu'on pr√©pare une requ√™te mais avant de la lancer. Elle permettra de modifier le fonctionnement initial du CMS pour compl√©ter les boucles et afficher des listes de Pages bas√©es sur les cat√©gories, afin de rendre ce comportement plus proche de celui que l'on a sur les Articles. Ce compl√©ment n'est apport√© que sur les requ√™tes des <em>templates</em> d'archive et de tag d'o√π les tests de l'existence des param√®tres <em>get</em> .</p>

<pre><code class="language-php">&lt;?php

/**
 * Taxonomies (cat√©gories et tags) √©galement associ√©es aux Pages
 */
function register_taxonomies_to_pages() {
    register_taxonomy_for_object_type('category', 'page');
    register_taxonomy_for_object_type('post_tag', 'page');
}
add_action('init', 'register_taxonomies_to_pages');

function category_and_tag_archives($wp_query) {
    if ($wp_query-&gt;get('category_name') || $wp_query-&gt;get('cat') || $wp_query-&gt;get('tag'))
        $wp_query-&gt;set('post_type', array('post','page'));
}
if (!is_admin()) {
    add_action('pre_get_posts', 'category_and_tag_archives');
}
</code></pre>

<p>Cons√©quence, nous pouvons d√©sormais g√©rer ces taxonomies dans les Pages :</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1699029583-wordpress-taxonomies-pages.png" alt="WordPress taxonomies √©tiquettes et cat√©gories dans Pages" title="" data-img_id="3436"></p>

<p>Bon d√©veloppement !</p>
<p><b><a href="https://www.alsacreations.com/astuce/lire/1919-WordPress--associer-les-taxonomies-categories-et-etiquettes-aux-Pages.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>D√©veloppement</category>
  	<dc:date>2023-11-06T13:37:50+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : Qu&apos;est&#45;ce qu&apos;un type MIME ?</title>
  	<link>https://www.alsacreations.com/article/lire/1918-Qu-est-ce-qu-un-type-MIME.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1918-Qu-est-ce-qu-un-type-MIME.html</guid>
  	<description><![CDATA[<p>Un <strong>type MIME</strong> est un m√©canisme utilis√© pour indiquer le type de contenu d'un fichier transmis sur Internet (et ce de multiples fa√ßons), √† l'aide d'un format tr√®s simple : <code>type/sous-type</code>.</p>

<figure>

<img src="https://www.alsacreations.com/xmedia/doc/original/1697058408-type-mime.jpg" data-img_id="3430">

<figcaption>Un type qui mime.</figcaption>
</figure>

<p>Historiquement, MIME signifie <i lang="en">Multipurpose Internet Mail Extensions</i>, et provient donc du monde de l'e-mail. Mais on le retrouve partout sur le web, et en particulier avec le protocole HTTP qui fait fonctionner la navigation de tous les jours.</p>

<p>Parmi les exemples les plus c√©l√®bres :</p>

<table>
<thead>
<tr>
  <th>Type MIME</th>
  <th>Format de fichier</th>
</tr>
</thead>
<tbody>
<tr>
  <td>text/plain</td>
  <td>Texte simple</td>
</tr>
<tr>
  <td>text/html</td>
  <td>Document HTML</td>
</tr>
<tr>
  <td>image/gif</td>
  <td>Image GIF</td>
</tr>
<tr>
  <td>image/png</td>
  <td>Image PNG</td>
</tr>
<tr>
  <td>image/jpeg</td>
  <td>Image JPEG</td>
</tr>
<tr>
  <td>image/svg+xml</td>
  <td>Image SVG</td>
</tr>
<tr>
  <td>audio/mp3</td>
  <td>Son MP3</td>
</tr>
<tr>
  <td>video/mp4</td>
  <td>Vid√©o MP4</td>
</tr>
<tr>
  <td>application/javascript</td>
  <td>Code JavaScript</td>
</tr>
<tr>
  <td>application/json</td>
  <td>JSON</td>
</tr>
<tr>
  <td>application/pdf</td>
  <td>Document PDF</td>
</tr>
<tr>
  <td>font/woff</td>
  <td>Police WOFF</td>
</tr>
<tr>
  <td>font/woff2</td>
  <td>Police WOFF v2</td>
</tr>
<tr>
  <td>application/vnd.ms-excel</td>
  <td>Microsoft Excel</td>
</tr>
<tr>
  <td>application/x-7z-compressed</td>
  <td>Compression au format 7zip</td>
</tr>
</tbody>
</table>

<p>Et ainsi de suite : vous saisissez le concept. Une <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">liste assez impressionnante de types reconnus</a> est tenue √† jour par l'IANA <i lang="en">Internet Assigned Numbers Authority</i>.</p>

<p>Les formats propri√©taires peuvent √™tre pr√©fix√©s par <code>.vnd</code> comme <i lang="en">vendor</i>, d'autres par <code>x-</code> ce qui permet une certaine libert√© d'invention. Flash s'en souvient avec <code>application/x-shockwave-flash</code>.</p>

<p>On peut aussi ajouter une pr√©cision suppl√©mentaire sur l'encodage <code>text/html; charset=UTF-8</code> pour un document HTML en UTF-8, ou <code>video/ogg; codecs="theora, vorbis"</code> pour de la vid√©o dont le conteneur est Ogg et dont les codecs internes sont Theora pour la vid√©o combin√© √† Vorbis pour l'audio. Cela engendre une grande possibilit√© de tests et de combinaisons : <a href="https://cconcolato.github.io/media-mime-support/">https://cconcolato.github.io/media-mime-support/</a>. En JavaScript, la m√©thode <code>canPlayType()</code> qui √©quipe les √©l√©ments m√©dia (<code>audio</code>, <code>video</code>) indique si le navigateur <i>pourrait</i> d√©coder le format qui lui est propos√©.</p>

<p>Lorsqu'un type est inconnu on utilise <code>application/octet-stream</code>, ce qui d'un point de vue navigateur web va simplement d√©clencher un t√©l√©chargement brut.</p>

<h2>Pourquoi ?</h2>

<p>Annoncer un type de contenu est important pour permettre au programme devant le recevoir (ex: le navigateur) de bien savoir s'il est en mesure d'en faire quelque chose d'utile : l'afficher de mani√®re brute, ou le passer au module ad√©quat, par exemple une biblioth√®que de d√©codage d'image PNG pour une image PNG, la biblioth√®que ffmpeg pour les vid√©os, etc. On ne se fie donc pas √† l'extension du fichier, comme c'est le cas par d√©faut sur la plupart des syst√®mes d'exploitation.</p>

<h2>C√¥t√© navigateur</h2>

<p>Les requ√™tes HTTP contiennent √† la fois, √† l'envoi et √† la r√©ception, des instructions exploitant les types MIME. Vous pouvez les visualiser facilement dans les outils de d√©veloppement (<i>devtools</i>, F12, etc), onglet R√©seau ou <i lang="en">Network</i>.</p>

<h3>Envoi</h3>

<p><strong>√Ä l'envoi</strong> le navigateur annonce au serveur ce qu'il peut reconna√Ætre, parmi autres informations, via l'en-t√™te <code>Accept</code>.</p>

<pre><code class="language-text">GET / HTTP/1.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate, br
Accept-Language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7
</code></pre>

<p>On remarquera aussi dans ce dernier exemple qu'il sait reconna√Ætre des algorithmes de compression (gzip, deflate, brotli), et qu'il indique le code langue pr√©f√©r√©.</p>

<h3>R√©ception</h3>

<p><strong>√Ä la r√©ception</strong>, le navigateur re√ßoit du serveur le type MIME du fichier livr√©, que ce soit pour la page HTML, ses images, ses m√©dias, ses ressources CSS, JavaScript, la totale. Si un type ne correspond pas au contenu r√©el, cela peut engendrer un refus d'interpr√©tation, notamment par mesure de s√©curit√©.</p>

<pre><code class="language-text">HTTP/1.1 200 OK
Server: nginx
Date: Wed, 11 Oct 2023 20:07:36 GMT
Content-Type: text/html; charset=UTF-8
Content-Encoding: gzip
</code></pre>

<h3>S√©curit√© : le MIME √©thique</h3>

<p>Ainsi, on ne se base pas sur l'extension des fichiers qui peut facilement √™tre modifi√©e. Cela fait partie √©galement des directives de s√©curit√© que l'on peut v√©hiculer via HTTP : voir <a href="/article/lire/1723-tour-horizon-https-et-en-tetes-de-securite.html">Tour d‚Äôhorizon sur HTTPS et les en-t√™tes de s√©curit√©</a> avec l'en-t√™te <code>X-Content-Type-Options "nosniff"</code> indiquant au navigateur qu'il ne doit pas essayer de "deviner" un type non indiqu√©.</p>

<p>Le <i lang="en">sniffing</i> et la r√©tro-compatibilit√© ne se font pas au hasard, il existe une sp√©cifiaction pr√©cise et √† jour pour mener √† bien cette op√©ration d√©licate : <a href="https://mimesniff.spec.whatwg.org/">MIME Sniffing</a>.</p>

<p>Ainsi, on pourra y d√©couvrir que pour des raisons historique, JavaScript peut √™tre reconnu par tous les types MIME suivants :</p>

<pre><code class="language-text">application/ecmascript
application/javascript
application/x-ecmascript
application/x-javascript
text/ecmascript
text/javascript
text/javascript1.0
text/javascript1.1
text/javascript1.2
text/javascript1.3
text/javascript1.4
text/javascript1.5
text/jscript
text/livescript
text/x-ecmascript
text/x-javascript
</code></pre>

<p>Ouf.</p>

<h3>Back-end</h3>

<p>L'envoi des en-t√™tes se fait souvent de mani√®re transparente, m√™me lorsqu'on d√©veloppe, par le serveur web car celui-ci est d√©j√† bien configur√© par d√©faut. Sinon, on peut les ajouter ou les modifier gr√¢ce √† la plupart des langages <i lang="en">back-end</i>, tels que PHP et sa fonction <a href="https://www.php.net/manual/fr/function.header.php">header</a> :</p>

<pre><code class="language-php">&lt;?php
header('Content-Type: text/html');
// ...
</code></pre>

<h2>Dans les e-mails</h2>

<p>Puisque c'est du protocole d'√©change d'e-mails qu'est issue cette technique, mentionnons que les codes sources des e-mails (que vous pouvez tr√®s simplement consulter dans votre client de messagerie favori, Ctrl+U dans Mozilla Thunderbird) exposent assez clairement les types MIME par des instructions <code>Content-Type</code>. Tout comme HTTP.</p>

<p>Vous retrouverez ainsi dans les en-t√™tes de d√©but du mail une d√©claration telle que :</p>

<pre><code class="language-text">MIME-Version: 1.0
</code></pre>

<p>Puis √† quelques encablures, annon√ßant la partie en texte brut :</p>

<pre><code class="language-text">Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
</code></pre>

<p>Puis, encore plus loin, l'√©quivalent pour la version mise en forme avec HTML :</p>

<pre><code class="language-text">Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
</code></pre>

<p>Et enfin, en pr√©ambule de chacune des pi√®ces jointes :</p>

<pre><code class="language-text">Content-Type: application/pdf; name="document.pdf"
Content-Disposition: attachment; filename="document.pdf"
Content-Transfer-Encoding: base64
</code></pre>

<p>Suivi de tout le contenu du fichier encod√© en <a href="https://fr.wikipedia.org/wiki/Base64">base64</a>. Basique mais efficace.</p>

<h2>Type compos√© multipart</h2>

<p>Le type <code>multipart/form-data</code> est pens√© pour g√©rer des formulaires web transmettant plusieurs formats de donn√©es simultan√©ment, et notamment lorsqu'il y a un fichier joint pr√©sent par un champ <code>&lt;input type="file"&gt;</code>. Ainsi il faudra d√©clarer le formulaire avec un attribut <code>enctype</code> :</p>

<pre><code class="language-html">&lt;form method="post" enctype="multipart/form-data"&gt;
  &lt;input type="text" name="unchamptexte"&gt;
  &lt;input type="file" name="unfichier"&gt;
  &lt;input type="submit" value="Envoyer"&gt;
&lt;/form&gt;
</code></pre>

<p>(Cet exemple n'est pas exhaustif, volontairement simplifi√© pour l'explication, pensez √† le rendre propre et accessible avec des balises <code>&lt;label&gt;</code>).</p>

<p>Vous pourrez ensuite analyser l'envoi, toujours dans l'onglet R√©seau de vos outils de d√©veloppement, en examinant la requ√™te HTTP. Celle-ci comprendra bien une d√©claration <code>Content-Type: multipart/form-data</code> suivi d'un param√®tre <code>boundary</code> indiquant quelle cha√Æne de caract√®re va s√©parer les diff√©rentes entit√©s empaquet√©es dans la requ√™te.</p>

<pre><code class="language-text">Content-Type: multipart/form-data; boundary=---------------------------xxx
Content-Length: 436

-----------------------------xxx
Content-Disposition: form-data; name="unchamptexte"

Besser e stick Brot im Sack, as e Fedder am Huet.
-----------------------------xxx
Content-Disposition: form-data; name="unfichier"; filename="hopla.txt"
Content-Type: text/plain

Lorem Elsass ipsum dui kuglopf geht's Pellentesque dolor mollis schneck semper so knepfle Pfourtz¬†!
</code></pre>

<p>Le Secret du MIME n'en est plus un d√©sormais !</p>
<p><b><a href="https://www.alsacreations.com/article/lire/1918-Qu-est-ce-qu-un-type-MIME.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>Formats, encodage, XML</category>
  	<dc:date>2023-10-13T09:37:33+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : Adapter et migrer votre ancien site PHP vers PHP8</title>
  	<link>https://www.alsacreations.com/article/lire/1916-Adapter-et-migrer-votre-ancien-site-PHP-vers-PHP8.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1916-Adapter-et-migrer-votre-ancien-site-PHP-vers-PHP8.html</guid>
  	<description><![CDATA[<p>Vous savez d√©j√† s√ªrement que PHP8 est la version actuelle de PHP, et que la branche 7 est officiellement en fin de vie (<em>end of life</em>). La version 8.0 pr√©cis√©ment ne dispose plus que de correctifs de s√©curit√©, il faut en r√©alit√© viser PHP 8.1 et 8.2, respectivement maintenus jusqu'en 2024 et 2025.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1694278969-php-logo.svg" alt="Logo PHP" title="" data-img_id="3425"></p>

<p>De nombreux sites sont encore h√©berg√©s en PHP 7, voire dans de pr√©c√©dentes versions, ce qui peut conduire √† des incompatibilit√©s √† terme, de plus en plus difficiles √† maintenir, et des failles de s√©curit√©.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/1694257186-php-support.png" alt="Calendrier de support PHP" title="" data-img_id="3423"></p>

<p>Les √©volutions vers PHP 8.1 ou 8.2 (et ainsi de suite) seront n√©cessairement plus <em>√©videntes</em> en partant de PHP8. Un saut majeur de la 7 √† la 8 am√®ne des changements plus importants. Il n'est pas possible de pr√©voir et appliquer une seule tactique : cela va d√©pendre de votre base de code actuelle, des d√©pendances utilis√©es, du CMS ou framework s'il y en a un, et surtout du code maison ajout√©.</p>

<h2>Par quoi d√©buter ?</h2>

<p>En premier lieu, la documentation officielle est toujours un bon point de d√©part, avec les guides de migration d'une version √† l'autre. Citons dans le cas pr√©sent <a href="https://www.php.net/migration80">Migration de PHP 7.4.x vers PHP 8.0.x</a>, ainsi que le fichier <a href="https://github.com/php/php-src/blob/PHP-8.0/UPGRADING">UPGRADING</a> sur le repo GitHub de PHP.</p>

<p>Le but ici est de pouvoir estimer les grandes phases, la faisabilit√© : savoir si en l'√©tat votre projet est concern√© et quel sera le temps n√©cessaire d'adaptation. S'agit-il de quelques correctifs mineurs et syntaxiques, ou d'une obligation de revoir l'architecture globale ?</p>

<h2>Quels bugs peuvent surgir ?</h2>

<p>PHP devenant plus "strict" au fur et √† mesure des versions, les premi√®res erreurs ou les premiers avertissements qui peuvent survenir √† l'ex√©cution vont concerner la syntaxe, l'appel de fonctions, le typage de variables ou l'usage de valeurs ind√©finies, les mots cl√©s, notamment :</p>

<ul>
<li>PHP8 a ajout√© des erreurs de type <code>Uncaught Error</code> qui auparavant provoquaient des avertissements ou des erreurs fatales : par exemple, en appelant une m√©thode sur une valeur null.</li>
<li>Les erreurs <code>TypeError</code> sont plus strictes : en appelant une fonction avec des arguments de type incorrect, cela peut entra√Æner une erreur de cette sorte, par exemple pour les fonctions de manipulation de texte qui s'attendent √† recevoir en param√®tre un string qui aurait en r√©alit√© pour valeur null. Dans ce cas, un patch rapide serait d'utiliser l'op√©rateur <em>Null coalescent</em> : <code>$variable ?? ''</code></li>
<li>Certaines op√©rations d'union, de coalescence et de comparaison ont √©t√© modifi√©es pour √™tre plus strictes.</li>
<li>Des mots r√©serv√©s ont √©t√© ajout√©s <a href="https://www.php.net/manual/fr/reserved.other-reserved-words.php">https://www.php.net/manual/fr/reserved.other-reserved-words.php</a></li>
</ul>

<h2>Quels sont les outils permettant d'aider √† une migration ?</h2>

<p>Tout d'abord, ne changez pas tout d'un seul coup en production, chez votre h√©bergeur m√™me si la plupart permettent de changer la version √† la vol√©e, sans possibilit√© de retour en arri√®re. Il y a un fort risque que cela ne fonctionne pas du premier coup. Testez <em>en local</em> pour vous assurer que tout fonctionne au pr√©alable (par exemple √† l'aide de Docker, voir ci-apr√®s).</p>

<p>Pour faire une analyse locale du code et relever les passages qui pourraient poser probl√®me, un certain nombre d'outils existent. Si votre machine locale sert au d√©veloppement, conna√Ætre la version de PHP install√©e avec <code>php --version</code> est une premi√®re √©tape (sauf si vous vous servez de Docker √©videmment).</p>

<p>En g√©n√©ral il vous faudra <code>git</code> et aussi <a href="https://getcomposer.org/">composer</a> installable dans la plupart des syst√®mes (sur Linux ou √©quivalent) via <code>curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer</code>.</p>

<h3>phan</h3>

<p><a href="https://github.com/phan/phan">phan</a> est un analyseur statique. Il faut l'installer, le configurer en d√©finissant la version cible √† atteindre, le dossier √† examiner, les plugins √† activer.</p>

<pre><code class="language-sh">composer require phan/phan
</code></pre>

<p>Cr√©er un fichier de configuration dans le dossier <code>.phan/config.php</code> en suivant le mod√®le : <a href="https://github.com/phan/phan/wiki/Getting-Started#creating-a-config-file">https://github.com/phan/phan/wiki/Getting-Started#creating-a-config-file</a> et notamment en modifiant la ligne <code>'target_php_version' =&gt; '8.1',</code> avec la bonne version.</p>

<p>Puis lancer <code>./vendor/bin/phan</code>. Il est possible √† ce stade qu'il vous faille √©galement installer <code>pecl install ast</code> et ajouter <code>extension=ast.so</code> √† php.ini.</p>

<p>L'analyse se lance et produit moult r√©sultats en vrac</p>

<pre><code class="language-txt">analyze ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100.0% 204MB/205MB
</code></pre>

<p>Pour les rediriger vers un fichier lisible ajoutez <code>&gt;phan-log.txt</code> √† l'instruction pr√©c√©dente, puis ouvrez-le tranquillement avec votre √©diteur de code.</p>

<h3>phpstan</h3>

<p><a href="https://github.com/phpstan/phpstan">phpstan</a> v√©rifie la syntaxe, √† la recherche d'erreurs, sans ex√©cuter votre code. La <a href="https://phpstan.org/user-guide/getting-started">documentation de phpstan</a> est bien con√ßue.</p>

<pre><code class="language-sh">composer require --dev phpstan/phpstan
# Lancer l'analyse o√π www est votre dossier de code source
vendor/bin/phpstan analyse www --memory-limit 1024M
</code></pre>

<p>L'analyse se d√©roule...</p>

<pre><code class="language-txt">240/452 [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]  53%
</code></pre>

<p>Et d√©voile les r√©sultats fichier par fichier.</p>

<pre><code class="language-txt">------ -------------------------------------------------------------------------------- 
  Line   app/helpers/string.php                                                
 ------ -------------------------------------------------------------------------------- 
  207    Function random_string() should return string but return statement is missing.  
 ------ -------------------------------------------------------------------------------- 
</code></pre>

<p>Pour les rediriger vers un fichier lisible ajoutez <code>&gt;phpstan-log.txt</code> √† l'instruction pr√©c√©dente, puis ouvrez-le tranquillement avec votre √©diteur de code.</p>

<h3>PHPCompatibility</h3>

<p><a href="https://github.com/PHPCompatibility/PHPCompatibility">PHPCompatibility</a> est un ensemble de compl√©ments pour PHP CodeSniffer qui v√©rifie la compatibilit√© entre plusieurs versions de PHP, et qui fonctionne √† partir de PHP 5.4</p>

<pre><code class="language-sh">composer require squizlabs/php_codesniffer --dev
composer require phpcompatibility/php-compatibility --dev

# Lancer l'analyse o√π "www" est le nom du dossier contenant le code source
vendor/bin/phpcs -p ./www --extensions=php --standard=vendor/phpcompatibility/php-compatibility/PHPCompatibility --runtime-set testVersion 8.2
</code></pre>

<p>L'analyse se lancera alors avec affichage de la progression...</p>

<pre><code class="language-txt">.............................................WW.............  60 / 452 (13%)
......W......................W...........W.................. 120 / 452 (27%)
............................................................ 180 / 452 (40%)
............................................................ 240 / 452 (53%)
......EW....W..W.W.E....E...W........EEEEE.E.E.EE........... 300 / 452 (66%)
............E....................E.E........................ 360 / 452 (80%)
.............................WEE..W.........E....W......W... 420 / 452 (93%)
W...............................                             452 / 452 (100%)
</code></pre>

<p>Et un inventaire des fichiers et des erreurs ou avertissements avec explications...</p>

<pre><code class="language-txt">FILE: /var/www/unfichier.php
-----------------------------------------------------------------------------------------------------------
FOUND 0 ERRORS AND 1 WARNING AFFECTING 1 LINE
-----------------------------------------------------------------------------------------------------------
 108 | WARNING | Function create_function() is deprecated since PHP 7.2; Use an anonymous function instead
-----------------------------------------------------------------------------------------------------------
</code></pre>

<p>Pour rediriger l'analyse vers un fichier lisible plut√¥t que de remplir tout le terminal, ajoutez <code>&gt;phpcs-log.txt</code> puis ouvrez-le tranquillement avec votre √©diteur de code.</p>

<p>Si vous avez un grand nombre de fichiers √† analyser, vous devrez peut √™tre augmenter le param√®tre <code>memory_limit</code> de php.ini (utilisez la commande <code>php --ini</code> pour savoir o√π se trouve le fichier utilis√©), ou ajouter √† la commande <code>-d memory_limit=1024M</code>.</p>

<h3>Docker</h3>

<p><a href="https://hub.docker.com/_/php">Docker</a> n'est pas en soi d√©di√© √† PHP, mais permettra de tester tr√®s facilement si votre projet, votre site tourne bien avec une quelconque version de PHP. Si votre projet fonctionne avec l'image PHP7.x, alors vous pouvez de mani√®re tr√®s souple changer la version dans le fichier <code>Dockerfile</code>, par exemple <code>FROM php:7.4-apache</code> vers <code>FROM php:8.2-apache</code> , relancer le conteneur et proc√©der pas √† pas.</p>

<h2>Et WordPress ?</h2>

<p>La compatibilit√© de WordPress avec les versions les plus fra√Æches de PHP n'est pas toujours √©vidente. Dans notre exp√©rience nous avons plusieurs fois constat√© des erreurs, avertissements en essayant d'utiliser les versions les plus r√©centes de PHP, avec la branche actuelle de WordPress. Cependant la situation s'am√©liore constamment et les difficult√©s proviennent plus souvent des extensions (aliment√©es par la communaut√©, mais pas toujours maintenues aussi activement qu'il le faudrait).</p>

<ul>
<li>WordPress 6.2 fonctionne bien avec PHP 8.1</li>
<li>Les versions 5.6 √† 6.2 de WordPress fonctionnent toujours bien avec PHP 5.6 √† PHP 7.4, pour des raisons de r√©tro-compatibilit√©.</li>
</ul>
<p><b><a href="https://www.alsacreations.com/article/lire/1916-Adapter-et-migrer-votre-ancien-site-PHP-vers-PHP8.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>D√©veloppement</category>
  	<dc:date>2023-09-11T12:54:29+01:00</dc:date>
  	<dc:creator>Rodolphe</dc:creator>
	</item>

  
	<item>
  	<title>Article : Les Container Queries en CSS</title>
  	<link>https://www.alsacreations.com/article/lire/1915-Les-Container-Queries-en-CSS.html</link>
  	<guid>https://www.alsacreations.com/article/lire/1915-Les-Container-Queries-en-CSS.html</guid>
  	<description><![CDATA[<p>CSS <strong lang="en"><a href="https://www.w3.org/TR/css-contain-3/">Container Queries</a></strong> (ou <em>"requ√™tes de conteneur"</em> ?) permettent d'appliquer des styles √† un √©l√©ment en fonction des propri√©t√©s de son conteneur, g√©n√©ralement sa taille.</p>

<p>Il s'agit d'un m√©canisme compl√©mentaire aux historiques <a href="https://www.alsacreations.com/article/lire/930-css3-media-queries.html">Media Queries</a> qui, eux, d√©tectent les caract√©ristiques de l'ensemble de la fen√™tre ou de l'√©cran du p√©riph√©rique.</p>

<p><img src="https://www.alsacreations.com/xmedia/doc/original/container-queries-illust-intro.svg" alt="Container queries CSS : illustration"></p>

<h2>Usage et int√©r√™t</h2>

<p>Les Media Queries repr√©sentent la premi√®re r√©ponse propos√©e par le W3C pour s'adapter √† tous les nouveaux "device intelligents", friands de Web, qui d√©barquent autour des ann√©es 2008-2010 (l'iPhone date de 2007) et qui pr√©parent √† la naissance du <a href="https://www.alsacreations.com/article/lire/1615-CestquoileResponsiveWebDesign.html">Responsive Webdesign</a>.</p>

<p>Pour la petite histoire, les premiers brouillons de sp√©cifications des Media Queries <a href="https://www.w3.org/standards/history/mediaqueries-3/">datent de&hellip;2001</a> mais le v√©ritable essor de cette fonctionnalit√© attendra 2010 avec les premi√®res impl√©mentations des navigateurs.</p>

<p class="info">
Les <strong>Container Queries</strong> introduisent un nouveau palier dans le Responsive Webdesign en apportant une souplesse jusqu'alors inatteignable&nbsp;: tandis que les Media Queries ne d√©tectent que l'ensemble du p√©riph√©rique, les Container Queries permettent d'interroger le parent (ou anc√™tre) d'un composant, bien plus proche et pertinent.
</p>

<p>√Ä l'heure o√π l'int√©gration se con√ßoit de plus en plus de mani√®re atomique, en isolant chacun des composants, <strong>il devient de plus en plus coh√©rent de styliser ces composants en vertu de leur environnement direct plut√¥t que de raisonner √† l'√©chelle de la fen√™tre enti√®re du navigateur.</strong> Les Container Queries sont parfaitement con√ßues dans cette optique.</p>

<p>L'extrait ci-dessous montre que la syntaxe entre les Media Queries et les Container Queries est tr√®s similaire&nbsp;:</p>

<pre><code class="language-css">/* Media Query (on d√©tecte la largeur de la fen√™tre) */
@media (min-width: 640px) {
  /* ici les styles appliqu√©s */
}

/* Container Query (on d√©tecte la largeur du conteneur) */
@container (min-width: 640px) {
  /* ici les styles appliqu√©s */
}
</code></pre>

<h2>Support navigateurs</h2>

<p>Poursuivons sur les bonnes nouvelles : les propri√©t√©s de Container Queries sont support√©es par une large majorit√© des navigateurs r√©cents, <a href="https://caniuse.com/css-container-queries">comme en t√©moigne la ressource CanIUse</a>, comme en t√©moigne la capture suivante. Elles sont donc d√©j√† utilisables en production, moyennant quelques ajustements sur certains p√©riph√©riques mobiles par exemple.</p>

<div>
<a href="https://caniuse.com/css-container-queries">
<picture>
<source type="image/webp" srcset="https://caniuse.bitsofco.de/image/css-container-queries.webp">
<source type="image/png" srcset="https://caniuse.bitsofco.de/image/css-container-queries.png">
<img src="https://caniuse.bitsofco.de/image/css-container-queries.jpg" alt="Data on support for the css-container-queries feature across the major browsers from caniuse.com">
</picture>
</a>
</div>

<h2>Container Query : en pratique</h2>

<p>Appliquer des styles selon une√© <span lang="en">Container Query</span> se d√©roule en deux temps&nbsp;:</p>

<ol>
<li>Nous devons <strong>identifier qui est le conteneur √† interroger</strong> en cr√©ant un "contexte de confinement"</li>
<li>Nous pouvons <strong>tester les conditions</strong> via <code>@container</code> (syntaxe quasiment identique √† <code>@media</code>)</li>
</ol>

<h3>D√©clarer qui est le conteneur √† interroger</h3>

<p>Pour identifier le conteneur que nous testerons, il nous faut cr√©er un <strong>contexte de confinement</strong> <em>(rassurez-vous, rien √† voir avec la douloureuse p√©riode de l'an 2020)</em> √† l'aide de la propri√©t√© <code>container-type</code> dont les valeurs possibles sont <code>inline-size</code>, <code>size</code>, ou <code>normal</code>&nbsp;:</p>

<ul>
<li><code>inline-size</code> : la condition porte sur la dimension <em>inline</em> (synonyme de <em>largeur</em> dans la majeure partie des cas)</li>
<li><code>size</code> : la condition porte sur les dimensions <em>inline</em> et <em>block</em> en m√™me temps (horizontale et verticale)</li>
<li><code>normal</code> : la condition ne peut pas porter sur la dimension de l'√©l√©ment (mais il est toutefois possible de cibler ses styles)</li>
</ul>

<p>Prenons comme exemple un composant <code>.card</code> dont les styles d√©pendent de la largeur de son parent <code>.card-container</code>&nbsp;:</p>

<pre><code class="language-html">&lt;div class="card-container"&gt;
  &lt;article class="card"&gt;
    ici le contenu d'une card
  &lt;/article&gt;
&lt;/div&gt;
</code></pre>

<pre><code class="language-css">/* On cr√©e un contexte de confinement sur .card-container */
/* Et on testera sa largeur */
.card-container {
  container-type: inline-size;
}
</code></pre>

<p class="info">
<strong>Note :</strong> Le conteneur n'est pas forc√©ment le parent direct, il peut s'agir de <i>n'importe quel anc√™tre</i> de l'√©l√©ment √† modifier.
</p>

<figure role="figure" aria-labelledby="caption-1" style="text-align:center; margin-bottom: 2rem">
  <img src="https://www.alsacreations.com/xmedia/doc/full/1692095758-illust.png" alt="voir la l√©gende associ√©e" width="540" height="" loading="lazy" style="height: auto">
  <figcaption id="caption-1"><i>Affichage des diff√©rents √©tat d'une card selon la taille de son conteneur</i></figcaption>
</figure>

<div>
<a class="demo" href="https://codepen.io/alsacreations/pen/dyQxERW">D√©mo : une card responsive</a>
</div>

<h3>Interroger le conteneur via <code>@container</code></h3>

<p>√Ä pr√©sent que notre conteneur est identifi√©, nous pouvons l'interroger afin de conna√Ætre ses √©tats (taille, ratio, orientation) et appliquer des styles sur ses descendants&nbsp;:</p>

<ul>
<li><code>aspect-ratio</code> : il s'agit du ratio entre la largeur et la hauteur du conteneur (ex. "16/9")</li>
<li><code>block-size</code> : il s'agit de la dimension "block" (g√©n√©ralement synonyme de <em>hauteur</em>, mais d√©pend de l'orientation du conteneur)</li>
<li><code>height</code> : d√©signe la hauteur du conteneur, quelle que soit son orientation</li>
<li><code>inline-size</code> : il s'agit de la dimension "inline" (g√©n√©ralement synonyme de <em>largeur</em>, mais d√©pend de l'orientation du conteneur)</li>
<li><code>orientation</code> : c'est l'orientation du conteneur (valeurs <code>landscape</code> ou <code>portrait</code>)</li>
<li><code>width</code> : d√©signe la largeur du conteneur, quelle que soit son orientation</li>
</ul>

<p>Exemple :</p>

<pre><code class="language-css">/* je teste si le conteneur a une largeur sup√©rieure ou √©gale √† 640px */
@container (min-width: 640px) {
  .card {
    ...
  }
}
</code></pre>

<figure role="figure" aria-labelledby="caption-2" style="text-align:center; margin-bottom: 2rem">
  <img src="https://www.alsacreations.com/xmedia/doc/full/1692095854-illust.png" alt="voir la l√©gende associ√©e" width="540" height="" loading="lazy" style="height: auto">
  <figcaption id="caption-2"><i>Affichage des diff√©rents √©tat d'un bouton selon la taille de son conteneur</i></figcaption>
</figure>

<div>
<a class="demo" href="https://codepen.io/alsacreations/pen/gOQVJRe">D√©mo : un bouton responsive</a>
</div>

<h2>Nommer le conteneur</h2>

<p>Les sp√©cifications pr√©voient de conf√©rer un nom personnalis√© au conteneur √† interroger. Cette possibilit√© offre la perspective tr√®s int√©ressante de pouvoir cibler un anc√™tre qui ne serait pas forc√©ment le premier rencontr√© dans la branche.</p>

<p>Ce nom est donn√© gr√¢ce √† la propri√©t√© <code>container-name</code>. On pourra ensuite cibler ce conteneur sp√©cifique au sein de la r√®gle <code>@container</code>&nbsp;:</p>

<pre><code class="language-css">/* On cr√©e un contexte de confinement sur .card-container */
/* Et on le nomme "product" */
.card-container {
  container-type: inline-size;
  container-name: product;
}
</code></pre>

<pre><code class="language-css">/* Je teste si "product" a une largeur sup√©rieure ou √©gale √† 640px */
@container product (min-width: 640px) {
  .card {
    ...
  }
}
</code></pre>

<h2>Syntaxe range et and / or</h2>

<p>Une √©volution r√©cente <a href="https://caniuse.com/css-media-range-syntax">(mais d√©j√† tr√®s bien support√©e)</a> des Media Queries autorise une syntaxe dite <span lang="en">"range syntax"</span> bien plus intuitive pour tout le monde.</p>

<p>Cette <span lang="en">"range syntax"</span> est √©galement adopt√©e au sein des Container Queries et facilite grandement la lecture&nbsp;:</p>

<pre><code class="language-css">/* version "√† l'ancienne" */
@container (min-width: 640px) {
  .card {
    ...
  }
}
/* version "moderne" */
@container (width &gt;= 640px) {
  .card {
    ...
  }
}
</code></pre>

<p>Les sp√©cifications offrent √©galement la possibilit√© d'enrichir et de combiner les requ√™tes via les mots-cl√©s <code>and</code>, <code>or</code> et <code>not</code>&nbsp;:</p>

<pre><code class="language-css">@container (width &gt; 400px) and (height &gt; 400px) {...}
@container (width &gt; 400px) or (height &gt; 400px) {...}
@container not (width &lt; 400px) {...}
</code></pre>

<h2>Nouvelles unit√©s responsive</h2>

<p>De <a href="https://caniuse.com/css-container-query-units">nouvelles unit√©s de mesure CSS</a> ont √©t√© ajout√©es lorsque des styles sont appliqu√©s √† l'aide de Container Queries.</p>

<p>Ces unit√©s permettent de d√©finir les dimensions des composants en fonction de l'espace disponible au sein de leur conteneur&nbsp;:</p>

<ul>
<li><code>cqw</code> : 1% de la largeur du conteneur</li>
<li><code>cqh</code> : 1% de la hauteur du conteneur</li>
<li><code>cqi</code> : 1% de la dimension inline du conteneur</li>
<li><code>cqb</code> : 1% de la dimension block du conteneur</li>
<li><code>cqmin</code> : la plus petite valeur entre <code>cqi</code> et <code>cqb</code></li>
<li><code>cqmax</code> : la plus grande valeur entre <code>cqi</code> et <code>cqb</code></li>
</ul>

<p>Dans l'exemple qui suit, les styles suivants seront appliqu√©s si le conteneur a une largeur entre 320px et 640px : une grille de deux colonnes est g√©n√©r√©e sur <code>.card</code>, la premi√®re colonne a une largeur de 20% du conteneur et la seconde occupe l'espace restant. La taille de police de <code>.card-title</code> est relative √† la largeur du conteneur avec un valeur minimale de <code>1em</code>&nbsp;:</p>

<pre><code class="language-css">@container (320px &lt;= width &lt;= 640px) {
  .card {
    display: grid;
    grid-template-columns: 20cqw 1fr;
  }
  .card-title {
    font-size: max(1em, 10cqw);
  }
}
</code></pre>

<h2>Aller plus loin : style queries</h2>

<p>Bien que la peinture des Container Queries soit encore toute fra√Æche, une √©volution de ce m√©canisme est d√©j√† en pr√©paration : les <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@container#style_container_queries">Style Container Queries</a>&nbsp;!</p>

<p>Cette √©volution est encore exp√©rimentale et <a href="https://caniuse.com/css-container-queries-style">son support tr√®s partiel</a>, mais son principe est d√©j√† r√©volutionnaire&nbsp;: il sera possible de cibler un conteneur selon la valeur calcul√©e de l'une de ses propri√©t√©s, voire d'une propri√©t√© personnalis√©e (<span lang="en">custom property</span>) en CSS&nbsp;:</p>

<pre><code class="language-css">@container style(position: relative) {
  .card { color: hotpink; }
}
</code></pre>

<pre><code class="language-css">@container style(--theme: dark) {
  .card { color: hotpink; }
}
</code></pre>

<p>D√©couvrez-en plus sur ce sujet palpitant gr√¢ce √† <a href="https://ishadeed.com/article/css-container-style-queries/">l'article de Ahmad Shadeed</a></p>

<h2>Ressources</h2>

<p>Pour finir sur ce tr√®s vaste sujet, voici quelques liens pour aller encore plus loin dans votre veille technologique&nbsp;:</p>

<ul>
<li>Documentation de MDN : <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries</a></li>
<li>Awesome Container Queries : <a href="https://github.com/sturobson/Awesome-Container-Queries">https://github.com/sturobson/Awesome-Container-Queries</a></li>
<li>CSS Container Queries guide : <a href="https://blog.logrocket.com/css-container-queries-guide/">https://blog.logrocket.com/css-container-queries-guide/</a></li>
<li>Container style queries : <a href="https://ishadeed.com/article/css-container-style-queries/">https://ishadeed.com/article/css-container-style-queries/</a></li>
<li>D√©mo Cactus (Una Kravets) : <a href="https://codepen.io/una/full/mdOgyVL">https://codepen.io/una/full/mdOgyVL</a></li>
<li>D√©mo Card : <a href="https://codepen.io/alsacreations/pen/dyQxERW">https://codepen.io/alsacreations/pen/dyQxERW</a></li>
<li>D√©mo Bouton : <a href="https://codepen.io/alsacreations/pen/gOQVJRe">https://codepen.io/alsacreations/pen/gOQVJRe</a></li>
</ul>
<p><b><a href="https://www.alsacreations.com/article/lire/1915-Les-Container-Queries-en-CSS.html">Publi√© par Alsacreations.com</a></b></p>]]></description>
  	<category>CSS</category>
  	<dc:date>2023-08-18T12:32:43+01:00</dc:date>
  	<dc:creator>Raphael</dc:creator>
	</item>

  
</channel>
</rss>

<!--
CPU : 0.0005
MEM : 0.66MB
-->
